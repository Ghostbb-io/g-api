var d=(e,s,r)=>new Promise((i,a)=>{var u=o=>{try{t(r.next(o))}catch(p){a(p)}},n=o=>{try{t(r.throw(o))}catch(p){a(p)}},t=o=>o.done?i(o.value):Promise.resolve(o.value).then(u,n);t((r=r.apply(e,s)).next())});import{P as w}from"./index-9fe0b115.js";import{B as h}from"./BasicForm-33def721.js";import"./componentMap-c5f962c4.js";import{u as P}from"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import{d as g,S as C,a8 as c,_ as F,a9 as B,aa as m,a0 as f,l,E as _}from"./vue-5c68ae35.js";import{d as b,b1 as E,_ as y}from"./index.js";import"./useContentViewHeight-c2d18fda.js";import"./useWindowSizeFn-997fa1d0.js";import"./onMountedOrActivated-97a1bb6a.js";import"./antd-12f11a56.js";import"./FormItem.vue_vue_type_script_lang-bb880c91.js";import"./helper-736f1539.js";import"./BasicForm.vue_vue_type_style_index_0_lang-4cc18aab.js";import"./index-cf0c6833.js";import"./useFormItem-16924efd.js";import"./uuid-31b8b5a4.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-cf464bf9.js";import"./index-7f09b489.js";const v=(e,s="message")=>b.patch({url:"/v1/user/password",params:e},{errorMessageMode:s}),N=[{field:"passwordOld",label:"當前密碼",component:"InputPassword",required:!0},{field:"passwordNew",label:"新密碼",component:"StrengthMeter",componentProps:{placeholder:"新密碼"},rules:[{required:!0,message:"請輸入新密碼"}]},{field:"confirmPassword",label:"確認密碼",component:"InputPassword",dynamicRules:({values:e})=>[{required:!0,validator:(s,r)=>r?r!==e.passwordNew?Promise.reject("二次輸入密碼不一致!"):Promise.resolve():Promise.reject("密碼不能為空")}]}],k=g({name:"ChangePassword",components:{BasicForm:h,PageWrapper:w},setup(){const{push:e}=C(),[s,{validate:r,resetFields:i}]=P({size:"large",baseColProps:{span:24},labelWidth:100,showActionButtonGroup:!1,schemas:N});function a(){return d(this,null,function*(){const u=yield r(),{passwordOld:n,passwordNew:t}=u;try{yield v({oldPassword:n,newPassword:t}),e(E.BASE_LOGIN)}catch(o){}})}return{register:s,resetFields:i,handleSubmit:a}}}),x={class:"py-8 bg-white flex flex-col justify-center items-center"},A={class:"flex justify-center"};function S(e,s,r,i,a,u){const n=c("BasicForm"),t=c("a-button"),o=c("PageWrapper");return F(),B(o,{title:"修改當前用戶密碼",content:"修改成功後會自動退出當前登入！"},{default:m(()=>[f("div",x,[l(n,{onRegister:e.register},null,8,["onRegister"]),f("div",A,[l(t,{onClick:e.resetFields},{default:m(()=>[_(" 重置 ")]),_:1},8,["onClick"]),l(t,{class:"!ml-4",type:"primary",onClick:e.handleSubmit},{default:m(()=>[_(" 確認 ")]),_:1},8,["onClick"])])])]),_:1})}const ee=y(k,[["render",S]]);export{ee as default};
