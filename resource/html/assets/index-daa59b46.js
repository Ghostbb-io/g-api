import{aW as x,aX as v,aY as b,Q as k,C as $,_ as R}from"./index.js";import{u as s,s as B,f as y,g as I,j as M,d as P,a8 as W,_ as E,a9 as S,aa as m,l as g,E as w}from"./vue-5c68ae35.js";import{P as z}from"./index-9fe0b115.js";import"./antd-12f11a56.js";import"./useContentViewHeight-c2d18fda.js";import"./useWindowSizeFn-997fa1d0.js";import"./onMountedOrActivated-97a1bb6a.js";const L=Symbol("watermark-dom"),_=new WeakMap;function N(n=y(document.body)){const a=s(n);if(a&&_.has(a))return _.get(a);const l=b(function(){const t=s(n);if(!t)return;const{clientHeight:e,clientWidth:r}=t;d({height:e,width:r})}),c=L.toString(),i=B(),f=()=>{const t=s(i);i.value=void 0;const e=s(n);e&&(t&&e.removeChild(t),x(e,l))};function u(t){const e=document.createElement("canvas"),r=300,h=240;Object.assign(e,{width:r,height:h});const o=e.getContext("2d");return o&&(o.rotate(-20*Math.PI/120),o.font="15px Vedana",o.fillStyle="rgba(0, 0, 0, 0.15)",o.textAlign="left",o.textBaseline="middle",o.fillText(t,r/20,h)),e.toDataURL("image/png")}function d(t={}){const e=s(i);e&&(k(t.width)&&(e.style.width=`${t.width}px`),k(t.height)&&(e.style.height=`${t.height}px`),k(t.str)&&(e.style.background=`url(${u(t.str)}) left top repeat`))}const C=t=>{if(s(i))return d({str:t}),c;const e=document.createElement("div");i.value=e,e.id=c,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const r=s(n);if(!r)return c;const{clientHeight:h,clientWidth:o}=r;return d({str:t,width:o,height:h}),r.appendChild(e),_.set(r,{setWatermark:p,clear:f}),c};function p(t){C(t),v(document.documentElement,l),I()&&M(()=>{f()})}return{setWatermark:p,clear:f}}const T=P({components:{CollapseContainer:$,PageWrapper:z},setup(){const n=y(null),{setWatermark:a,clear:l}=N();return{setWatermark:a,clear:l,areaRef:n}}});function V(n,a,l,c,i,f){const u=W("a-button"),d=W("CollapseContainer"),C=W("PageWrapper");return E(),S(C,{title:"水印示例"},{default:m(()=>[g(d,{class:"w-full h-32 bg-white rounded-md",title:"Global WaterMark"},{default:m(()=>[g(u,{type:"primary",class:"mr-2",onClick:a[0]||(a[0]=p=>n.setWatermark("WaterMark Info"))},{default:m(()=>[w(" Create ")]),_:1}),g(u,{color:"error",class:"mr-2",onClick:n.clear},{default:m(()=>[w(" Clear ")]),_:1},8,["onClick"]),g(u,{color:"warning",class:"mr-2",onClick:a[1]||(a[1]=p=>n.setWatermark("WaterMark Info New"))},{default:m(()=>[w(" Reset ")]),_:1})]),_:1})]),_:1})}const O=R(T,[["render",V]]);export{O as default};
