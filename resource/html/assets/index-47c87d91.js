import{B as b}from"./BasicTable-9834a2fb.js";import{T as B}from"./componentMap-c5f962c4.js";import"./TableImg.vue_vue_type_style_index_0_lang-3cd25fdb.js";import{u as A}from"./useTable-b33575de.js";import{V as g,_ as D}from"./index.js";import{_ as T,c as w,s as E}from"./ApiDrawer.vue_vue_type_script_setup_true_lang-92368bce.js";import{u as k}from"./index-ae722a40.js";import{g as y,d as S}from"./api-29ef4ec9.js";import{d as R,a8 as o,_ as f,$,l as i,aa as r,E as h,a9 as P,ac as V}from"./vue-5c68ae35.js";import"./BasicForm-33def721.js";import"./FormItem.vue_vue_type_script_lang-bb880c91.js";import"./helper-736f1539.js";import"./antd-12f11a56.js";import"./BasicForm.vue_vue_type_style_index_0_lang-4cc18aab.js";import"./index-cf0c6833.js";import"./useWindowSizeFn-997fa1d0.js";import"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import"./useFormItem-16924efd.js";import"./uuid-31b8b5a4.js";import"./onMountedOrActivated-97a1bb6a.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-cf464bf9.js";import"./index-7f09b489.js";import"./sortable.esm-4ae27e0b.js";const v=R({name:"ApiManagement",components:{BasicTable:b,ApiDrawer:T,PopConfirmButton:g,TableAction:B},setup(){const[e,{openDrawer:a}]=k(),[m,{reload:u}]=A({title:"Api列表",api:y,columns:w,formConfig:{labelWidth:120,schemas:E,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:80,title:"操作",dataIndex:"action",fixed:void 0}});function c(t){a(!0,{record:t,isUpdate:!0,id:t.id})}function p(t){S(t.id).finally(()=>n())}function s(){a(!0,{isUpdate:!1,id:0})}function l(){}function n(){u()}return{registerTable:m,handleSuccess:n,handleCreate:s,handleResetCache:l,registerDrawer:e,handleEdit:c,handleDelete:p}}});function F(e,a,m,u,c,p){const s=o("PopConfirmButton"),l=o("a-button"),n=o("TableAction"),t=o("BasicTable"),C=o("ApiDrawer");return f(),$("div",null,[i(t,{onRegister:e.registerTable},{toolbar:r(()=>[i(s,{title:"確定要刷新緩存嗎?",onConfirm:e.handleResetCache},{default:r(()=>[h(" 刷新緩存 ")]),_:1},8,["onConfirm"]),i(l,{type:"primary",onClick:e.handleCreate},{default:r(()=>[h(" 新增Api ")]),_:1},8,["onClick"])]),bodyCell:r(({column:_,record:d})=>[_.key==="action"?(f(),P(n,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,d)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否確認刪除",placement:"left",confirm:e.handleDelete.bind(null,d)}}]},null,8,["actions"])):V("",!0)]),_:1},8,["onRegister"]),i(C,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const se=D(v,[["render",F]]);export{se as default};
