var w=Object.defineProperty;var m=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var f=(t,a,e)=>a in t?w(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,T=(t,a)=>{for(var e in a||(a={}))A.call(a,e)&&f(t,e,a[e]);if(m)for(var e of m(a))g.call(a,e)&&f(t,e,a[e]);return t};var u=(t,a,e)=>new Promise((n,c)=>{var p=s=>{try{i(e.next(s))}catch(r){c(r)}},d=s=>{try{i(e.throw(s))}catch(r){c(r)}},i=s=>s.done?n(s.value):Promise.resolve(s.value).then(p,d);i((e=e.apply(t,a)).next())});import{B as v}from"./BasicForm-33def721.js";import"./componentMap-c5f962c4.js";import{u as I}from"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import{m as D,d as x,f as h,u as l,c as _,_ as S,a9 as k,aa as B,l as C,ad as G}from"./vue-5c68ae35.js";import{K as L}from"./antd-12f11a56.js";import{a as F,B as U}from"./index-ae722a40.js";import{a as O,e as R}from"./api-29ef4ec9.js";const M=[{title:"Api路徑",dataIndex:"path",width:200},{title:"請求",dataIndex:"method",width:80,customRender:({record:t})=>{const a=t.method;let e="";switch(a){case"GET":e="blue";break;case"POST":e="green";break;case"PATCH":e="cyan";break;case"PUT":e="orange";break;case"DELETE":e="red";break}return D(L,{color:e},()=>a)}},{title:"Api分組",dataIndex:"group",width:180},{title:"Api描述",dataIndex:"desc",width:180},{title:"創建時間",dataIndex:"createdAt",width:180},{title:"最後更新時間",dataIndex:"updatedAt",width:180}],Q=[{field:"path",label:"路徑",component:"Input",colProps:{span:6}},{field:"group",label:"Api組",component:"Input",colProps:{span:6}},{field:"method",label:"請求",component:"Select",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PATCH",value:"PATCH"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}]},colProps:{span:4}}],y=[{field:"path",label:"路徑",required:!0,component:"Input"},{field:"group",label:"Api組",required:!0,component:"Input"},{field:"method",label:"請求",component:"RadioButtonGroup",defaultValue:"GET",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PATCH",value:"PATCH"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}]}},{label:"描述",field:"desc",component:"InputTextArea"}],X=x({__name:"ApiDrawer",emits:["success","register"],setup(t,{emit:a}){const e=h(!0),n=h(0),[c,{resetFields:p,setFieldsValue:d,validate:i}]=I({labelWidth:90,baseColProps:{span:24},schemas:y,showActionButtonGroup:!1}),[s,{setDrawerProps:r,closeDrawer:b}]=F(o=>u(this,null,function*(){p(),r({confirmLoading:!1}),e.value=!!(o!=null&&o.isUpdate),n.value=o.id,l(e)&&d(T({},o.record))})),P=_(()=>l(e)?"編輯Api":"新增Api");function E(){return u(this,null,function*(){try{const o=yield i();r({confirmLoading:!0}),l(e)?yield R(n.value,o):yield O(o),b(),a("success")}finally{r({confirmLoading:!1})}})}return(o,H)=>(S(),k(l(U),G(o.$attrs,{onRegister:l(s),showFooter:"",title:P.value,width:"500px",onOk:E}),{default:B(()=>[C(l(v),{onRegister:l(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{X as _,M as c,Q as s};
