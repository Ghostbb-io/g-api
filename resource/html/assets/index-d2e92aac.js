var s1=Object.defineProperty,c1=Object.defineProperties;var l1=Object.getOwnPropertyDescriptors;var vg=Object.getOwnPropertySymbols;var f1=Object.prototype.hasOwnProperty,p1=Object.prototype.propertyIsEnumerable;var bg=(g,h,s)=>h in g?s1(g,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[h]=s,cf=(g,h)=>{for(var s in h||(h={}))f1.call(h,s)&&bg(g,s,h[s]);if(vg)for(var s of vg(h))p1.call(h,s)&&bg(g,s,h[s]);return g},mg=(g,h)=>c1(g,l1(h));var wu=(g,h,s)=>new Promise((f,i)=>{var l=m=>{try{v(s.next(m))}catch(w){i(w)}},c=m=>{try{v(s.throw(m))}catch(w){i(w)}},v=m=>m.done?f(m.value):Promise.resolve(m.value).then(l,c);v((s=s.apply(g,h)).next())});import{I as d1,_ as mf,f as h1,aI as y1,w as g1}from"./index.js";import{p as v1,e as b1,d as Kg,f as xu,h as m1,u as dn,x as lf,b as O1,a8 as Yr,_ as Gr,$ as Ai,F as Og,ab as _1,l as Di,aa as ku,E as w1,a1 as x1,a2 as Eu,ac as ff,ad as E1,a9 as Of,c as S1,w as _g,o as j1,a0 as P1}from"./vue-5c68ae35.js";import{a1 as A1,T as k1,b as M1}from"./antd-12f11a56.js";import{B as T1,b as D1}from"./index-cf0c6833.js";import{J as N1}from"./index-d69a013b.js";import{P as C1}from"./index-9fe0b115.js";import"./useWindowSizeFn-997fa1d0.js";import"./useContentViewHeight-c2d18fda.js";import"./onMountedOrActivated-97a1bb6a.js";const Zg=Symbol("flow-chart");function R1(g){v1(Zg,g)}function I1(){return b1(Zg)}var en=(g=>(g.ZOOM_IN="zoomIn",g.ZOOM_OUT="zoomOut",g.RESET_ZOOM="resetZoom",g.UNDO="undo",g.REDO="redo",g.SNAPSHOT="snapshot",g.VIEW_DATA="viewData",g))(en||{});const L1=Kg({name:"FlowChartToolbar",components:{Icon:d1,Divider:A1,Tooltip:k1},props:{prefixCls:String},emits:["view-data"],setup(g,{emit:h}){const s=xu([{type:en.ZOOM_IN,icon:"codicon:zoom-out",tooltip:"缩小"},{type:en.ZOOM_OUT,icon:"codicon:zoom-in",tooltip:"放大"},{type:en.RESET_ZOOM,icon:"codicon:screen-normal",tooltip:"重置比例"},{separate:!0},{type:en.UNDO,icon:"ion:arrow-undo-outline",tooltip:"后退",disabled:!0},{type:en.REDO,icon:"ion:arrow-redo-outline",tooltip:"前进",disabled:!0},{separate:!0},{type:en.SNAPSHOT,icon:"ion:download-outline",tooltip:"下载"},{type:en.VIEW_DATA,icon:"carbon:document-view",tooltip:"查看数据"}]),{logicFlow:f}=I1();function i({data:{undoAble:c,redoAble:v}}){const m=dn(s),w=m.findIndex(E=>E.type===en.UNDO),S=m.findIndex(E=>E.type===en.REDO);w!==-1&&(dn(s)[w].disabled=!c),S!==-1&&(dn(s)[S].disabled=!v)}const l=c=>{const v=dn(f);if(v)switch(c.type){case en.ZOOM_IN:v.zoom();break;case en.ZOOM_OUT:v.zoom(!0);break;case en.RESET_ZOOM:v.resetZoom();break;case en.UNDO:v.undo();break;case en.REDO:v.redo();break;case en.SNAPSHOT:v.getSnapshot();break;case en.VIEW_DATA:h("view-data");break}};return m1(()=>wu(this,null,function*(){var c;dn(f)&&(yield lf(),(c=dn(f))==null||c.on("history:change",i))})),O1(()=>{var c;(c=dn(f))==null||c.off("history:change",i)}),{toolbarItemList:s,onControl:l}}});const z1=["onClick"];function B1(g,h,s,f,i,l){const c=Yr("Icon"),v=Yr("Tooltip"),m=Yr("Divider");return Gr(),Ai("div",{class:Eu([`${g.prefixCls}-toolbar`,"flex items-center px-2 py-1"])},[(Gr(!0),Ai(Og,null,_1(g.toolbarItemList,w=>(Gr(),Ai(Og,{key:w.type},[Di(v,E1({placement:"bottom"},w.disabled?{visible:!1}:{}),{title:ku(()=>[w1(x1(w.tooltip),1)]),default:ku(()=>[w.icon?(Gr(),Ai("span",{key:0,class:Eu(`${g.prefixCls}-toolbar__icon`),onClick:S=>g.onControl(w)},[Di(c,{icon:w.icon,class:Eu(w.disabled?"cursor-not-allowed disabeld":"cursor-pointer")},null,8,["icon","class"])],10,z1)):ff("",!0)]),_:2},1040),w.separate?(Gr(),Of(m,{key:0,type:"vertical"})):ff("",!0)],64))),128))],2)}const F1=mf(L1,[["render",B1]]);var pf={exports:{}};(function(g,h){(function(s,f){g.exports=f()})(window,function(){return function(s){var f={};function i(l){if(f[l])return f[l].exports;var c=f[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=s,i.c=f,i.d=function(l,c,v){i.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:v})},i.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.t=function(l,c){if(1&c&&(l=i(l)),8&c||4&c&&typeof l=="object"&&l&&l.__esModule)return l;var v=Object.create(null);if(i.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:l}),2&c&&typeof l!="string")for(var m in l)i.d(v,m,function(w){return l[w]}.bind(null,m));return v},i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,"a",c),c},i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},i.p="",i(i.s=215)}([function(s,f,i){i.d(f,"a",function(){return K}),i.d(f,"b",function(){return ie}),i.d(f,"c",function(){return Ce}),i.d(f,"d",function(){return Ze}),i.d(f,"e",function(){return L}),i.d(f,"f",function(){return $}),i.d(f,"g",function(){return L}),i.d(f,"h",function(){return Pe}),i.d(f,"i",function(){return c}),i.d(f,"j",function(){return Ke}),i.d(f,"k",function(){return F});var l,c,v,m,w,S,E,A={},P=[],T=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(J,q){for(var ae in q)J[ae]=q[ae];return J}function B(J){var q=J.parentNode;q&&q.removeChild(J)}function L(J,q,ae){var _e,Ae,we,qe={};for(we in q)we=="key"?_e=q[we]:we=="ref"?Ae=q[we]:qe[we]=q[we];if(arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),typeof J=="function"&&J.defaultProps!=null)for(we in J.defaultProps)qe[we]===void 0&&(qe[we]=J.defaultProps[we]);return H(J,qe,_e,Ae,null)}function H(J,q,ae,_e,Ae){var we={type:J,props:q,key:ae,ref:_e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ae==null?++v:Ae};return Ae==null&&c.vnode!=null&&c.vnode(we),we}function $(){return{current:null}}function ie(J){return J.children}function K(J,q){this.props=J,this.context=q}function V(J,q){if(q==null)return J.__?V(J.__,J.__.__k.indexOf(J)+1):null;for(var ae;q<J.__k.length;q++)if((ae=J.__k[q])!=null&&ae.__e!=null)return ae.__e;return typeof J.type=="function"?V(J):null}function Z(J){var q,ae;if((J=J.__)!=null&&J.__c!=null){for(J.__e=J.__c.base=null,q=0;q<J.__k.length;q++)if((ae=J.__k[q])!=null&&ae.__e!=null){J.__e=J.__c.base=ae.__e;break}return Z(J)}}function z(J){(!J.__d&&(J.__d=!0)&&m.push(J)&&!D.__r++||S!==c.debounceRendering)&&((S=c.debounceRendering)||w)(D)}function D(){for(var J;D.__r=m.length;)J=m.sort(function(q,ae){return q.__v.__b-ae.__v.__b}),m=[],J.some(function(q){var ae,_e,Ae,we,qe,nt;q.__d&&(qe=(we=(ae=q).__v).__e,(nt=ae.__P)&&(_e=[],(Ae=N({},we)).__v=we.__v+1,ge(nt,we,Ae,ae.__n,nt.ownerSVGElement!==void 0,we.__h!=null?[qe]:null,_e,qe==null?V(we):qe,we.__h),ue(_e,we),we.__e!=qe&&Z(we)))})}function C(J,q,ae,_e,Ae,we,qe,nt,$e,Ye){var ve,He,te,Le,ut,vt,it,yt=_e&&_e.__k||P,St=yt.length;for(ae.__k=[],ve=0;ve<q.length;ve++)if((Le=ae.__k[ve]=(Le=q[ve])==null||typeof Le=="boolean"?null:typeof Le=="string"||typeof Le=="number"||typeof Le=="bigint"?H(null,Le,null,null,Le):Array.isArray(Le)?H(ie,{children:Le},null,null,null):Le.__b>0?H(Le.type,Le.props,Le.key,null,Le.__v):Le)!=null){if(Le.__=ae,Le.__b=ae.__b+1,(te=yt[ve])===null||te&&Le.key==te.key&&Le.type===te.type)yt[ve]=void 0;else for(He=0;He<St;He++){if((te=yt[He])&&Le.key==te.key&&Le.type===te.type){yt[He]=void 0;break}te=null}ge(J,Le,te=te||A,Ae,we,qe,nt,$e,Ye),ut=Le.__e,(He=Le.ref)&&te.ref!=He&&(it||(it=[]),te.ref&&it.push(te.ref,null,Le),it.push(He,Le.__c||ut,Le)),ut!=null?(vt==null&&(vt=ut),typeof Le.type=="function"&&Le.__k===te.__k?Le.__d=$e=R(Le,$e,J):$e=Q(J,Le,te,yt,ut,$e),typeof ae.type=="function"&&(ae.__d=$e)):$e&&te.__e==$e&&$e.parentNode!=J&&($e=V(te))}for(ae.__e=vt,ve=St;ve--;)yt[ve]!=null&&(typeof ae.type=="function"&&yt[ve].__e!=null&&yt[ve].__e==ae.__d&&(ae.__d=V(_e,ve+1)),Se(yt[ve],yt[ve]));if(it)for(ve=0;ve<it.length;ve++)be(it[ve],it[++ve],it[++ve])}function R(J,q,ae){for(var _e,Ae=J.__k,we=0;Ae&&we<Ae.length;we++)(_e=Ae[we])&&(_e.__=J,q=typeof _e.type=="function"?R(_e,q,ae):Q(ae,_e,_e,Ae,_e.__e,q));return q}function F(J,q){return q=q||[],J==null||typeof J=="boolean"||(Array.isArray(J)?J.some(function(ae){F(ae,q)}):q.push(J)),q}function Q(J,q,ae,_e,Ae,we){var qe,nt,$e;if(q.__d!==void 0)qe=q.__d,q.__d=void 0;else if(ae==null||Ae!=we||Ae.parentNode==null)e:if(we==null||we.parentNode!==J)J.appendChild(Ae),qe=null;else{for(nt=we,$e=0;(nt=nt.nextSibling)&&$e<_e.length;$e+=2)if(nt==Ae)break e;J.insertBefore(Ae,we),qe=we}return qe!==void 0?qe:Ae.nextSibling}function le(J,q,ae){q[0]==="-"?J.setProperty(q,ae):J[q]=ae==null?"":typeof ae!="number"||T.test(q)?ae:ae+"px"}function ce(J,q,ae,_e,Ae){var we;e:if(q==="style")if(typeof ae=="string")J.style.cssText=ae;else{if(typeof _e=="string"&&(J.style.cssText=_e=""),_e)for(q in _e)ae&&q in ae||le(J.style,q,"");if(ae)for(q in ae)_e&&ae[q]===_e[q]||le(J.style,q,ae[q])}else if(q[0]==="o"&&q[1]==="n")we=q!==(q=q.replace(/Capture$/,"")),q=q.toLowerCase()in J?q.toLowerCase().slice(2):q.slice(2),J.l||(J.l={}),J.l[q+we]=ae,ae?_e||J.addEventListener(q,we?xe:ye,we):J.removeEventListener(q,we?xe:ye,we);else if(q!=="dangerouslySetInnerHTML"){if(Ae)q=q.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(q!=="href"&&q!=="list"&&q!=="form"&&q!=="tabIndex"&&q!=="download"&&q in J)try{J[q]=ae==null?"":ae;break e}catch(qe){}typeof ae=="function"||(ae!=null&&(ae!==!1||q[0]==="a"&&q[1]==="r")?J.setAttribute(q,ae):J.removeAttribute(q))}}function ye(J){this.l[J.type+!1](c.event?c.event(J):J)}function xe(J){this.l[J.type+!0](c.event?c.event(J):J)}function ge(J,q,ae,_e,Ae,we,qe,nt,$e){var Ye,ve,He,te,Le,ut,vt,it,yt,St,Pt,at=q.type;if(q.constructor!==void 0)return null;ae.__h!=null&&($e=ae.__h,nt=q.__e=ae.__e,q.__h=null,we=[nt]),(Ye=c.__b)&&Ye(q);try{e:if(typeof at=="function"){if(it=q.props,yt=(Ye=at.contextType)&&_e[Ye.__c],St=Ye?yt?yt.props.value:Ye.__:_e,ae.__c?vt=(ve=q.__c=ae.__c).__=ve.__E:("prototype"in at&&at.prototype.render?q.__c=ve=new at(it,St):(q.__c=ve=new K(it,St),ve.constructor=at,ve.render=Ie),yt&&yt.sub(ve),ve.props=it,ve.state||(ve.state={}),ve.context=St,ve.__n=_e,He=ve.__d=!0,ve.__h=[]),ve.__s==null&&(ve.__s=ve.state),at.getDerivedStateFromProps!=null&&(ve.__s==ve.state&&(ve.__s=N({},ve.__s)),N(ve.__s,at.getDerivedStateFromProps(it,ve.__s))),te=ve.props,Le=ve.state,He)at.getDerivedStateFromProps==null&&ve.componentWillMount!=null&&ve.componentWillMount(),ve.componentDidMount!=null&&ve.__h.push(ve.componentDidMount);else{if(at.getDerivedStateFromProps==null&&it!==te&&ve.componentWillReceiveProps!=null&&ve.componentWillReceiveProps(it,St),!ve.__e&&ve.shouldComponentUpdate!=null&&ve.shouldComponentUpdate(it,ve.__s,St)===!1||q.__v===ae.__v){ve.props=it,ve.state=ve.__s,q.__v!==ae.__v&&(ve.__d=!1),ve.__v=q,q.__e=ae.__e,q.__k=ae.__k,q.__k.forEach(function(Nt){Nt&&(Nt.__=q)}),ve.__h.length&&qe.push(ve);break e}ve.componentWillUpdate!=null&&ve.componentWillUpdate(it,ve.__s,St),ve.componentDidUpdate!=null&&ve.__h.push(function(){ve.componentDidUpdate(te,Le,ut)})}ve.context=St,ve.props=it,ve.state=ve.__s,(Ye=c.__r)&&Ye(q),ve.__d=!1,ve.__v=q,ve.__P=J,Ye=ve.render(ve.props,ve.state,ve.context),ve.state=ve.__s,ve.getChildContext!=null&&(_e=N(N({},_e),ve.getChildContext())),He||ve.getSnapshotBeforeUpdate==null||(ut=ve.getSnapshotBeforeUpdate(te,Le)),Pt=Ye!=null&&Ye.type===ie&&Ye.key==null?Ye.props.children:Ye,C(J,Array.isArray(Pt)?Pt:[Pt],q,ae,_e,Ae,we,qe,nt,$e),ve.base=q.__e,q.__h=null,ve.__h.length&&qe.push(ve),vt&&(ve.__E=ve.__=null),ve.__e=!1}else we==null&&q.__v===ae.__v?(q.__k=ae.__k,q.__e=ae.__e):q.__e=he(ae.__e,q,ae,_e,Ae,we,qe,$e);(Ye=c.diffed)&&Ye(q)}catch(Nt){q.__v=null,($e||we!=null)&&(q.__e=nt,q.__h=!!$e,we[we.indexOf(nt)]=null),c.__e(Nt,q,ae)}}function ue(J,q){c.__c&&c.__c(q,J),J.some(function(ae){try{J=ae.__h,ae.__h=[],J.some(function(_e){_e.call(ae)})}catch(_e){c.__e(_e,ae.__v)}})}function he(J,q,ae,_e,Ae,we,qe,nt){var $e,Ye,ve,He=ae.props,te=q.props,Le=q.type,ut=0;if(Le==="svg"&&(Ae=!0),we!=null){for(;ut<we.length;ut++)if(($e=we[ut])&&"setAttribute"in $e==!!Le&&(Le?$e.localName===Le:$e.nodeType===3)){J=$e,we[ut]=null;break}}if(J==null){if(Le===null)return document.createTextNode(te);J=Ae?document.createElementNS("http://www.w3.org/2000/svg",Le):document.createElement(Le,te.is&&te),we=null,nt=!1}if(Le===null)He===te||nt&&J.data===te||(J.data=te);else{if(we=we&&l.call(J.childNodes),Ye=(He=ae.props||A).dangerouslySetInnerHTML,ve=te.dangerouslySetInnerHTML,!nt){if(we!=null)for(He={},ut=0;ut<J.attributes.length;ut++)He[J.attributes[ut].name]=J.attributes[ut].value;(ve||Ye)&&(ve&&(Ye&&ve.__html==Ye.__html||ve.__html===J.innerHTML)||(J.innerHTML=ve&&ve.__html||""))}if(function(vt,it,yt,St,Pt){var at;for(at in yt)at==="children"||at==="key"||at in it||ce(vt,at,null,yt[at],St);for(at in it)Pt&&typeof it[at]!="function"||at==="children"||at==="key"||at==="value"||at==="checked"||yt[at]===it[at]||ce(vt,at,it[at],yt[at],St)}(J,te,He,Ae,nt),ve)q.__k=[];else if(ut=q.props.children,C(J,Array.isArray(ut)?ut:[ut],q,ae,_e,Ae&&Le!=="foreignObject",we,qe,we?we[0]:ae.__k&&V(ae,0),nt),we!=null)for(ut=we.length;ut--;)we[ut]!=null&&B(we[ut]);nt||("value"in te&&(ut=te.value)!==void 0&&(ut!==He.value||ut!==J.value||Le==="progress"&&!ut)&&ce(J,"value",ut,He.value,!1),"checked"in te&&(ut=te.checked)!==void 0&&ut!==J.checked&&ce(J,"checked",ut,He.checked,!1))}return J}function be(J,q,ae){try{typeof J=="function"?J(q):J.current=q}catch(_e){c.__e(_e,ae)}}function Se(J,q,ae){var _e,Ae;if(c.unmount&&c.unmount(J),(_e=J.ref)&&(_e.current&&_e.current!==J.__e||be(_e,null,q)),(_e=J.__c)!=null){if(_e.componentWillUnmount)try{_e.componentWillUnmount()}catch(we){c.__e(we,q)}_e.base=_e.__P=null}if(_e=J.__k)for(Ae=0;Ae<_e.length;Ae++)_e[Ae]&&Se(_e[Ae],q,typeof J.type!="function");ae||J.__e==null||B(J.__e),J.__e=J.__d=void 0}function Ie(J,q,ae){return this.constructor(J,ae)}function Ke(J,q,ae){var _e,Ae,we;c.__&&c.__(J,q),Ae=(_e=typeof ae=="function")?null:ae&&ae.__k||q.__k,we=[],ge(q,J=(!_e&&ae||q).__k=L(ie,null,[J]),Ae||A,A,q.ownerSVGElement!==void 0,!_e&&ae?[ae]:Ae?null:q.firstChild?l.call(q.childNodes):null,we,!_e&&ae?ae:Ae?Ae.__e:q.firstChild,_e),ue(we,J)}function Pe(J,q){Ke(J,q,Pe)}function Ce(J,q,ae){var _e,Ae,we,qe=N({},J.props);for(we in q)we=="key"?_e=q[we]:we=="ref"?Ae=q[we]:qe[we]=q[we];return arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),H(J.type,qe,_e||J.key,Ae||J.ref,null)}function Ze(J,q){var ae={__c:q="__cC"+E++,__:J,Consumer:function(_e,Ae){return _e.children(Ae)},Provider:function(_e){var Ae,we;return this.getChildContext||(Ae=[],(we={})[q]=this,this.getChildContext=function(){return we},this.shouldComponentUpdate=function(qe){this.props.value!==qe.value&&Ae.some(z)},this.sub=function(qe){Ae.push(qe);var nt=qe.componentWillUnmount;qe.componentWillUnmount=function(){Ae.splice(Ae.indexOf(qe),1),nt&&nt.call(qe)}}),_e.children}};return ae.Provider.__=ae.Consumer.contextType=ae}l=P.slice,c={__e:function(J,q){for(var ae,_e,Ae;q=q.__;)if((ae=q.__c)&&!ae.__)try{if((_e=ae.constructor)&&_e.getDerivedStateFromError!=null&&(ae.setState(_e.getDerivedStateFromError(J)),Ae=ae.__d),ae.componentDidCatch!=null&&(ae.componentDidCatch(J),Ae=ae.__d),Ae)return ae.__E=ae}catch(we){J=we}throw J}},v=0,K.prototype.setState=function(J,q){var ae;ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof J=="function"&&(J=J(N({},ae),this.props)),J&&N(ae,J),J!=null&&this.__v&&(q&&this.__h.push(q),z(this))},K.prototype.forceUpdate=function(J){this.__v&&(this.__e=!0,J&&this.__h.push(J),z(this))},K.prototype.render=ie,m=[],w=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,D.__r=0,E=0},function(s,f,i){(function(l,c){i.d(f,"a",function(){return z}),i.d(f,"b",function(){return qo}),i.d(f,"c",function(){return zn}),i.d(f,"d",function(){return et}),i.d(f,"e",function(){return De}),i.d(f,"f",function(){return Te}),i.d(f,"g",function(){return Ve}),i.d(f,"h",function(){return Tr}),i.d(f,"i",function(){return Pt}),i.d(f,"j",function(){return ze}),i.d(f,"k",function(){return Wn}),i.d(f,"l",function(){return Wo}),i.d(f,"m",function(){return vt}),i.d(f,"n",function(){return kr}),i.d(f,"o",function(){return R}),i.d(f,"p",function(){return qi}),i.d(f,"q",function(){return Kn}),i.d(f,"r",function(){return Wi}),i.d(f,"s",function(){return xn}),i.d(f,"t",function(){return Kr}),i.d(f,"u",function(){return lo}),i.d(f,"v",function(){return Ku}),i.d(f,"w",function(){return Zi}),i.d(f,"x",function(){return qr}),i.d(f,"y",function(){return Nn}),i.d(f,"z",function(){return It}),i.d(f,"A",function(){return gn}),i.d(f,"B",function(){return Zn}),i.d(f,"C",function(){return Ye}),i.d(f,"D",function(){return $i}),i.d(f,"E",function(){return Ar}),i.d(f,"F",function(){return Pr}),i.d(f,"G",function(){return Yu}),i.d(f,"H",function(){return Bi}),i.d(f,"I",function(){return qu}),i.d(f,"J",function(){return _n}),i.d(f,"K",function(){return ne}),i.d(f,"L",function(){return Jt}),i.d(f,"M",function(){return Qi});var v=[];Object.freeze(v);var m={};function w(){return++Ge.mobxGuid}function S(y){throw E(!1,y),"X"}function E(y,b){if(!y)throw new Error("[mobx] "+(b||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(m);function A(y){var b=!1;return function(){if(!b)return b=!0,y.apply(this,arguments)}}var P=function(){};function T(y){return y!==null&&typeof y=="object"}function N(y){if(y===null||typeof y!="object")return!1;var b=Object.getPrototypeOf(y);return b===Object.prototype||b===null}function B(y,b,x){Object.defineProperty(y,b,{enumerable:!1,writable:!0,configurable:!0,value:x})}function L(y,b){var x="isMobX"+y;return b.prototype[x]=!0,function(M){return T(M)&&M[x]===!0}}function H(y){return y instanceof Map}function $(y){return y instanceof Set}function ie(y){var b=new Set;for(var x in y)b.add(x);return Object.getOwnPropertySymbols(y).forEach(function(M){Object.getOwnPropertyDescriptor(y,M).enumerable&&b.add(M)}),Array.from(b)}function K(y){return y&&y.toString?y.toString():new String(y).toString()}function V(y){return y===null?null:typeof y=="object"?""+y:y}var Z=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,z=Symbol("mobx administration"),D=function(){function y(b){b===void 0&&(b="Atom@"+w()),this.name=b,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=He.NOT_TRACKING}return y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},y.prototype.reportObserved=function(){return Li(this)},y.prototype.reportChanged=function(){mn(),function(b){b.lowestObserverState!==He.STALE&&(b.lowestObserverState=He.STALE,b.observers.forEach(function(x){x.dependenciesState===He.UP_TO_DATE&&(x.isTracing!==te.NONE&&Vn(x,b),x.onBecomeStale()),x.dependenciesState=He.STALE}))}(this),On()},y.prototype.toString=function(){return this.name},y}(),C=L("Atom",D);function R(y,b,x){b===void 0&&(b=P),x===void 0&&(x=P);var M,U=new D(y);return b!==P&&Ui("onBecomeObserved",U,b,M),x!==P&&Ar(U,x),U}var F={identity:function(y,b){return y===b},structural:function(y,b){return $o(y,b)},default:function(y,b){return Object.is(y,b)},shallow:function(y,b){return $o(y,b,1)}},Q=function(y,b){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,M){x.__proto__=M}||function(x,M){for(var U in M)M.hasOwnProperty(U)&&(x[U]=M[U])},Q(y,b)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var le=function(){return le=Object.assign||function(y){for(var b,x=1,M=arguments.length;x<M;x++)for(var U in b=arguments[x])Object.prototype.hasOwnProperty.call(b,U)&&(y[U]=b[U]);return y},le.apply(this,arguments)};function ce(y){var b=typeof Symbol=="function"&&y[Symbol.iterator],x=0;return b?b.call(y):{next:function(){return y&&x>=y.length&&(y=void 0),{value:y&&y[x++],done:!y}}}}function ye(y,b){var x=typeof Symbol=="function"&&y[Symbol.iterator];if(!x)return y;var M,U,ee=x.call(y),pe=[];try{for(;(b===void 0||b-- >0)&&!(M=ee.next()).done;)pe.push(M.value)}catch(je){U={error:je}}finally{try{M&&!M.done&&(x=ee.return)&&x.call(ee)}finally{if(U)throw U.error}}return pe}function xe(){for(var y=[],b=0;b<arguments.length;b++)y=y.concat(ye(arguments[b]));return y}var ge=Symbol("mobx did run lazy initializers"),ue=Symbol("mobx pending decorators"),he={},be={};function Se(y,b){var x=b?he:be;return x[y]||(x[y]={configurable:!0,enumerable:b,get:function(){return Ie(this),this[y]},set:function(M){Ie(this),this[y]=M}})}function Ie(y){var b,x;if(y[ge]!==!0){var M=y[ue];if(M){B(y,ge,!0);var U=xe(Object.getOwnPropertySymbols(M),Object.keys(M));try{for(var ee=ce(U),pe=ee.next();!pe.done;pe=ee.next()){var je=M[pe.value];je.propertyCreator(y,je.prop,je.descriptor,je.decoratorTarget,je.decoratorArguments)}}catch(Fe){b={error:Fe}}finally{try{pe&&!pe.done&&(x=ee.return)&&x.call(ee)}finally{if(b)throw b.error}}}}}function Ke(y,b){return function(){var x,M=function(U,ee,pe,je){if(je===!0)return b(U,ee,pe,U,x),null;if(!Object.prototype.hasOwnProperty.call(U,ue)){var Fe=U[ue];B(U,ue,le({},Fe))}return U[ue][ee]={prop:ee,propertyCreator:b,descriptor:pe,decoratorTarget:U,decoratorArguments:x},Se(ee,y)};return Pe(arguments)?(x=v,M.apply(null,arguments)):(x=Array.prototype.slice.call(arguments),M)}}function Pe(y){return(y.length===2||y.length===3)&&(typeof y[1]=="string"||typeof y[1]=="symbol")||y.length===4&&y[3]===!0}function Ce(y,b,x){return qr(y)?y:Array.isArray(y)?Ye.array(y,{name:x}):N(y)?Ye.object(y,void 0,{name:x}):H(y)?Ye.map(y,{name:x}):$(y)?Ye.set(y,{name:x}):y}function Ze(y){return y}function J(y){E(y);var b=Ke(!0,function(M,U,ee,pe,je){var Fe=ee?ee.initializer?ee.initializer.call(M):ee.value:void 0;$r(M).addObservableProp(U,Fe,y)}),x=(l!==void 0&&l.env,b);return x.enhancer=y,x}var q={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ae(y){return y==null?q:typeof y=="string"?{name:y,deep:!0,proxy:!0}:y}Object.freeze(q);var _e=J(Ce),Ae=J(function(y,b,x){return y==null||gn(y)||Nn(y)||It(y)||yn(y)?y:Array.isArray(y)?Ye.array(y,{name:x,deep:!1}):N(y)?Ye.object(y,void 0,{name:x,deep:!1}):H(y)?Ye.map(y,{name:x,deep:!1}):$(y)?Ye.set(y,{name:x,deep:!1}):S(!1)}),we=J(Ze),qe=J(function(y,b,x){return $o(y,b)?b:y});function nt(y){return y.defaultDecorator?y.defaultDecorator.enhancer:y.deep===!1?Ze:Ce}var $e={box:function(y,b){arguments.length>2&&ve("box");var x=ae(b);return new Tt(y,nt(x),x.name,!0,x.equals)},array:function(y,b){arguments.length>2&&ve("array");var x=ae(b);return Zo(y,nt(x),x.name)},map:function(y,b){arguments.length>2&&ve("map");var x=ae(b);return new qo(y,nt(x),x.name)},set:function(y,b){arguments.length>2&&ve("set");var x=ae(b);return new ho(y,nt(x),x.name)},object:function(y,b,x){typeof arguments[1]=="string"&&ve("object");var M=ae(x);if(M.proxy===!1)return Kn({},y,b,M);var U=Gi(M),ee=Kn({},void 0,void 0,M),pe=$u(ee);return Xi(pe,y,b,U),pe},ref:we,shallow:Ae,deep:_e,struct:qe},Ye=function(y,b,x){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return _e.apply(null,arguments);if(qr(y))return y;var M=N(y)?Ye.object(y,b,x):Array.isArray(y)?Ye.array(y,b):H(y)?Ye.map(y,b):$(y)?Ye.set(y,b):y;if(M!==y)return M;S(!1)};function ve(y){S("Expected one or two arguments to observable."+y+". Did you accidentally try to use observable."+y+" as decorator?")}Object.keys($e).forEach(function(y){return Ye[y]=$e[y]});var He,te,Le=Ke(!1,function(y,b,x,M,U){var ee=x.get,pe=x.set,je=U[0]||{};$r(y).addComputedProp(y,b,le({get:ee,set:pe,context:y},je))}),ut=Le({equals:F.structural}),vt=function(y,b,x){if(typeof b=="string"||y!==null&&typeof y=="object"&&arguments.length===1)return Le.apply(null,arguments);var M=typeof b=="object"?b:{};return M.get=y,M.set=typeof b=="function"?b:M.set,M.name=M.name||y.name||"",new Xn(M)};vt.struct=ut,function(y){y[y.NOT_TRACKING=-1]="NOT_TRACKING",y[y.UP_TO_DATE=0]="UP_TO_DATE",y[y.POSSIBLY_STALE=1]="POSSIBLY_STALE",y[y.STALE=2]="STALE"}(He||(He={})),function(y){y[y.NONE=0]="NONE",y[y.LOG=1]="LOG",y[y.BREAK=2]="BREAK"}(te||(te={}));var it=function(y){this.cause=y};function yt(y){return y instanceof it}function St(y){switch(y.dependenciesState){case He.UP_TO_DATE:return!1;case He.NOT_TRACKING:case He.STALE:return!0;case He.POSSIBLY_STALE:for(var b=Te(!0),x=Y(),M=y.observing,U=M.length,ee=0;ee<U;ee++){var pe=M[ee];if(Yn(pe)){if(Ge.disableErrorBoundaries)pe.get();else try{pe.get()}catch(je){return se(x),De(b),!0}if(y.dependenciesState===He.STALE)return se(x),De(b),!0}}return Xe(y),se(x),De(b),!1}}function Pt(){return Ge.trackingDerivation!==null}function at(y){var b=y.observers.size>0;Ge.computationDepth>0&&b&&S(!1),Ge.allowStateChanges||!b&&Ge.enforceActions!=="strict"||S(!1)}function Nt(y,b,x){var M=Te(!0);Xe(y),y.newObserving=new Array(y.observing.length+100),y.unboundDepsCount=0,y.runId=++Ge.runId;var U,ee=Ge.trackingDerivation;if(Ge.trackingDerivation=y,Ge.disableErrorBoundaries===!0)U=b.call(x);else try{U=b.call(x)}catch(pe){U=new it(pe)}return Ge.trackingDerivation=ee,function(pe){for(var je=pe.observing,Fe=pe.observing=pe.newObserving,dt=He.UP_TO_DATE,ot=0,xt=pe.unboundDepsCount,ct=0;ct<xt;ct++)(Ot=Fe[ct]).diffValue===0&&(Ot.diffValue=1,ot!==ct&&(Fe[ot]=Ot),ot++),Ot.dependenciesState>dt&&(dt=Ot.dependenciesState);for(Fe.length=ot,pe.newObserving=null,xt=je.length;xt--;)(Ot=je[xt]).diffValue===0&&Ri(Ot,pe),Ot.diffValue=0;for(;ot--;){var Ot;(Ot=Fe[ot]).diffValue===1&&(Ot.diffValue=0,Hu(Ot,pe))}dt!==He.UP_TO_DATE&&(pe.dependenciesState=dt,pe.onBecomeStale())}(y),De(M),U}function G(y){var b=y.observing;y.observing=[];for(var x=b.length;x--;)Ri(b[x],y);y.dependenciesState=He.NOT_TRACKING}function ne(y){var b=Y();try{return y()}finally{se(b)}}function Y(){var y=Ge.trackingDerivation;return Ge.trackingDerivation=null,y}function se(y){Ge.trackingDerivation=y}function Te(y){var b=Ge.allowStateReads;return Ge.allowStateReads=y,b}function De(y){Ge.allowStateReads=y}function Xe(y){if(y.dependenciesState!==He.UP_TO_DATE){y.dependenciesState=He.UP_TO_DATE;for(var b=y.observing,x=b.length;x--;)b[x].lowestObserverState=He.UP_TO_DATE}}var ft=0,Ht=1,Kt=Object.getOwnPropertyDescriptor(function(){},"name");Kt&&Kt.configurable;function Ct(y,b,x){var M=function(){return Rt(y,b,x||this,arguments)};return M.isMobxAction=!0,M}function Rt(y,b,x,M){var U=ze();try{return b.apply(x,M)}catch(ee){throw U.error=ee,ee}finally{Ve(U)}}function ze(y,b,x){var M=0,U=Y();mn();var ee={prevDerivation:U,prevAllowStateChanges:rt(!0),prevAllowStateReads:Te(!0),notifySpy:!1,startTime:M,actionId:Ht++,parentActionId:ft};return ft=ee.actionId,ee}function Ve(y){ft!==y.actionId&&S("invalid action stack. did you forget to finish an action?"),ft=y.parentActionId,y.error!==void 0&&(Ge.suppressReactionErrors=!0),wt(y.prevAllowStateChanges),De(y.prevAllowStateReads),On(),se(y.prevDerivation),y.notifySpy,Ge.suppressReactionErrors=!1}function et(y,b){var x,M=rt(y);try{x=b()}finally{wt(M)}return x}function rt(y){var b=Ge.allowStateChanges;return Ge.allowStateChanges=y,b}function wt(y){Ge.allowStateChanges=y}var Tt=function(y){function b(x,M,U,ee,pe){U===void 0&&(U="ObservableValue@"+w()),pe===void 0&&(pe=F.default);var je=y.call(this,U)||this;return je.enhancer=M,je.name=U,je.equals=pe,je.hasUnreportedChange=!1,je.value=M(x,void 0,U),je}return function(x,M){function U(){this.constructor=x}Q(x,M),x.prototype=M===null?Object.create(M):(U.prototype=M.prototype,new U)}(b,y),b.prototype.dehanceValue=function(x){return this.dehancer!==void 0?this.dehancer(x):x},b.prototype.set=function(x){this.value,(x=this.prepareNewValue(x))!==Ge.UNCHANGED&&this.setNewValue(x)},b.prototype.prepareNewValue=function(x){if(at(this),on(this)){var M=gt(this,{object:this,type:"update",newValue:x});if(!M)return Ge.UNCHANGED;x=M.newValue}return x=this.enhancer(x,this.value,this.name),this.equals(this.value,x)?Ge.UNCHANGED:x},b.prototype.setNewValue=function(x){var M=this.value;this.value=x,this.reportChanged(),wn(this)&&Zt(this,{type:"update",object:this,newValue:x,oldValue:M})},b.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},b.prototype.intercept=function(x){return pr(this,x)},b.prototype.observe=function(x,M){return M&&x({object:this,type:"update",newValue:this.value,oldValue:void 0}),dr(this,x)},b.prototype.toJSON=function(){return this.get()},b.prototype.toString=function(){return this.name+"["+this.value+"]"},b.prototype.valueOf=function(){return V(this.get())},b.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},b}(D),cr=L("ObservableValue",Tt),Xn=function(){function y(b){this.dependenciesState=He.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=He.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+w(),this.value=new it(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=te.NONE,E(b.get,"missing option for computed: get"),this.derivation=b.get,this.name=b.name||"ComputedValue@"+w(),b.set&&(this.setter=Ct(this.name+"-setter",b.set)),this.equals=b.equals||(b.compareStructural||b.struct?F.structural:F.default),this.scope=b.context,this.requiresReaction=!!b.requiresReaction,this.keepAlive=!!b.keepAlive}return y.prototype.onBecomeStale=function(){(function(b){b.lowestObserverState===He.UP_TO_DATE&&(b.lowestObserverState=He.POSSIBLY_STALE,b.observers.forEach(function(x){x.dependenciesState===He.UP_TO_DATE&&(x.dependenciesState=He.POSSIBLY_STALE,x.isTracing!==te.NONE&&Vn(x,b),x.onBecomeStale())}))})(this)},y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},y.prototype.get=function(){this.isComputing&&S("Cycle detected in computation "+this.name+": "+this.derivation),Ge.inBatch!==0||this.observers.size!==0||this.keepAlive?(Li(this),St(this)&&this.trackAndCompute()&&function(x){x.lowestObserverState!==He.STALE&&(x.lowestObserverState=He.STALE,x.observers.forEach(function(M){M.dependenciesState===He.POSSIBLY_STALE?M.dependenciesState=He.STALE:M.dependenciesState===He.UP_TO_DATE&&(x.lowestObserverState=He.UP_TO_DATE)}))}(this)):St(this)&&(this.warnAboutUntrackedRead(),mn(),this.value=this.computeValue(!1),On());var b=this.value;if(yt(b))throw b.cause;return b},y.prototype.peek=function(){var b=this.computeValue(!1);if(yt(b))throw b.cause;return b},y.prototype.set=function(b){if(this.setter){E(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,b)}finally{this.isRunningSetter=!1}}else E(!1,!1)},y.prototype.trackAndCompute=function(){var b=this.value,x=this.dependenciesState===He.NOT_TRACKING,M=this.computeValue(!0),U=x||yt(b)||yt(M)||!this.equals(b,M);return U&&(this.value=M),U},y.prototype.computeValue=function(b){var x;if(this.isComputing=!0,Ge.computationDepth++,b)x=Nt(this,this.derivation,this.scope);else if(Ge.disableErrorBoundaries===!0)x=this.derivation.call(this.scope);else try{x=this.derivation.call(this.scope)}catch(M){x=new it(M)}return Ge.computationDepth--,this.isComputing=!1,x},y.prototype.suspend=function(){this.keepAlive||(G(this),this.value=void 0)},y.prototype.observe=function(b,x){var M=this,U=!0,ee=void 0;return Wo(function(){var pe=M.get();if(!U||x){var je=Y();b({type:"update",object:M,newValue:pe,oldValue:ee}),se(je)}U=!1,ee=pe})},y.prototype.warnAboutUntrackedRead=function(){},y.prototype.toJSON=function(){return this.get()},y.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},y.prototype.valueOf=function(){return V(this.get())},y.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},y}(),Yn=L("ComputedValue",Xn),Wr=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Fu={};function Xo(){return typeof window!="undefined"?window:c!==void 0?c:typeof self!="undefined"?self:Fu}var kn=!0,Ci=!1,Ge=function(){var y=Xo();return y.__mobxInstanceCount>0&&!y.__mobxGlobals&&(kn=!1),y.__mobxGlobals&&y.__mobxGlobals.version!==new Wr().version&&(kn=!1),kn?y.__mobxGlobals?(y.__mobxInstanceCount+=1,y.__mobxGlobals.UNCHANGED||(y.__mobxGlobals.UNCHANGED={}),y.__mobxGlobals):(y.__mobxInstanceCount=1,y.__mobxGlobals=new Wr):(setTimeout(function(){Ci||S("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Wr)}();function Hu(y,b){y.observers.add(b),y.lowestObserverState>b.dependenciesState&&(y.lowestObserverState=b.dependenciesState)}function Ri(y,b){y.observers.delete(b),y.observers.size===0&&Ii(y)}function Ii(y){y.isPendingUnobservation===!1&&(y.isPendingUnobservation=!0,Ge.pendingUnobservations.push(y))}function mn(){Ge.inBatch++}function On(){if(--Ge.inBatch==0){zi();for(var y=Ge.pendingUnobservations,b=0;b<y.length;b++){var x=y[b];x.isPendingUnobservation=!1,x.observers.size===0&&(x.isBeingObserved&&(x.isBeingObserved=!1,x.onBecomeUnobserved()),x instanceof Xn&&x.suspend())}Ge.pendingUnobservations=[]}}function Li(y){var b=Ge.trackingDerivation;return b!==null?(b.runId!==y.lastAccessedBy&&(y.lastAccessedBy=b.runId,b.newObserving[b.unboundDepsCount++]=y,y.isBeingObserved||(y.isBeingObserved=!0,y.onBecomeObserved())),!0):(y.observers.size===0&&Ge.inBatch>0&&Ii(y),!1)}function Vn(y,b){if(y.isTracing===te.BREAK){var x=[];jr(Kr(y),x,1),new Function(`debugger;
/*
Tracing '`+y.name+`'

You are entering this break point because derivation '`+y.name+"' is being traced and '"+b.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(y instanceof Xn?y.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+x.join(`
`)+`
*/
    `)()}}function jr(y,b,x){b.length>=1e3?b.push("(and many more)"):(b.push(""+new Array(x).join("	")+y.name),y.dependencies&&y.dependencies.forEach(function(M){return jr(M,b,x+1)}))}var zn=function(){function y(b,x,M,U){b===void 0&&(b="Reaction@"+w()),U===void 0&&(U=!1),this.name=b,this.onInvalidate=x,this.errorHandler=M,this.requiresObservable=U,this.observing=[],this.newObserving=[],this.dependenciesState=He.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+w(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=te.NONE}return y.prototype.onBecomeStale=function(){this.schedule()},y.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ge.pendingReactions.push(this),zi())},y.prototype.isScheduled=function(){return this._isScheduled},y.prototype.runReaction=function(){if(!this.isDisposed){if(mn(),this._isScheduled=!1,St(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(b){this.reportExceptionInDerivation(b)}}On()}},y.prototype.track=function(b){if(!this.isDisposed){mn(),this._isRunning=!0;var x=Nt(this,b,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&G(this),yt(x)&&this.reportExceptionInDerivation(x.cause),On()}},y.prototype.reportExceptionInDerivation=function(b){var x=this;if(this.errorHandler)this.errorHandler(b,this);else{if(Ge.disableErrorBoundaries)throw b;Ge.suppressReactionErrors,Ge.globalReactionErrorHandlers.forEach(function(M){return M(b,x)})}},y.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(mn(),G(this),On()))},y.prototype.getDisposer=function(){var b=this.dispose.bind(this);return b[z]=this,b},y.prototype.toString=function(){return"Reaction["+this.name+"]"},y.prototype.trace=function(b){b===void 0&&(b=!1),function(){for(var x=[],M=0;M<arguments.length;M++)x[M]=arguments[M];var U=!1;typeof x[x.length-1]=="boolean"&&(U=x.pop());var ee=Tn(x);if(!ee)return S(!1);ee.isTracing,te.NONE,ee.isTracing=U?te.BREAK:te.LOG}(this,b)},y}(),Yo=function(y){return y()};function zi(){Ge.inBatch>0||Ge.isRunningReactions||Yo(Uu)}function Uu(){Ge.isRunningReactions=!0;for(var y=Ge.pendingReactions,b=0;y.length>0;){++b==100&&y.splice(0);for(var x=y.splice(0),M=0,U=x.length;M<U;M++)x[M].runReaction()}Ge.isRunningReactions=!1}var co=L("Reaction",zn);function Gu(y){var b=Yo;Yo=function(x){return y(function(){return b(x)})}}function Bi(y){return function(){}}function Xu(){S(!1)}function lr(y){return function(b,x,M){if(M){if(M.value)return{value:Ct(y,M.value),enumerable:!1,configurable:!0,writable:!0};var U=M.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ct(y,U.call(this))}}}return Fi(y).apply(this,arguments)}}function Fi(y){return function(b,x,M){Object.defineProperty(b,x,{configurable:!0,enumerable:!1,get:function(){},set:function(U){B(this,x,Wn(y,U))}})}}var Wn=function(y,b,x,M){return arguments.length===1&&typeof y=="function"?Ct(y.name||"<unnamed action>",y):arguments.length===2&&typeof b=="function"?Ct(y,b):arguments.length===1&&typeof y=="string"?lr(y):M!==!0?lr(b).apply(null,arguments):void B(y,b,Ct(y.name||b,x.value,this))};function Yu(y,b){return Rt(typeof y=="string"?y:y.name||"<unnamed action>",typeof y=="function"?y:b,this,void 0)}function lo(y){return typeof y=="function"&&y.isMobxAction===!0}function Vo(y,b,x){B(y,b,Ct(b,x.bind(y)))}function Wo(y,b){b===void 0&&(b=m);var x,M=b&&b.name||y.name||"Autorun@"+w();if(!b.scheduler&&!b.delay)x=new zn(M,function(){this.track(pe)},b.onError,b.requiresObservable);else{var U=Hi(b),ee=!1;x=new zn(M,function(){ee||(ee=!0,U(function(){ee=!1,x.isDisposed||x.track(pe)}))},b.onError,b.requiresObservable)}function pe(){y(x)}return x.schedule(),x.getDisposer()}Wn.bound=function(y,b,x,M){return M===!0?(Vo(y,b,x.value),null):x?{configurable:!0,enumerable:!1,get:function(){return Vo(this,b,x.value||x.initializer.call(this)),this[b]},set:Xu}:{enumerable:!1,configurable:!0,set:function(U){Vo(this,b,U)},get:function(){}}};var Vu=function(y){return y()};function Hi(y){return y.scheduler?y.scheduler:y.delay?function(b){return setTimeout(b,y.delay)}:Vu}function Pr(y,b,x){x===void 0&&(x=m);var M,U,ee,pe=x.name||"Reaction@"+w(),je=Wn(pe,x.onError?(M=x.onError,U=b,function(){try{return U.apply(this,arguments)}catch(kt){M.call(this,kt)}}):b),Fe=!x.scheduler&&!x.delay,dt=Hi(x),ot=!0,xt=!1,ct=x.compareStructural?F.structural:x.equals||F.default,Ot=new zn(pe,function(){ot||Fe?En():xt||(xt=!0,dt(En))},x.onError,x.requiresObservable);function En(){if(xt=!1,!Ot.isDisposed){var kt=!1;Ot.track(function(){var an=y(Ot);kt=ot||!ct(ee,an),ee=an}),ot&&x.fireImmediately&&je(ee,Ot),ot||kt!==!0||je(ee,Ot),ot&&(ot=!1)}}return Ot.schedule(),Ot.getDisposer()}function Ar(y,b,x){return Ui("onBecomeUnobserved",y,b,x)}function Ui(y,b,x,M){var U=typeof M=="function"?xn(b,x):xn(b),ee=typeof M=="function"?M:x,pe=y+"Listeners";return U[pe]?U[pe].add(ee):U[pe]=new Set([ee]),typeof U[y]!="function"?S(!1):function(){var je=U[pe];je&&(je.delete(ee),je.size===0&&delete U[pe])}}function kr(y){var b=y.enforceActions,x=y.computedRequiresReaction,M=y.computedConfigurable,U=y.disableErrorBoundaries,ee=y.reactionScheduler,pe=y.reactionRequiresObservable,je=y.observableRequiresReaction;if(y.isolateGlobalState===!0&&((Ge.pendingReactions.length||Ge.inBatch||Ge.isRunningReactions)&&S("isolateGlobalState should be called before MobX is running any reactions"),Ci=!0,kn&&(--Xo().__mobxInstanceCount==0&&(Xo().__mobxGlobals=void 0),Ge=new Wr)),b!==void 0){var Fe=void 0;switch(b){case!0:case"observed":Fe=!0;break;case!1:case"never":Fe=!1;break;case"strict":case"always":Fe="strict";break;default:S("Invalid value for 'enforceActions': '"+b+"', expected 'never', 'always' or 'observed'")}Ge.enforceActions=Fe,Ge.allowStateChanges=Fe!==!0&&Fe!=="strict"}x!==void 0&&(Ge.computedRequiresReaction=!!x),pe!==void 0&&(Ge.reactionRequiresObservable=!!pe),je!==void 0&&(Ge.observableRequiresReaction=!!je,Ge.allowStateReads=!Ge.observableRequiresReaction),M!==void 0&&(Ge.computedConfigurable=!!M),U!==void 0&&(Ge.disableErrorBoundaries=!!U),ee&&Gu(ee)}function Kn(y,b,x,M){var U=Gi(M=ae(M));return Ie(y),$r(y,M.name,U.enhancer),b&&Xi(y,b,x,U),y}function Gi(y){return y.defaultDecorator||(y.deep===!1?we:_e)}function Xi(y,b,x,M){var U,ee;mn();try{var pe=Z(b);try{for(var je=ce(pe),Fe=je.next();!Fe.done;Fe=je.next()){var dt=Fe.value,ot=Object.getOwnPropertyDescriptor(b,dt),xt=(x&&dt in x?x[dt]:ot.get?Le:M)(y,dt,ot,!0);xt&&Object.defineProperty(y,dt,xt)}}catch(ct){U={error:ct}}finally{try{Fe&&!Fe.done&&(ee=je.return)&&ee.call(je)}finally{if(U)throw U.error}}}finally{On()}}function Kr(y,b){return Yi(xn(y,b))}function Yi(y){var b,x,M={name:y.name};return y.observing&&y.observing.length>0&&(M.dependencies=(b=y.observing,x=[],b.forEach(function(U){x.indexOf(U)===-1&&x.push(U)}),x).map(Yi)),M}var Wu=0;function Vi(){this.message="FLOW_CANCELLED"}function Wi(y){arguments.length!==1&&S("Flow expects 1 argument and cannot be used as decorator");var b=y.name||"<unnamed flow>";return function(){var x,M=this,U=arguments,ee=++Wu,pe=Wn(b+" - runid: "+ee+" - init",y).apply(M,U),je=void 0,Fe=new Promise(function(dt,ot){var xt=0;function ct(kt){var an;je=void 0;try{an=Wn(b+" - runid: "+ee+" - yield "+xt++,pe.next).call(pe,kt)}catch(Qr){return ot(Qr)}En(an)}function Ot(kt){var an;je=void 0;try{an=Wn(b+" - runid: "+ee+" - yield "+xt++,pe.throw).call(pe,kt)}catch(Qr){return ot(Qr)}En(an)}function En(kt){if(!kt||typeof kt.then!="function")return kt.done?dt(kt.value):(je=Promise.resolve(kt.value)).then(ct,Ot);kt.then(En,ot)}x=ot,ct(void 0)});return Fe.cancel=Wn(b+" - runid: "+ee+" - cancel",function(){try{je&&Zr(je);var dt=pe.return(void 0),ot=Promise.resolve(dt.value);ot.then(P,P),Zr(ot),x(new Vi)}catch(xt){x(xt)}}),Fe}}function Zr(y){typeof y.cancel=="function"&&y.cancel()}function Ki(y,b){if(y==null)return!1;if(b!==void 0){if(gn(y)===!1||!y[z].values.has(b))return!1;var x=xn(y,b);return Yn(x)}return Yn(y)}function Ku(y){return arguments.length>1?S(!1):Ki(y)}function Zi(y,b){return typeof b!="string"?S(!1):Ki(y,b)}function Ko(y,b){return y!=null&&(b!==void 0?!!gn(y)&&y[z].values.has(b):gn(y)||!!y[z]||C(y)||co(y)||Yn(y))}function qr(y){return arguments.length!==1&&S(!1),Ko(y)}function Zn(y){return gn(y)?y[z].getKeys():It(y)||yn(y)?Array.from(y.keys()):Nn(y)?y.map(function(b,x){return x}):S(!1)}function Jt(y){return gn(y)?Zn(y).map(function(b){return y[b]}):It(y)?Zn(y).map(function(b){return y.get(b)}):yn(y)?Array.from(y.values()):Nn(y)?y.slice():S(!1)}function qi(y){return gn(y)?Zn(y).map(function(b){return[b,y[b]]}):It(y)?Zn(y).map(function(b){return[b,y.get(b)]}):yn(y)?Array.from(y.entries()):Nn(y)?y.map(function(b,x){return[x,b]}):S(!1)}function Ji(y,b,x){if(arguments.length!==2||yn(y))if(gn(y)){var M=y[z],U=M.values.get(b);U?M.write(b,x):M.addObservableProp(b,x,M.defaultEnhancer)}else if(It(y))y.set(b,x);else if(yn(y))y.add(b);else{if(!Nn(y))return S(!1);typeof b!="number"&&(b=parseInt(b,10)),E(b>=0,"Not a valid index: '"+b+"'"),mn(),b>=y.length&&(y.length=b+1),y[b]=x,On()}else{mn();var ee=b;try{for(var pe in ee)Ji(y,pe,ee[pe])}finally{On()}}}function $i(y,b,x,M){return typeof x=="function"?function(U,ee,pe,je){return Tr(U,ee).observe(pe,je)}(y,b,x,M):function(U,ee,pe){return Tr(U).observe(ee,pe)}(y,b,x)}Vi.prototype=Object.create(Error.prototype);var Zu={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function fr(y,b,x,M){return M.detectCycles&&y.set(b,x),x}function Mn(y,b,x){if(!b.recurseEverything&&!qr(y)||typeof y!="object")return y;if(y===null)return null;if(y instanceof Date)return y;if(cr(y))return Mn(y.get(),b,x);if(qr(y)&&Zn(y),b.detectCycles===!0&&y!==null&&x.has(y))return x.get(y);if(Nn(y)||Array.isArray(y)){var M=fr(x,y,[],b),U=y.map(function(ct){return Mn(ct,b,x)});M.length=U.length;for(var ee=0,pe=U.length;ee<pe;ee++)M[ee]=U[ee];return M}if(yn(y)||Object.getPrototypeOf(y)===Set.prototype){if(b.exportMapsAsObjects===!1){var je=fr(x,y,new Set,b);return y.forEach(function(ct){je.add(Mn(ct,b,x))}),je}var Fe=fr(x,y,[],b);return y.forEach(function(ct){Fe.push(Mn(ct,b,x))}),Fe}if(It(y)||Object.getPrototypeOf(y)===Map.prototype){if(b.exportMapsAsObjects===!1){var dt=fr(x,y,new Map,b);return y.forEach(function(ct,Ot){dt.set(Ot,Mn(ct,b,x))}),dt}var ot=fr(x,y,{},b);return y.forEach(function(ct,Ot){ot[Ot]=Mn(ct,b,x)}),ot}var xt=fr(x,y,{},b);return ie(y).forEach(function(ct){xt[ct]=Mn(y[ct],b,x)}),xt}function qu(y,b){var x;return typeof b=="boolean"&&(b={detectCycles:b}),b||(b=Zu),b.detectCycles=b.detectCycles===void 0?b.recurseEverything===!0:b.detectCycles===!0,b.detectCycles&&(x=new Map),Mn(y,b,x)}function Tn(y){switch(y.length){case 0:return Ge.trackingDerivation;case 1:return xn(y[0]);case 2:return xn(y[0],y[1])}}function _n(y,b){b===void 0&&(b=void 0),mn();try{return y.apply(b)}finally{On()}}function Qi(y,b,x){return arguments.length===1||b&&typeof b=="object"?Ju(y,b):ea(y,b,x||{})}function ea(y,b,x){var M;typeof x.timeout=="number"&&(M=setTimeout(function(){if(!ee[z].isDisposed){ee();var pe=new Error("WHEN_TIMEOUT");if(!x.onError)throw pe;x.onError(pe)}},x.timeout)),x.name=x.name||"When@"+w();var U=Ct(x.name+"-effect",b),ee=Wo(function(pe){y()&&(pe.dispose(),M&&clearTimeout(M),U())},x);return ee}function Ju(y,b){var x,M=new Promise(function(U,ee){var pe=ea(y,U,le(le({},b),{onError:ee}));x=function(){pe(),ee("WHEN_CANCELLED")}});return M.cancel=x,M}function fo(y){return y[z]}function qn(y){return typeof y=="string"||typeof y=="number"||typeof y=="symbol"}var Jr={has:function(y,b){if(b===z||b==="constructor"||b===ge)return!0;var x=fo(y);return qn(b)?x.has(b):b in y},get:function(y,b){if(b===z||b==="constructor"||b===ge)return y[b];var x=fo(y),M=x.values.get(b);if(M instanceof D){var U=M.get();return U===void 0&&x.has(b),U}return qn(b)&&x.has(b),y[b]},set:function(y,b,x){return!!qn(b)&&(Ji(y,b,x),!0)},deleteProperty:function(y,b){return!!qn(b)&&(fo(y).remove(b),!0)},ownKeys:function(y){return fo(y).keysAtom.reportObserved(),Reflect.ownKeys(y)},preventExtensions:function(y){return S("Dynamic observable objects cannot be frozen"),!1}};function $u(y){var b=new Proxy(y,Jr);return y[z].proxy=b,b}function on(y){return y.interceptors!==void 0&&y.interceptors.length>0}function pr(y,b){var x=y.interceptors||(y.interceptors=[]);return x.push(b),A(function(){var M=x.indexOf(b);M!==-1&&x.splice(M,1)})}function gt(y,b){var x=Y();try{for(var M=xe(y.interceptors||[]),U=0,ee=M.length;U<ee&&(E(!(b=M[U](b))||b.type,"Intercept handlers should return nothing or a change object"),b);U++);return b}finally{se(x)}}function wn(y){return y.changeListeners!==void 0&&y.changeListeners.length>0}function dr(y,b){var x=y.changeListeners||(y.changeListeners=[]);return x.push(b),A(function(){var M=x.indexOf(b);M!==-1&&x.splice(M,1)})}function Zt(y,b){var x=Y(),M=y.changeListeners;if(M){for(var U=0,ee=(M=M.slice()).length;U<ee;U++)M[U](b);se(x)}}var ta={get:function(y,b){return b===z?y[z]:b==="length"?y[z].getArrayLength():typeof b=="number"?Dn.get.call(y,b):typeof b!="string"||isNaN(b)?Dn.hasOwnProperty(b)?Dn[b]:y[b]:Dn.get.call(y,parseInt(b))},set:function(y,b,x){return b==="length"&&y[z].setArrayLength(x),typeof b=="number"&&Dn.set.call(y,b,x),typeof b=="symbol"||isNaN(b)?y[b]=x:Dn.set.call(y,parseInt(b),x),!0},preventExtensions:function(y){return S("Observable arrays cannot be frozen"),!1}};function Zo(y,b,x,M){x===void 0&&(x="ObservableArray@"+w()),M===void 0&&(M=!1);var U,ee,pe,je=new na(x,b,M);U=je.values,ee=z,pe=je,Object.defineProperty(U,ee,{enumerable:!1,writable:!1,configurable:!0,value:pe});var Fe=new Proxy(je.values,ta);if(je.proxy=Fe,y&&y.length){var dt=rt(!0);je.spliceWithArray(0,0,y),wt(dt)}return Fe}var na=function(){function y(b,x,M){this.owned=M,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new D(b||"ObservableArray@"+w()),this.enhancer=function(U,ee){return x(U,ee,b+"[..]")}}return y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.dehanceValues=function(b){return this.dehancer!==void 0&&b.length>0?b.map(this.dehancer):b},y.prototype.intercept=function(b){return pr(this,b)},y.prototype.observe=function(b,x){return x===void 0&&(x=!1),x&&b({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),dr(this,b)},y.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},y.prototype.setArrayLength=function(b){if(typeof b!="number"||b<0)throw new Error("[mobx.array] Out of range: "+b);var x=this.values.length;if(b!==x)if(b>x){for(var M=new Array(b-x),U=0;U<b-x;U++)M[U]=void 0;this.spliceWithArray(x,0,M)}else this.spliceWithArray(b,x-b)},y.prototype.updateArrayLength=function(b,x){if(b!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=x},y.prototype.spliceWithArray=function(b,x,M){var U=this;at(this.atom);var ee=this.values.length;if(b===void 0?b=0:b>ee?b=ee:b<0&&(b=Math.max(0,ee+b)),x=arguments.length===1?ee-b:x==null?0:Math.max(0,Math.min(x,ee-b)),M===void 0&&(M=v),on(this)){var pe=gt(this,{object:this.proxy,type:"splice",index:b,removedCount:x,added:M});if(!pe)return v;x=pe.removedCount,M=pe.added}M=M.length===0?M:M.map(function(Fe){return U.enhancer(Fe,void 0)});var je=this.spliceItemsIntoValues(b,x,M);return x===0&&M.length===0||this.notifyArraySplice(b,M,je),this.dehanceValues(je)},y.prototype.spliceItemsIntoValues=function(b,x,M){var U;if(M.length<1e4)return(U=this.values).splice.apply(U,xe([b,x],M));var ee=this.values.slice(b,b+x);return this.values=this.values.slice(0,b).concat(M,this.values.slice(b+x)),ee},y.prototype.notifyArrayChildUpdate=function(b,x,M){var U=!this.owned&&!1,ee=wn(this),pe=ee||U?{object:this.proxy,type:"update",index:b,newValue:x,oldValue:M}:null;this.atom.reportChanged(),ee&&Zt(this,pe)},y.prototype.notifyArraySplice=function(b,x,M){var U=!this.owned&&!1,ee=wn(this),pe=ee||U?{object:this.proxy,type:"splice",index:b,removed:M,added:x,removedCount:M.length,addedCount:x.length}:null;this.atom.reportChanged(),ee&&Zt(this,pe)},y}(),Dn={intercept:function(y){return this[z].intercept(y)},observe:function(y,b){return b===void 0&&(b=!1),this[z].observe(y,b)},clear:function(){return this.splice(0)},replace:function(y){var b=this[z];return b.spliceWithArray(0,b.values.length,y)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(y,b){for(var x=[],M=2;M<arguments.length;M++)x[M-2]=arguments[M];var U=this[z];switch(arguments.length){case 0:return[];case 1:return U.spliceWithArray(y);case 2:return U.spliceWithArray(y,b)}return U.spliceWithArray(y,b,x)},spliceWithArray:function(y,b,x){return this[z].spliceWithArray(y,b,x)},push:function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var x=this[z];return x.spliceWithArray(x.values.length,0,y),x.values.length},pop:function(){return this.splice(Math.max(this[z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var x=this[z];return x.spliceWithArray(0,0,y),x.values.length},reverse:function(){var y=this.slice();return y.reverse.apply(y,arguments)},sort:function(y){var b=this.slice();return b.sort.apply(b,arguments)},remove:function(y){var b=this[z],x=b.dehanceValues(b.values).indexOf(y);return x>-1&&(this.splice(x,1),!0)},get:function(y){var b=this[z];if(b&&y<b.values.length)return b.atom.reportObserved(),b.dehanceValue(b.values[y])},set:function(y,b){var x=this[z],M=x.values;if(y<M.length){at(x.atom);var U=M[y];if(on(x)){var ee=gt(x,{type:"update",object:x.proxy,index:y,newValue:b});if(!ee)return;b=ee.newValue}(b=x.enhancer(b,U))!==U&&(M[y]=b,x.notifyArrayChildUpdate(y,b,U))}else{if(y!==M.length)throw new Error("[mobx.array] Index out of bounds, "+y+" is larger than "+M.length);x.spliceWithArray(y,0,[b])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(y){typeof Array.prototype[y]=="function"&&(Dn[y]=function(){var b=this[z];b.atom.reportObserved();var x=b.dehanceValues(b.values);return x[y].apply(x,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(y){typeof Array.prototype[y]=="function"&&(Dn[y]=function(b,x){var M=this,U=this[z];return U.atom.reportObserved(),U.dehanceValues(U.values)[y](function(ee,pe){return b.call(x,ee,pe,M)},x)})}),["reduce","reduceRight"].forEach(function(y){Dn[y]=function(){var b=this,x=this[z];x.atom.reportObserved();var M=arguments[0];return arguments[0]=function(U,ee,pe){return ee=x.dehanceValue(ee),M(U,ee,pe,b)},x.values[y].apply(x.values,arguments)}});var ra,po=L("ObservableArrayAdministration",na);function Nn(y){return T(y)&&po(y[z])}var oa,Qu={},qo=function(){function y(b,x,M){if(x===void 0&&(x=Ce),M===void 0&&(M="ObservableMap@"+w()),this.enhancer=x,this.name=M,this[ra]=Qu,this._keysAtom=R(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(b)}return y.prototype._has=function(b){return this._data.has(b)},y.prototype.has=function(b){var x=this;if(!Ge.trackingDerivation)return this._has(b);var M=this._hasMap.get(b);if(!M){var U=M=new Tt(this._has(b),Ze,this.name+"."+K(b)+"?",!1);this._hasMap.set(b,U),Ar(U,function(){return x._hasMap.delete(b)})}return M.get()},y.prototype.set=function(b,x){var M=this._has(b);if(on(this)){var U=gt(this,{type:M?"update":"add",object:this,newValue:x,name:b});if(!U)return this;x=U.newValue}return M?this._updateValue(b,x):this._addValue(b,x),this},y.prototype.delete=function(b){var x=this;if(at(this._keysAtom),on(this)&&!(U=gt(this,{type:"delete",object:this,name:b})))return!1;if(this._has(b)){var M=wn(this),U=M?{type:"delete",object:this,oldValue:this._data.get(b).value,name:b}:null;return _n(function(){x._keysAtom.reportChanged(),x._updateHasMapEntry(b,!1),x._data.get(b).setNewValue(void 0),x._data.delete(b)}),M&&Zt(this,U),!0}return!1},y.prototype._updateHasMapEntry=function(b,x){var M=this._hasMap.get(b);M&&M.setNewValue(x)},y.prototype._updateValue=function(b,x){var M=this._data.get(b);if((x=M.prepareNewValue(x))!==Ge.UNCHANGED){var U=wn(this),ee=U?{type:"update",object:this,oldValue:M.value,name:b,newValue:x}:null;M.setNewValue(x),U&&Zt(this,ee)}},y.prototype._addValue=function(b,x){var M=this;at(this._keysAtom),_n(function(){var pe=new Tt(x,M.enhancer,M.name+"."+K(b),!1);M._data.set(b,pe),x=pe.value,M._updateHasMapEntry(b,!0),M._keysAtom.reportChanged()});var U=wn(this),ee=U?{type:"add",object:this,name:b,newValue:x}:null;U&&Zt(this,ee)},y.prototype.get=function(b){return this.has(b)?this.dehanceValue(this._data.get(b).get()):this.dehanceValue(void 0)},y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},y.prototype.values=function(){var b=this,x=this.keys();return bo({next:function(){var M=x.next(),U=M.done,ee=M.value;return{done:U,value:U?void 0:b.get(ee)}}})},y.prototype.entries=function(){var b=this,x=this.keys();return bo({next:function(){var M=x.next(),U=M.done,ee=M.value;return{done:U,value:U?void 0:[ee,b.get(ee)]}}})},y.prototype[ra=z,Symbol.iterator]=function(){return this.entries()},y.prototype.forEach=function(b,x){var M,U;try{for(var ee=ce(this),pe=ee.next();!pe.done;pe=ee.next()){var je=ye(pe.value,2),Fe=je[0],dt=je[1];b.call(x,dt,Fe,this)}}catch(ot){M={error:ot}}finally{try{pe&&!pe.done&&(U=ee.return)&&U.call(ee)}finally{if(M)throw M.error}}},y.prototype.merge=function(b){var x=this;return It(b)&&(b=b.toJS()),_n(function(){var M=rt(!0);try{N(b)?ie(b).forEach(function(U){return x.set(U,b[U])}):Array.isArray(b)?b.forEach(function(U){var ee=ye(U,2),pe=ee[0],je=ee[1];return x.set(pe,je)}):H(b)?(b.constructor!==Map&&S("Cannot initialize from classes that inherit from Map: "+b.constructor.name),b.forEach(function(U,ee){return x.set(ee,U)})):b!=null&&S("Cannot initialize map from "+b)}finally{wt(M)}}),this},y.prototype.clear=function(){var b=this;_n(function(){ne(function(){var x,M;try{for(var U=ce(b.keys()),ee=U.next();!ee.done;ee=U.next()){var pe=ee.value;b.delete(pe)}}catch(je){x={error:je}}finally{try{ee&&!ee.done&&(M=U.return)&&M.call(U)}finally{if(x)throw x.error}}})})},y.prototype.replace=function(b){var x=this;return _n(function(){var M,U,ee,pe,je=function(un){if(H(un)||It(un))return un;if(Array.isArray(un))return new Map(un);if(N(un)){var la=new Map;for(var eo in un)la.set(eo,un[eo]);return la}return S("Cannot convert to map from '"+un+"'")}(b),Fe=new Map,dt=!1;try{for(var ot=ce(x._data.keys()),xt=ot.next();!xt.done;xt=ot.next()){var ct=xt.value;if(!je.has(ct))if(x.delete(ct))dt=!0;else{var Ot=x._data.get(ct);Fe.set(ct,Ot)}}}catch(un){M={error:un}}finally{try{xt&&!xt.done&&(U=ot.return)&&U.call(ot)}finally{if(M)throw M.error}}try{for(var En=ce(je.entries()),kt=En.next();!kt.done;kt=En.next()){var an=ye(kt.value,2),Qr=(ct=an[0],Ot=an[1],x._data.has(ct));if(x.set(ct,Ot),x._data.has(ct)){var ts=x._data.get(ct);Fe.set(ct,ts),Qr||(dt=!0)}}}catch(un){ee={error:un}}finally{try{kt&&!kt.done&&(pe=En.return)&&pe.call(En)}finally{if(ee)throw ee.error}}if(!dt)if(x._data.size!==Fe.size)x._keysAtom.reportChanged();else for(var sa=x._data.keys(),ca=Fe.keys(),mo=sa.next(),ei=ca.next();!mo.done;){if(mo.value!==ei.value){x._keysAtom.reportChanged();break}mo=sa.next(),ei=ca.next()}x._data=Fe}),this},Object.defineProperty(y.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.toPOJO=function(){var b,x,M={};try{for(var U=ce(this),ee=U.next();!ee.done;ee=U.next()){var pe=ye(ee.value,2),je=pe[0],Fe=pe[1];M[typeof je=="symbol"?je:K(je)]=Fe}}catch(dt){b={error:dt}}finally{try{ee&&!ee.done&&(x=U.return)&&x.call(U)}finally{if(b)throw b.error}}return M},y.prototype.toJS=function(){return new Map(this)},y.prototype.toJSON=function(){return this.toPOJO()},y.prototype.toString=function(){var b=this;return this.name+"[{ "+Array.from(this.keys()).map(function(x){return K(x)+": "+b.get(x)}).join(", ")+" }]"},y.prototype.observe=function(b,x){return dr(this,b)},y.prototype.intercept=function(b){return pr(this,b)},y}(),It=L("ObservableMap",qo),Mr={},ho=function(){function y(b,x,M){if(x===void 0&&(x=Ce),M===void 0&&(M="ObservableSet@"+w()),this.name=M,this[oa]=Mr,this._data=new Set,this._atom=R(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(U,ee){return x(U,ee,M)},b&&this.replace(b)}return y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.clear=function(){var b=this;_n(function(){ne(function(){var x,M;try{for(var U=ce(b._data.values()),ee=U.next();!ee.done;ee=U.next()){var pe=ee.value;b.delete(pe)}}catch(je){x={error:je}}finally{try{ee&&!ee.done&&(M=U.return)&&M.call(U)}finally{if(x)throw x.error}}})})},y.prototype.forEach=function(b,x){var M,U;try{for(var ee=ce(this),pe=ee.next();!pe.done;pe=ee.next()){var je=pe.value;b.call(x,je,je,this)}}catch(Fe){M={error:Fe}}finally{try{pe&&!pe.done&&(U=ee.return)&&U.call(ee)}finally{if(M)throw M.error}}},Object.defineProperty(y.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.add=function(b){var x=this;if(at(this._atom),on(this)&&!(U=gt(this,{type:"add",object:this,newValue:b})))return this;if(!this.has(b)){_n(function(){x._data.add(x.enhancer(b,void 0)),x._atom.reportChanged()});var M=wn(this),U=M?{type:"add",object:this,newValue:b}:null;M&&Zt(this,U)}return this},y.prototype.delete=function(b){var x=this;if(on(this)&&!(U=gt(this,{type:"delete",object:this,oldValue:b})))return!1;if(this.has(b)){var M=wn(this),U=M?{type:"delete",object:this,oldValue:b}:null;return _n(function(){x._atom.reportChanged(),x._data.delete(b)}),M&&Zt(this,U),!0}return!1},y.prototype.has=function(b){return this._atom.reportObserved(),this._data.has(this.dehanceValue(b))},y.prototype.entries=function(){var b=0,x=Array.from(this.keys()),M=Array.from(this.values());return bo({next:function(){var U=b;return b+=1,U<M.length?{value:[x[U],M[U]],done:!1}:{done:!0}}})},y.prototype.keys=function(){return this.values()},y.prototype.values=function(){this._atom.reportObserved();var b=this,x=0,M=Array.from(this._data.values());return bo({next:function(){return x<M.length?{value:b.dehanceValue(M[x++]),done:!1}:{done:!0}}})},y.prototype.replace=function(b){var x=this;return yn(b)&&(b=b.toJS()),_n(function(){var M=rt(!0);try{Array.isArray(b)||$(b)?(x.clear(),b.forEach(function(U){return x.add(U)})):b!=null&&S("Cannot initialize set from "+b)}finally{wt(M)}}),this},y.prototype.observe=function(b,x){return dr(this,b)},y.prototype.intercept=function(b){return pr(this,b)},y.prototype.toJS=function(){return new Set(this)},y.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},y.prototype[oa=z,Symbol.iterator]=function(){return this.values()},y}(),yn=L("ObservableSet",ho),ia=function(){function y(b,x,M,U){x===void 0&&(x=new Map),this.target=b,this.values=x,this.name=M,this.defaultEnhancer=U,this.keysAtom=new D(M+".keys")}return y.prototype.read=function(b){return this.values.get(b).get()},y.prototype.write=function(b,x){var M=this.target,U=this.values.get(b);if(U instanceof Xn)U.set(x);else{if(on(this)){if(!(pe=gt(this,{type:"update",object:this.proxy||M,name:b,newValue:x})))return;x=pe.newValue}if((x=U.prepareNewValue(x))!==Ge.UNCHANGED){var ee=wn(this),pe=ee?{type:"update",object:this.proxy||M,oldValue:U.value,name:b,newValue:x}:null;U.setNewValue(x),ee&&Zt(this,pe)}}},y.prototype.has=function(b){var x=this.pendingKeys||(this.pendingKeys=new Map),M=x.get(b);if(M)return M.get();var U=!!this.values.get(b);return M=new Tt(U,Ze,this.name+"."+K(b)+"?",!1),x.set(b,M),M.get()},y.prototype.addObservableProp=function(b,x,M){M===void 0&&(M=this.defaultEnhancer);var U=this.target;if(on(this)){var ee=gt(this,{object:this.proxy||U,name:b,type:"add",newValue:x});if(!ee)return;x=ee.newValue}var pe=new Tt(x,M,this.name+"."+K(b),!1);this.values.set(b,pe),x=pe.value,Object.defineProperty(U,b,function(je){return yo[je]||(yo[je]={configurable:!0,enumerable:!0,get:function(){return this[z].read(je)},set:function(Fe){this[z].write(je,Fe)}})}(b)),this.notifyPropertyAddition(b,x)},y.prototype.addComputedProp=function(b,x,M){var U,ee,pe,je=this.target;M.name=M.name||this.name+"."+K(x),this.values.set(x,new Xn(M)),(b===je||(U=b,ee=x,!(pe=Object.getOwnPropertyDescriptor(U,ee))||pe.configurable!==!1&&pe.writable!==!1))&&Object.defineProperty(b,x,function(Fe){return go[Fe]||(go[Fe]={configurable:Ge.computedConfigurable,enumerable:!1,get:function(){return vo(this).read(Fe)},set:function(dt){vo(this).write(Fe,dt)}})}(x))},y.prototype.remove=function(b){if(this.values.has(b)){var x=this.target;if(on(this)&&!(Fe=gt(this,{object:this.proxy||x,name:b,type:"remove"})))return;try{mn();var M=wn(this),U=!1,ee=this.values.get(b),pe=ee&&ee.get();if(ee&&ee.set(void 0),this.keysAtom.reportChanged(),this.values.delete(b),this.pendingKeys){var je=this.pendingKeys.get(b);je&&je.set(!1)}delete this.target[b];var Fe=M?{type:"remove",object:this.proxy||x,oldValue:pe,name:b}:null;M&&Zt(this,Fe)}finally{On()}}},y.prototype.illegalAccess=function(b,x){},y.prototype.observe=function(b,x){return dr(this,b)},y.prototype.intercept=function(b){return pr(this,b)},y.prototype.notifyPropertyAddition=function(b,x){var M=wn(this),U=M?{type:"add",object:this.proxy||this.target,name:b,newValue:x}:null;if(M&&Zt(this,U),this.pendingKeys){var ee=this.pendingKeys.get(b);ee&&ee.set(!0)}this.keysAtom.reportChanged()},y.prototype.getKeys=function(){var b,x;this.keysAtom.reportObserved();var M=[];try{for(var U=ce(this.values),ee=U.next();!ee.done;ee=U.next()){var pe=ye(ee.value,2),je=pe[0];pe[1]instanceof Tt&&M.push(je)}}catch(Fe){b={error:Fe}}finally{try{ee&&!ee.done&&(x=U.return)&&x.call(U)}finally{if(b)throw b.error}}return M},y}();function $r(y,b,x){if(b===void 0&&(b=""),x===void 0&&(x=Ce),Object.prototype.hasOwnProperty.call(y,z))return y[z];N(y)||(b=(y.constructor.name||"ObservableObject")+"@"+w()),b||(b="ObservableObject@"+w());var M=new ia(y,new Map,K(b),x);return B(y,z,M),M}var yo=Object.create(null),go=Object.create(null);function vo(y){var b=y[z];return b||(Ie(y),y[z])}var aa=L("ObservableObjectAdministration",ia);function gn(y){return!!T(y)&&(Ie(y),aa(y[z]))}function xn(y,b){if(typeof y=="object"&&y!==null){if(Nn(y))return b!==void 0&&S(!1),y[z].atom;if(yn(y))return y[z];if(It(y)){var x=y;return b===void 0?x._keysAtom:((M=x._data.get(b)||x._hasMap.get(b))||S(!1),M)}var M;if(Ie(y),b&&!y[z]&&y[b],gn(y))return b?((M=y[z].values.get(b))||S(!1),M):S(!1);if(C(y)||Yn(y)||co(y))return y}else if(typeof y=="function"&&co(y[z]))return y[z];return S(!1)}function Tr(y,b){return y||S("Expecting some object"),b!==void 0?Tr(xn(y,b)):C(y)||Yn(y)||co(y)||It(y)||yn(y)?y:(Ie(y),y[z]?y[z]:void S(!1))}var Jo=Object.prototype.toString;function $o(y,b,x){return x===void 0&&(x=-1),Qo(y,b,x)}function Qo(y,b,x,M,U){if(y===b)return y!==0||1/y==1/b;if(y==null||b==null)return!1;if(y!=y)return b!=b;var ee=typeof y;if(ee!=="function"&&ee!=="object"&&typeof b!="object")return!1;var pe=Jo.call(y);if(pe!==Jo.call(b))return!1;switch(pe){case"[object RegExp]":case"[object String]":return""+y==""+b;case"[object Number]":return+y!=+y?+b!=+b:+y==0?1/+y==1/b:+y==+b;case"[object Date]":case"[object Boolean]":return+y==+b;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(y)===Symbol.valueOf.call(b);case"[object Map]":case"[object Set]":x>=0&&x++}y=ua(y),b=ua(b);var je=pe==="[object Array]";if(!je){if(typeof y!="object"||typeof b!="object")return!1;var Fe=y.constructor,dt=b.constructor;if(Fe!==dt&&!(typeof Fe=="function"&&Fe instanceof Fe&&typeof dt=="function"&&dt instanceof dt)&&"constructor"in y&&"constructor"in b)return!1}if(x===0)return!1;x<0&&(x=-1),U=U||[];for(var ot=(M=M||[]).length;ot--;)if(M[ot]===y)return U[ot]===b;if(M.push(y),U.push(b),je){if((ot=y.length)!==b.length)return!1;for(;ot--;)if(!Qo(y[ot],b[ot],x-1,M,U))return!1}else{var xt=Object.keys(y),ct=void 0;if(ot=xt.length,Object.keys(b).length!==ot)return!1;for(;ot--;)if(!es(b,ct=xt[ot])||!Qo(y[ct],b[ct],x-1,M,U))return!1}return M.pop(),U.pop(),!0}function ua(y){return Nn(y)?y.slice():H(y)||It(y)||$(y)||yn(y)?Array.from(y.entries()):y}function es(y,b){return Object.prototype.hasOwnProperty.call(y,b)}function bo(y){return y[Symbol.iterator]=hr,y}function hr(){return this}if(typeof Proxy=="undefined"||typeof Symbol=="undefined")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Bi,extras:{getDebugName:function(y,b){return(b!==void 0?xn(y,b):gn(y)||It(y)||yn(y)?Tr(y):xn(y)).name}},$mobx:z})}).call(this,i(155),i(82))},function(s,f,i){var l=i(116),c=i(44),v=i(179);l||c(Object.prototype,"toString",v,{unsafe:!0})},function(s,f,i){var l=i(40),c=i(83),v=i(70),m=i(56),w=i(111),S="Array Iterator",E=m.set,A=m.getterFor(S);s.exports=w(Array,"Array",function(P,T){E(this,{type:S,target:l(P),index:0,kind:T})},function(){var P=A(this),T=P.target,N=P.kind,B=P.index++;return!T||B>=T.length?(P.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:B,done:!1}:N=="values"?{value:T[B],done:!1}:{value:[B,T[B]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(s,f,i){var l=i(7),c=i(147),v=i(148),m=i(3),w=i(57),S=i(27),E=S("iterator"),A=S("toStringTag"),P=m.values,T=function(B,L){if(B){if(B[E]!==P)try{w(B,E,P)}catch($){B[E]=P}if(B[A]||w(B,A,L),c[L]){for(var H in m)if(B[H]!==m[H])try{w(B,H,m[H])}catch($){B[H]=m[H]}}}};for(var N in c)T(l[N]&&l[N].prototype,N);T(v,"DOMTokenList")},function(s,f,i){var l=i(17),c=i(7),v=i(46),m=i(76),w=i(35),S=i(15),E=i(64),A=i(36),P=i(109),T=i(19),N=i(34),B=i(99),L=i(28),H=i(33),$=i(58),ie=i(88),K=i(32),V=i(38),Z=i(40),z=i(87),D=i(41),C=i(71),R=i(54),F=i(66),Q=i(72),le=i(139),ce=i(112),ye=i(51),xe=i(37),ge=i(93),ue=i(101),he=i(44),be=i(84),Se=i(91),Ie=i(69),Ke=i(85),Pe=i(27),Ce=i(149),Ze=i(150),J=i(73),q=i(56),ae=i(74).forEach,_e=Se("hidden"),Ae="Symbol",we=Pe("toPrimitive"),qe=q.set,nt=q.getterFor(Ae),$e=Object.prototype,Ye=c.Symbol,ve=Ye&&Ye.prototype,He=c.TypeError,te=c.QObject,Le=v("JSON","stringify"),ut=ye.f,vt=xe.f,it=le.f,yt=ge.f,St=S([].push),Pt=be("symbols"),at=be("op-symbols"),Nt=be("string-to-symbol-registry"),G=be("symbol-to-string-registry"),ne=be("wks"),Y=!te||!te.prototype||!te.prototype.findChild,se=A&&T(function(){return R(vt({},"a",{get:function(){return vt(this,"a",{value:7}).a}})).a!=7})?function(ze,Ve,et){var rt=ut($e,Ve);rt&&delete $e[Ve],vt(ze,Ve,et),rt&&ze!==$e&&vt($e,Ve,rt)}:vt,Te=function(ze,Ve){var et=Pt[ze]=R(ve);return qe(et,{type:Ae,tag:ze,description:Ve}),A||(et.description=Ve),et},De=function(ze,Ve,et){ze===$e&&De(at,Ve,et),K(ze);var rt=z(Ve);return K(et),N(Pt,rt)?(et.enumerable?(N(ze,_e)&&ze[_e][rt]&&(ze[_e][rt]=!1),et=R(et,{enumerable:C(0,!1)})):(N(ze,_e)||vt(ze,_e,C(1,{})),ze[_e][rt]=!0),se(ze,rt,et)):vt(ze,rt,et)},Xe=function(ze,Ve){K(ze);var et=Z(Ve),rt=F(et).concat(Ct(et));return ae(rt,function(wt){A&&!w(ft,et,wt)||De(ze,wt,et[wt])}),ze},ft=function(ze){var Ve=z(ze),et=w(yt,this,Ve);return!(this===$e&&N(Pt,Ve)&&!N(at,Ve))&&(!(et||!N(this,Ve)||!N(Pt,Ve)||N(this,_e)&&this[_e][Ve])||et)},Ht=function(ze,Ve){var et=Z(ze),rt=z(Ve);if(et!==$e||!N(Pt,rt)||N(at,rt)){var wt=ut(et,rt);return!wt||!N(Pt,rt)||N(et,_e)&&et[_e][rt]||(wt.enumerable=!0),wt}},Kt=function(ze){var Ve=it(Z(ze)),et=[];return ae(Ve,function(rt){N(Pt,rt)||N(Ie,rt)||St(et,rt)}),et},Ct=function(ze){var Ve=ze===$e,et=it(Ve?at:Z(ze)),rt=[];return ae(et,function(wt){!N(Pt,wt)||Ve&&!N($e,wt)||St(rt,Pt[wt])}),rt};if(P||(Ye=function(){if($(ve,this))throw He("Symbol is not a constructor");var ze=arguments.length&&arguments[0]!==void 0?D(arguments[0]):void 0,Ve=Ke(ze),et=function(rt){this===$e&&w(et,at,rt),N(this,_e)&&N(this[_e],Ve)&&(this[_e][Ve]=!1),se(this,Ve,C(1,rt))};return A&&Y&&se($e,Ve,{configurable:!0,set:et}),Te(Ve,ze)},he(ve=Ye.prototype,"toString",function(){return nt(this).tag}),he(Ye,"withoutSetter",function(ze){return Te(Ke(ze),ze)}),ge.f=ft,xe.f=De,ye.f=Ht,Q.f=le.f=Kt,ce.f=Ct,Ce.f=function(ze){return Te(Pe(ze),ze)},A&&(vt(ve,"description",{configurable:!0,get:function(){return nt(this).description}}),E||he($e,"propertyIsEnumerable",ft,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!P,sham:!P},{Symbol:Ye}),ae(F(ne),function(ze){Ze(ze)}),l({target:Ae,stat:!0,forced:!P},{for:function(ze){var Ve=D(ze);if(N(Nt,Ve))return Nt[Ve];var et=Ye(Ve);return Nt[Ve]=et,G[et]=Ve,et},keyFor:function(ze){if(!ie(ze))throw He(ze+" is not a symbol");if(N(G,ze))return G[ze]},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),l({target:"Object",stat:!0,forced:!P,sham:!A},{create:function(ze,Ve){return Ve===void 0?R(ze):Xe(R(ze),Ve)},defineProperty:De,defineProperties:Xe,getOwnPropertyDescriptor:Ht}),l({target:"Object",stat:!0,forced:!P},{getOwnPropertyNames:Kt,getOwnPropertySymbols:Ct}),l({target:"Object",stat:!0,forced:T(function(){ce.f(1)})},{getOwnPropertySymbols:function(ze){return ce.f(V(ze))}}),Le&&l({target:"JSON",stat:!0,forced:!P||T(function(){var ze=Ye();return Le([ze])!="[null]"||Le({a:ze})!="{}"||Le(Object(ze))!="{}"})},{stringify:function(ze,Ve,et){var rt=ue(arguments),wt=Ve;if((H(Ve)||ze!==void 0)&&!ie(ze))return B(Ve)||(Ve=function(Tt,cr){if(L(wt)&&(cr=w(wt,this,Tt,cr)),!ie(cr))return cr}),rt[1]=Ve,m(Le,null,rt)}}),!ve[we]){var Rt=ve.valueOf;he(ve,we,function(ze){return w(Rt,this)})}J(Ye,Ae),Ie[_e]=!0},function(s,f,i){var l=i(146).charAt,c=i(41),v=i(56),m=i(111),w="String Iterator",S=v.set,E=v.getterFor(w);m(String,"String",function(A){S(this,{type:w,string:c(A),index:0})},function(){var A,P=E(this),T=P.string,N=P.index;return N>=T.length?{value:void 0,done:!0}:(A=l(T,N),P.index+=A.length,{value:A,done:!1})})},function(s,f,i){(function(l){var c=function(v){return v&&v.Math==Math&&v};s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,i(82))},function(s,f,i){var l=i(17),c=i(36),v=i(7),m=i(15),w=i(34),S=i(28),E=i(58),A=i(41),P=i(37).f,T=i(134),N=v.Symbol,B=N&&N.prototype;if(c&&S(N)&&(!("description"in B)||N().description!==void 0)){var L={},H=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:A(arguments[0]),C=E(B,this)?new N(D):D===void 0?N():N(D);return D===""&&(L[C]=!0),C};T(H,N),H.prototype=B,B.constructor=H;var $=String(N("test"))=="Symbol(test)",ie=m(B.toString),K=m(B.valueOf),V=/^Symbol\((.*)\)[^)]+$/,Z=m("".replace),z=m("".slice);P(B,"description",{configurable:!0,get:function(){var D=K(this),C=ie(D);if(w(L,D))return"";var R=$?z(C,7,-1):Z(C,V,"$1");return R===""?void 0:R}}),l({global:!0,forced:!0},{Symbol:H})}},function(s,f,i){i(150)("iterator")},function(s,f,i){i.d(f,"a",function(){return m.a}),i.d(f,"c",function(){return m.e}),i.d(f,"h",function(){return V}),i.d(f,"i",function(){return $}),i.d(f,"j",function(){return L}),i.d(f,"b",function(){return ye}),i.d(f,"e",function(){return he}),i.d(f,"f",function(){return xe}),i.d(f,"g",function(){return Pt});var l,c,v,m=i(0),w=0,S=[],E=m.i.__b,A=m.i.__r,P=m.i.diffed,T=m.i.__c,N=m.i.unmount;function B(G,ne){m.i.__h&&m.i.__h(c,G,w||ne),w=0;var Y=c.__H||(c.__H={__:[],__h:[]});return G>=Y.__.length&&Y.__.push({}),Y.__[G]}function L(G){return w=1,H(Q,G)}function H(G,ne,Y){var se=B(l++,2);return se.t=G,se.__c||(se.__=[Y?Y(ne):Q(void 0,ne),function(Te){var De=se.t(se.__[0],Te);se.__[0]!==De&&(se.__=[De,se.__[1]],se.__c.setState({}))}],se.__c=c),se.__}function $(G,ne){var Y=B(l++,3);!m.i.__s&&F(Y.__H,ne)&&(Y.__=G,Y.__H=ne,c.__H.__h.push(Y))}function ie(G,ne){var Y=B(l++,4);!m.i.__s&&F(Y.__H,ne)&&(Y.__=G,Y.__H=ne,c.__h.push(Y))}function K(G,ne){var Y=B(l++,7);return F(Y.__H,ne)&&(Y.__=G(),Y.__H=ne,Y.__h=G),Y.__}function V(G,ne){return w=8,K(function(){return G},ne)}function Z(){var G;for(S.sort(function(ne,Y){return ne.__v.__b-Y.__v.__b});G=S.pop();)if(G.__P)try{G.__H.__h.forEach(C),G.__H.__h.forEach(R),G.__H.__h=[]}catch(ne){G.__H.__h=[],m.i.__e(ne,G.__v)}}m.i.__b=function(G){c=null,E&&E(G)},m.i.__r=function(G){A&&A(G),l=0;var ne=(c=G.__c).__H;ne&&(ne.__h.forEach(C),ne.__h.forEach(R),ne.__h=[])},m.i.diffed=function(G){P&&P(G);var ne=G.__c;ne&&ne.__H&&ne.__H.__h.length&&(S.push(ne)!==1&&v===m.i.requestAnimationFrame||((v=m.i.requestAnimationFrame)||D)(Z)),c=null},m.i.__c=function(G,ne){ne.some(function(Y){try{Y.__h.forEach(C),Y.__h=Y.__h.filter(function(se){return!se.__||R(se)})}catch(se){ne.some(function(Te){Te.__h&&(Te.__h=[])}),ne=[],m.i.__e(se,Y.__v)}}),T&&T(G,ne)},m.i.unmount=function(G){N&&N(G);var ne,Y=G.__c;Y&&Y.__H&&(Y.__H.__.forEach(function(se){try{C(se)}catch(Te){ne=Te}}),ne&&m.i.__e(ne,Y.__v))};var z=typeof requestAnimationFrame=="function";function D(G){var ne,Y=function(){clearTimeout(se),z&&cancelAnimationFrame(ne),setTimeout(G)},se=setTimeout(Y,100);z&&(ne=requestAnimationFrame(Y))}function C(G){var ne=c,Y=G.__c;typeof Y=="function"&&(G.__c=void 0,Y()),c=ne}function R(G){var ne=c;G.__c=G.__(),c=ne}function F(G,ne){return!G||G.length!==ne.length||ne.some(function(Y,se){return Y!==G[se]})}function Q(G,ne){return typeof ne=="function"?ne(G):ne}function le(G,ne){for(var Y in ne)G[Y]=ne[Y];return G}function ce(G,ne){for(var Y in G)if(Y!=="__source"&&!(Y in ne))return!0;for(var se in ne)if(se!=="__source"&&G[se]!==ne[se])return!0;return!1}function ye(G){this.props=G}function xe(G,ne){function Y(Te){var De=this.props.ref,Xe=De==Te.ref;return!Xe&&De&&(De.call?De(null):De.current=null),ne?!ne(this.props,Te)||!Xe:ce(this.props,Te)}function se(Te){return this.shouldComponentUpdate=Y,Object(m.e)(G,Te)}return se.displayName="Memo("+(G.displayName||G.name)+")",se.prototype.isReactComponent=!0,se.__f=!0,se}(ye.prototype=new m.a).isPureReactComponent=!0,ye.prototype.shouldComponentUpdate=function(G,ne){return ce(this.props,G)||ce(this.state,ne)};var ge=m.i.__b;m.i.__b=function(G){G.type&&G.type.__f&&G.ref&&(G.props.ref=G.ref,G.ref=null),ge&&ge(G)};var ue=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(G){function ne(Y,se){var Te=le({},Y);return delete Te.ref,G(Te,!(se=Y.ref||se)||typeof se=="object"&&!("current"in se)?null:se)}return ne.$$typeof=ue,ne.render=ne,ne.prototype.isReactComponent=ne.__f=!0,ne.displayName="ForwardRef("+(G.displayName||G.name)+")",ne}var be=function(G,ne){return G==null?null:Object(m.k)(Object(m.k)(G).map(ne))},Se={map:be,forEach:be,count:function(G){return G?Object(m.k)(G).length:0},only:function(G){var ne=Object(m.k)(G);if(ne.length!==1)throw"Children.only";return ne[0]},toArray:m.k},Ie=m.i.__e;m.i.__e=function(G,ne,Y){if(G.then){for(var se,Te=ne;Te=Te.__;)if((se=Te.__c)&&se.__c)return ne.__e==null&&(ne.__e=Y.__e,ne.__k=Y.__k),se.__c(G,ne)}Ie(G,ne,Y)};var Ke=m.i.unmount;function Pe(G,ne,Y){return G&&(G.__c&&G.__c.__H&&(G.__c.__H.__.forEach(function(se){typeof se.__c=="function"&&se.__c()}),G.__c.__H=null),(G=le({},G)).__c!=null&&(G.__c.__P===Y&&(G.__c.__P=ne),G.__c=null),G.__k=G.__k&&G.__k.map(function(se){return Pe(se,ne,Y)})),G}function Ce(G,ne,Y){return G&&(G.__v=null,G.__k=G.__k&&G.__k.map(function(se){return Ce(se,ne,Y)}),G.__c&&G.__c.__P===ne&&(G.__e&&Y.insertBefore(G.__e,G.__d),G.__c.__e=!0,G.__c.__P=Y)),G}function Ze(){this.__u=0,this.t=null,this.__b=null}function J(G){var ne=G.__.__c;return ne&&ne.__e&&ne.__e(G)}function q(){this.u=null,this.o=null}m.i.unmount=function(G){var ne=G.__c;ne&&ne.__R&&ne.__R(),ne&&G.__h===!0&&(G.type=null),Ke&&Ke(G)},(Ze.prototype=new m.a).__c=function(G,ne){var Y=ne.__c,se=this;se.t==null&&(se.t=[]),se.t.push(Y);var Te=J(se.__v),De=!1,Xe=function(){De||(De=!0,Y.__R=null,Te?Te(ft):ft())};Y.__R=Xe;var ft=function(){if(!--se.__u){if(se.state.__e){var Kt=se.state.__e;se.__v.__k[0]=Ce(Kt,Kt.__c.__P,Kt.__c.__O)}var Ct;for(se.setState({__e:se.__b=null});Ct=se.t.pop();)Ct.forceUpdate()}},Ht=ne.__h===!0;se.__u++||Ht||se.setState({__e:se.__b=se.__v.__k[0]}),G.then(Xe,Xe)},Ze.prototype.componentWillUnmount=function(){this.t=[]},Ze.prototype.render=function(G,ne){if(this.__b){if(this.__v.__k){var Y=document.createElement("div"),se=this.__v.__k[0].__c;this.__v.__k[0]=Pe(this.__b,Y,se.__O=se.__P)}this.__b=null}var Te=ne.__e&&Object(m.e)(m.b,null,G.fallback);return Te&&(Te.__h=null),[Object(m.e)(m.b,null,ne.__e?null:G.children),Te]};var ae=function(G,ne,Y){if(++Y[1]===Y[0]&&G.o.delete(ne),G.props.revealOrder&&(G.props.revealOrder[0]!=="t"||!G.o.size))for(Y=G.u;Y;){for(;Y.length>3;)Y.pop()();if(Y[1]<Y[0])break;G.u=Y=Y[2]}};function _e(G){return this.getChildContext=function(){return G.context},G.children}function Ae(G){var ne=this,Y=G.i;ne.componentWillUnmount=function(){Object(m.j)(null,ne.l),ne.l=null,ne.i=null},ne.i&&ne.i!==Y&&ne.componentWillUnmount(),G.__v?(ne.l||(ne.i=Y,ne.l={nodeType:1,parentNode:Y,childNodes:[],appendChild:function(se){this.childNodes.push(se),ne.i.appendChild(se)},insertBefore:function(se,Te){this.childNodes.push(se),ne.i.appendChild(se)},removeChild:function(se){this.childNodes.splice(this.childNodes.indexOf(se)>>>1,1),ne.i.removeChild(se)}}),Object(m.j)(Object(m.e)(_e,{context:ne.context},G.__v),ne.l)):ne.l&&ne.componentWillUnmount()}(q.prototype=new m.a).__e=function(G){var ne=this,Y=J(ne.__v),se=ne.o.get(G);return se[0]++,function(Te){var De=function(){ne.props.revealOrder?(se.push(Te),ae(ne,G,se)):Te()};Y?Y(De):De()}},q.prototype.render=function(G){this.u=null,this.o=new Map;var ne=Object(m.k)(G.children);G.revealOrder&&G.revealOrder[0]==="b"&&ne.reverse();for(var Y=ne.length;Y--;)this.o.set(ne[Y],this.u=[1,0,this.u]);return G.children},q.prototype.componentDidUpdate=q.prototype.componentDidMount=function(){var G=this;this.o.forEach(function(ne,Y){ae(G,Y,ne)})};var we=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nt=typeof document!="undefined",$e=function(G){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(G)};m.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(G){Object.defineProperty(m.a.prototype,G,{configurable:!0,get:function(){return this["UNSAFE_"+G]},set:function(ne){Object.defineProperty(this,G,{configurable:!0,writable:!0,value:ne})}})});var Ye=m.i.event;function ve(){}function He(){return this.cancelBubble}function te(){return this.defaultPrevented}m.i.event=function(G){return Ye&&(G=Ye(G)),G.persist=ve,G.isPropagationStopped=He,G.isDefaultPrevented=te,G.nativeEvent=G};var Le,ut={configurable:!0,get:function(){return this.class}},vt=m.i.vnode;m.i.vnode=function(G){var ne=G.type,Y=G.props,se=Y;if(typeof ne=="string"){var Te=ne.indexOf("-")===-1;for(var De in se={},Y){var Xe=Y[De];nt&&De==="children"&&ne==="noscript"||De==="value"&&"defaultValue"in Y&&Xe==null||(De==="defaultValue"&&"value"in Y&&Y.value==null?De="value":De==="download"&&Xe===!0?Xe="":/ondoubleclick/i.test(De)?De="ondblclick":/^onchange(textarea|input)/i.test(De+ne)&&!$e(Y.type)?De="oninput":/^onfocus$/i.test(De)?De="onfocusin":/^onblur$/i.test(De)?De="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(De)?De=De.toLowerCase():Te&&qe.test(De)?De=De.replace(/[A-Z0-9]/,"-$&").toLowerCase():Xe===null&&(Xe=void 0),se[De]=Xe)}ne=="select"&&se.multiple&&Array.isArray(se.value)&&(se.value=Object(m.k)(Y.children).forEach(function(ft){ft.props.selected=se.value.indexOf(ft.props.value)!=-1})),ne=="select"&&se.defaultValue!=null&&(se.value=Object(m.k)(Y.children).forEach(function(ft){ft.props.selected=se.multiple?se.defaultValue.indexOf(ft.props.value)!=-1:se.defaultValue==ft.props.value})),G.props=se,Y.class!=Y.className&&(ut.enumerable="className"in Y,Y.className!=null&&(se.class=Y.className),Object.defineProperty(se,"className",ut))}G.$$typeof=we,vt&&vt(G)};var it=m.i.__r;m.i.__r=function(G){it&&it(G),Le=G.__c};var yt={ReactCurrentDispatcher:{current:{readContext:function(G){return Le.__n[G.__c].props.value}}}};function St(G){return!!G&&G.$$typeof===we}var Pt=function(G,ne){return G(ne)},at=m.b,Nt={useState:L,useReducer:H,useEffect:$,useLayoutEffect:ie,useRef:function(G){return w=5,K(function(){return{current:G}},[])},useImperativeHandle:function(G,ne,Y){w=6,ie(function(){typeof G=="function"?G(ne()):G&&(G.current=ne())},Y==null?Y:Y.concat(G))},useMemo:K,useCallback:V,useContext:function(G){var ne=c.context[G.__c],Y=B(l++,9);return Y.c=G,ne?(Y.__==null&&(Y.__=!0,ne.sub(c)),ne.props.value):G.__},useDebugValue:function(G,ne){m.i.useDebugValue&&m.i.useDebugValue(ne?ne(G):G)},version:"17.0.2",Children:Se,render:function(G,ne,Y){return ne.__k==null&&(ne.textContent=""),Object(m.j)(G,ne),typeof Y=="function"&&Y(),G?G.__c:null},hydrate:function(G,ne,Y){return Object(m.h)(G,ne),typeof Y=="function"&&Y(),G?G.__c:null},unmountComponentAtNode:function(G){return!!G.__k&&(Object(m.j)(null,G),!0)},createPortal:function(G,ne){return Object(m.e)(Ae,{__v:G,i:ne})},createElement:m.e,createContext:m.d,createFactory:function(G){return m.e.bind(null,G)},cloneElement:function(G){return St(G)?m.c.apply(null,arguments):G},createRef:m.f,Fragment:m.b,isValidElement:St,findDOMNode:function(G){return G&&(G.base||G.nodeType===1&&G)||null},Component:m.a,PureComponent:ye,memo:xe,forwardRef:he,flushSync:function(G,ne){return G(ne)},unstable_batchedUpdates:Pt,StrictMode:at,Suspense:Ze,SuspenseList:q,lazy:function(G){var ne,Y,se;function Te(De){if(ne||(ne=G()).then(function(Xe){Y=Xe.default||Xe},function(Xe){se=Xe}),se)throw se;if(!Y)throw ne;return Object(m.e)(Y,De)}return Te.displayName="Lazy",Te.__f=!0,Te},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:yt};f.d=Nt},function(s,f,i){var l=i(7),c=i(147),v=i(148),m=i(180),w=i(57),S=function(A){if(A&&A.forEach!==m)try{w(A,"forEach",m)}catch(P){A.forEach=m}};for(var E in c)c[E]&&S(l[E]&&l[E].prototype);S(v)},function(s,f,i){i(17)({target:"Object",stat:!0},{setPrototypeOf:i(97)})},function(s,f,i){var l=i(17),c=i(19),v=i(38),m=i(96),w=i(137);l({target:"Object",stat:!0,forced:c(function(){m(1)}),sham:!w},{getPrototypeOf:function(S){return m(v(S))}})},function(s,f,i){var l=i(17),c=i(46),v=i(76),m=i(200),w=i(157),S=i(32),E=i(33),A=i(54),P=i(19),T=c("Reflect","construct"),N=Object.prototype,B=[].push,L=P(function(){function ie(){}return!(T(function(){},[],ie)instanceof ie)}),H=!P(function(){T(function(){})}),$=L||H;l({target:"Reflect",stat:!0,forced:$,sham:$},{construct:function(ie,K){w(ie),S(K);var V=arguments.length<3?ie:w(arguments[2]);if(H&&!L)return T(ie,K,V);if(ie==V){switch(K.length){case 0:return new ie;case 1:return new ie(K[0]);case 2:return new ie(K[0],K[1]);case 3:return new ie(K[0],K[1],K[2]);case 4:return new ie(K[0],K[1],K[2],K[3])}var Z=[null];return v(B,Z,K),new(v(m,ie,Z))}var z=V.prototype,D=A(E(z)?z:N),C=v(ie,D,K);return E(C)?C:D}})},function(s,f){var i=Function.prototype,l=i.bind,c=i.call,v=l&&l.bind(c);s.exports=l?function(m){return m&&v(c,m)}:function(m){return m&&function(){return c.apply(m,arguments)}}},function(s,f,i){var l=i(17),c=i(7),v=i(99),m=i(100),w=i(33),S=i(67),E=i(43),A=i(40),P=i(61),T=i(27),N=i(75),B=i(101),L=N("slice"),H=T("species"),$=c.Array,ie=Math.max;l({target:"Array",proto:!0,forced:!L},{slice:function(K,V){var Z,z,D,C=A(this),R=E(C),F=S(K,R),Q=S(V===void 0?R:V,R);if(v(C)&&(Z=C.constructor,(m(Z)&&(Z===$||v(Z.prototype))||w(Z)&&(Z=Z[H])===null)&&(Z=void 0),Z===$||Z===void 0))return B(C,F,Q);for(z=new(Z===void 0?$:Z)(ie(Q-F,0)),D=0;F<Q;F++,D++)F in C&&P(z,D,C[F]);return z.length=D,z}})},function(s,f,i){var l=i(7),c=i(51).f,v=i(57),m=i(44),w=i(108),S=i(134),E=i(95);s.exports=function(A,P){var T,N,B,L,H,$=A.target,ie=A.global,K=A.stat;if(T=ie?l:K?l[$]||w($,{}):(l[$]||{}).prototype)for(N in P){if(L=P[N],B=A.noTargetGet?(H=c(T,N))&&H.value:T[N],!E(ie?N:$+(K?".":"#")+N,A.forced)&&B!==void 0){if(typeof L==typeof B)continue;S(L,B)}(A.sham||B&&B.sham)&&v(L,"sham",!0),m(T,N,L,A)}}},function(s,f,i){var l=i(17),c=i(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(s,f){s.exports=function(i){try{return!!i()}catch(l){return!0}}},function(s,f,i){var l=i(17),c=i(38),v=i(66);l({target:"Object",stat:!0,forced:i(19)(function(){v(1)})},{keys:function(m){return v(c(m))}})},function(s,f,i){var l=i(17),c=i(19),v=i(40),m=i(51).f,w=i(36),S=c(function(){m(1)});l({target:"Object",stat:!0,forced:!w||S,sham:!w},{getOwnPropertyDescriptor:function(E,A){return m(v(E),A)}})},function(s,f,i){var l=i(36),c=i(94).EXISTS,v=i(15),m=i(37).f,w=Function.prototype,S=v(w.toString),E=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,A=v(E.exec);l&&!c&&m(w,"name",{configurable:!0,get:function(){try{return A(E,S(this))[1]}catch(P){return""}}})},function(s,f,i){var l=i(17),c=i(74).filter;l({target:"Array",proto:!0,forced:!i(75)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(17),c=i(183);l({target:"Array",stat:!0,forced:!i(118)(function(v){Array.from(v)})},{from:c})},function(s,f,i){var l=i(17),c=i(36),v=i(135),m=i(40),w=i(51),S=i(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(E){for(var A,P,T=m(E),N=w.f,B=v(T),L={},H=0;B.length>H;)(P=N(T,A=B[H++]))!==void 0&&S(L,A,P);return L}})},,function(s,f,i){var l=i(7),c=i(84),v=i(34),m=i(85),w=i(109),S=i(128),E=c("wks"),A=l.Symbol,P=A&&A.for,T=S?A:A&&A.withoutSetter||m;s.exports=function(N){if(!v(E,N)||!w&&typeof E[N]!="string"){var B="Symbol."+N;w&&v(A,N)?E[N]=A[N]:E[N]=S&&P?P(B):T(B)}return E[N]}},function(s,f){s.exports=function(i){return typeof i=="function"}},function(s,f,i){var l=i(17),c=i(7),v=i(19),m=i(99),w=i(33),S=i(38),E=i(43),A=i(61),P=i(119),T=i(75),N=i(27),B=i(65),L=N("isConcatSpreadable"),H=9007199254740991,$="Maximum allowed index exceeded",ie=c.TypeError,K=B>=51||!v(function(){var z=[];return z[L]=!1,z.concat()[0]!==z}),V=T("concat"),Z=function(z){if(!w(z))return!1;var D=z[L];return D!==void 0?!!D:m(z)};l({target:"Array",proto:!0,forced:!K||!V},{concat:function(z){var D,C,R,F,Q,le=S(this),ce=P(le,0),ye=0;for(D=-1,R=arguments.length;D<R;D++)if(Z(Q=D===-1?le:arguments[D])){if(ye+(F=E(Q))>H)throw ie($);for(C=0;C<F;C++,ye++)C in Q&&A(ce,ye,Q[C])}else{if(ye>=H)throw ie($);A(ce,ye++,Q)}return ce.length=ye,ce}})},function(s,f,i){var l=i(17),c=i(199);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(s,f,i){var l=i(105),c=typeof self=="object"&&self&&self.Object===Object&&self,v=l.a||c||Function("return this")();f.a=v},function(s,f,i){var l=i(7),c=i(33),v=l.String,m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(v(w)+" is not an object")}},function(s,f,i){var l=i(28);s.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(s,f,i){var l=i(15),c=i(38),v=l({}.hasOwnProperty);s.exports=Object.hasOwn||function(m,w){return v(c(m),w)}},function(s,f){var i=Function.prototype.call;s.exports=i.bind?i.bind(i):function(){return i.apply(i,arguments)}},function(s,f,i){var l=i(19);s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(s,f,i){var l=i(7),c=i(36),v=i(129),m=i(32),w=i(87),S=l.TypeError,E=Object.defineProperty;f.f=c?E:function(A,P,T){if(m(A),P=w(P),m(T),v)try{return E(A,P,T)}catch(N){}if("get"in T||"set"in T)throw S("Accessors not supported");return"value"in T&&(A[P]=T.value),A}},function(s,f,i){var l=i(7),c=i(45),v=l.Object;s.exports=function(m){return v(c(m))}},function(s,f,i){var l=i(17),c=i(74).map;l({target:"Array",proto:!0,forced:!i(75)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(81),c=i(45);s.exports=function(v){return l(c(v))}},function(s,f,i){var l=i(7),c=i(98),v=l.String;s.exports=function(m){if(c(m)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(m)}},function(s,f,i){(function(l){i.d(f,"d",function(){return m}),i.d(f,"c",function(){return w}),i.d(f,"b",function(){return S}),i.d(f,"a",function(){return A});var c=i(10),v=function(P,T){var N=typeof Symbol=="function"&&P[Symbol.iterator];if(!N)return P;var B,L,H=N.call(P),$=[];try{for(;(T===void 0||T-- >0)&&!(B=H.next()).done;)$.push(B.value)}catch(ie){L={error:ie}}finally{try{B&&!B.done&&(N=H.return)&&N.call(H)}finally{if(L)throw L.error}}return $};function m(){var P=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){P(function(T){return T+1})},[])}function w(P){if(!P||typeof P!="object")return!1;var T=Object.getPrototypeOf(P);return!T||T===Object.prototype}function S(P){return typeof Symbol=="function"?Symbol.for(P):"__$mobx-react "+P+"__"}var E={};function A(){return typeof window!="undefined"?window:l!==void 0?l:typeof self!="undefined"?self:E}}).call(this,i(82))},function(s,f,i){var l=i(90);s.exports=function(c){return l(c.length)}},function(s,f,i){var l=i(7),c=i(28),v=i(34),m=i(57),w=i(108),S=i(92),E=i(56),A=i(94).CONFIGURABLE,P=E.get,T=E.enforce,N=String(String).split("String");(s.exports=function(B,L,H,$){var ie,K=!!$&&!!$.unsafe,V=!!$&&!!$.enumerable,Z=!!$&&!!$.noTargetGet,z=$&&$.name!==void 0?$.name:L;c(H)&&(String(z).slice(0,7)==="Symbol("&&(z="["+String(z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(H,"name")||A&&H.name!==z)&&m(H,"name",z),(ie=T(H)).source||(ie.source=N.join(typeof z=="string"?z:""))),B!==l?(K?!Z&&B[L]&&(V=!0):delete B[L],V?B[L]=H:m(B,L,H)):V?B[L]=H:w(L,H)})(Function.prototype,"toString",function(){return c(this)&&P(this).source||S(this)})},function(s,f,i){var l=i(7).TypeError;s.exports=function(c){if(c==null)throw l("Can't call method on "+c);return c}},function(s,f,i){var l=i(7),c=i(28),v=function(m){return c(m)?m:void 0};s.exports=function(m,w){return arguments.length<2?v(l[m]):l[m]&&l[m][w]}},function(s,f,i){var l=i(17),c=i(35),v=i(33),m=i(32),w=i(201),S=i(51),E=i(96);l({target:"Reflect",stat:!0},{get:function A(P,T){var N,B,L=arguments.length<3?P:arguments[2];return m(P)===L?P[T]:(N=S.f(P,T))?w(N)?N.value:N.get===void 0?void 0:c(N.get,L):v(B=E(P))?A(B,T,L):void 0}})},function(s,f,i){(function(l){var c=i(31),v=i(166),m=h&&!h.nodeType&&h,w=m&&typeof l=="object"&&l&&!l.nodeType&&l,S=w&&w.exports===m?c.a.Buffer:void 0,E=(S?S.isBuffer:void 0)||v.a;f.a=E}).call(this,i(121)(s))},function(s,f,i){(function(l){var c=i(105),v=h&&!h.nodeType&&h,m=v&&typeof l=="object"&&l&&!l.nodeType&&l,w=m&&m.exports===v&&c.a.process,S=function(){try{var E=m&&m.require&&m.require("util").types;return E||w&&w.binding&&w.binding("util")}catch(A){}}();f.a=S}).call(this,i(121)(s))},function(s,f,i){var l=i(15),c=l({}.toString),v=l("".slice);s.exports=function(m){return v(c(m),8,-1)}},function(s,f,i){var l=i(36),c=i(35),v=i(93),m=i(71),w=i(40),S=i(87),E=i(34),A=i(129),P=Object.getOwnPropertyDescriptor;f.f=l?P:function(T,N){if(T=w(T),N=S(N),A)try{return P(T,N)}catch(B){}if(E(T,N))return m(!c(v.f,T,N),T[N])}},function(s,f,i){var l=i(17),c=i(213).entries;l({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(s,f,i){var l=i(46);s.exports=l("navigator","userAgent")||""},function(s,f,i){var l,c=i(32),v=i(169),m=i(110),w=i(69),S=i(133),E=i(86),A=i(91),P=A("IE_PROTO"),T=function(){},N=function(H){return"<script>"+H+"<\/script>"},B=function(H){H.write(N("")),H.close();var $=H.parentWindow.Object;return H=null,$},L=function(){try{l=new ActiveXObject("htmlfile")}catch(K){}var H,$;L=typeof document!="undefined"?document.domain&&l?B(l):(($=E("iframe")).style.display="none",S.appendChild($),$.src="javascript:",(H=$.contentWindow.document).open(),H.write(N("document.F=Object")),H.close(),H.F):B(l);for(var ie=m.length;ie--;)delete L.prototype[m[ie]];return L()};w[P]=!0,s.exports=Object.create||function(H,$){var ie;return H!==null?(T.prototype=c(H),ie=new T,T.prototype=null,ie[P]=H):ie=L(),$===void 0?ie:v(ie,$)}},function(s,f,i){var l=i(7),c=i(28),v=i(89),m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(v(w)+" is not a function")}},function(s,f,i){var l,c,v,m=i(171),w=i(7),S=i(15),E=i(33),A=i(57),P=i(34),T=i(107),N=i(91),B=i(69),L="Object already initialized",H=w.TypeError,$=w.WeakMap;if(m||T.state){var ie=T.state||(T.state=new $),K=S(ie.get),V=S(ie.has),Z=S(ie.set);l=function(D,C){if(V(ie,D))throw new H(L);return C.facade=D,Z(ie,D,C),C},c=function(D){return K(ie,D)||{}},v=function(D){return V(ie,D)}}else{var z=N("state");B[z]=!0,l=function(D,C){if(P(D,z))throw new H(L);return C.facade=D,A(D,z,C),C},c=function(D){return P(D,z)?D[z]:{}},v=function(D){return P(D,z)}}s.exports={set:l,get:c,has:v,enforce:function(D){return v(D)?c(D):l(D,{})},getterFor:function(D){return function(C){var R;if(!E(C)||(R=c(C)).type!==D)throw H("Incompatible receiver, "+D+" required");return R}}}},function(s,f,i){var l=i(36),c=i(37),v=i(71);s.exports=l?function(m,w,S){return c.f(m,w,v(1,S))}:function(m,w,S){return m[w]=S,m}},function(s,f,i){var l=i(15);s.exports=l({}.isPrototypeOf)},function(s,f,i){var l=i(55);s.exports=function(c,v){var m=c[v];return m==null?void 0:l(m)}},function(s,f,i){i(174)("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},i(178))},function(s,f,i){var l=i(87),c=i(37),v=i(71);s.exports=function(m,w,S){var E=l(w);E in m?c.f(m,E,v(0,S)):m[E]=S}},function(s,f,i){var l=i(15),c=i(55),v=l(l.bind);s.exports=function(m,w){return c(m),w===void 0?m:v?v(m,w):function(){return m.apply(w,arguments)}}},function(s,f,i){var l=i(17),c=i(15),v=i(81),m=i(40),w=i(120),S=c([].join),E=v!=Object,A=w("join",",");l({target:"Array",proto:!0,forced:E||!A},{join:function(P){return S(m(this),P===void 0?",":P)}})},function(s,f){s.exports=!1},function(s,f,i){var l,c,v=i(7),m=i(53),w=v.process,S=v.Deno,E=w&&w.versions||S&&S.version,A=E&&E.v8;A&&(c=(l=A.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!c&&m&&(!(l=m.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=m.match(/Chrome\/(\d+)/))&&(c=+l[1]),s.exports=c},function(s,f,i){var l=i(131),c=i(110);s.exports=Object.keys||function(v){return l(v,c)}},function(s,f,i){var l=i(68),c=Math.max,v=Math.min;s.exports=function(m,w){var S=l(m);return S<0?c(S+w,0):v(S,w)}},function(s,f){var i=Math.ceil,l=Math.floor;s.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?l:i)(v)}},function(s,f){s.exports={}},function(s,f){s.exports={}},function(s,f){s.exports=function(i,l){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:l}}},function(s,f,i){var l=i(131),c=i(110).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(v){return l(v,c)}},function(s,f,i){var l=i(37).f,c=i(34),v=i(27)("toStringTag");s.exports=function(m,w,S){m&&!c(m=S?m:m.prototype,v)&&l(m,v,{configurable:!0,value:w})}},function(s,f,i){var l=i(62),c=i(15),v=i(81),m=i(38),w=i(43),S=i(119),E=c([].push),A=function(P){var T=P==1,N=P==2,B=P==3,L=P==4,H=P==6,$=P==7,ie=P==5||H;return function(K,V,Z,z){for(var D,C,R=m(K),F=v(R),Q=l(V,Z),le=w(F),ce=0,ye=z||S,xe=T?ye(K,le):N||$?ye(K,0):void 0;le>ce;ce++)if((ie||ce in F)&&(C=Q(D=F[ce],ce,R),P))if(T)xe[ce]=C;else if(C)switch(P){case 3:return!0;case 5:return D;case 6:return ce;case 2:E(xe,D)}else switch(P){case 4:return!1;case 7:E(xe,D)}return H?-1:B||L?L:xe}};s.exports={forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findIndex:A(6),filterReject:A(7)}},function(s,f,i){var l=i(19),c=i(27),v=i(65),m=c("species");s.exports=function(w){return v>=51||!l(function(){var S=[];return(S.constructor={})[m]=function(){return{foo:1}},S[w](Boolean).foo!==1})}},function(s,f){var i=Function.prototype,l=i.apply,c=i.bind,v=i.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(l):function(){return v.apply(l,arguments)})},function(s,f,i){var l=i(76),c=i(35),v=i(15),m=i(122),w=i(154),S=i(32),E=i(45),A=i(156),P=i(123),T=i(90),N=i(41),B=i(59),L=i(113),H=i(124),$=i(102),ie=i(151),K=i(19),V=ie.UNSUPPORTED_Y,Z=4294967295,z=Math.min,D=[].push,C=v(/./.exec),R=v(D),F=v("".slice),Q=!K(function(){var le=/(?:)/,ce=le.exec;le.exec=function(){return ce.apply(this,arguments)};var ye="ab".split(le);return ye.length!==2||ye[0]!=="a"||ye[1]!=="b"});m("split",function(le,ce,ye){var xe;return xe="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ge,ue){var he=N(E(this)),be=ue===void 0?Z:ue>>>0;if(be===0)return[];if(ge===void 0)return[he];if(!w(ge))return c(ce,he,ge,be);for(var Se,Ie,Ke,Pe=[],Ce=(ge.ignoreCase?"i":"")+(ge.multiline?"m":"")+(ge.unicode?"u":"")+(ge.sticky?"y":""),Ze=0,J=new RegExp(ge.source,Ce+"g");(Se=c($,J,he))&&!((Ie=J.lastIndex)>Ze&&(R(Pe,F(he,Ze,Se.index)),Se.length>1&&Se.index<he.length&&l(D,Pe,L(Se,1)),Ke=Se[0].length,Ze=Ie,Pe.length>=be));)J.lastIndex===Se.index&&J.lastIndex++;return Ze===he.length?!Ke&&C(J,"")||R(Pe,""):R(Pe,F(he,Ze)),Pe.length>be?L(Pe,0,be):Pe}:"0".split(void 0,0).length?function(ge,ue){return ge===void 0&&ue===0?[]:c(ce,this,ge,ue)}:ce,[function(ge,ue){var he=E(this),be=ge==null?void 0:B(ge,le);return be?c(be,ge,he,ue):c(xe,N(he),ge,ue)},function(ge,ue){var he=S(this),be=N(ge),Se=ye(xe,he,be,ue,xe!==ce);if(Se.done)return Se.value;var Ie=A(he,RegExp),Ke=he.unicode,Pe=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(V?"g":"y"),Ce=new Ie(V?"^(?:"+he.source+")":he,Pe),Ze=ue===void 0?Z:ue>>>0;if(Ze===0)return[];if(be.length===0)return H(Ce,be)===null?[be]:[];for(var J=0,q=0,ae=[];q<be.length;){Ce.lastIndex=V?0:q;var _e,Ae=H(Ce,V?F(be,q):be);if(Ae===null||(_e=z(T(Ce.lastIndex+(V?q:0)),be.length))===J)q=P(be,q,Ke);else{if(R(ae,F(be,J,q)),ae.length===Ze)return ae;for(var we=1;we<=Ae.length-1;we++)if(R(ae,Ae[we]),ae.length===Ze)return ae;q=J=_e}}return R(ae,F(be,J)),ae}]},!Q,V)},function(s,f,i){var l=i(36),c=i(7),v=i(15),m=i(95),w=i(44),S=i(34),E=i(143),A=i(58),P=i(88),T=i(130),N=i(19),B=i(72).f,L=i(51).f,H=i(37).f,$=i(197),ie=i(159).trim,K="Number",V=c.Number,Z=V.prototype,z=c.TypeError,D=v("".slice),C=v("".charCodeAt),R=function(xe){var ge=T(xe,"number");return typeof ge=="bigint"?ge:F(ge)},F=function(xe){var ge,ue,he,be,Se,Ie,Ke,Pe,Ce=T(xe,"number");if(P(Ce))throw z("Cannot convert a Symbol value to a number");if(typeof Ce=="string"&&Ce.length>2){if(Ce=ie(Ce),(ge=C(Ce,0))===43||ge===45){if((ue=C(Ce,2))===88||ue===120)return NaN}else if(ge===48){switch(C(Ce,1)){case 66:case 98:he=2,be=49;break;case 79:case 111:he=8,be=55;break;default:return+Ce}for(Ie=(Se=D(Ce,2)).length,Ke=0;Ke<Ie;Ke++)if((Pe=C(Se,Ke))<48||Pe>be)return NaN;return parseInt(Se,he)}}return+Ce};if(m(K,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var Q,le=function(xe){var ge=arguments.length<1?0:V(R(xe)),ue=this;return A(Z,ue)&&N(function(){$(ue)})?E(Object(ge),ue,le):ge},ce=l?B(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ye=0;ce.length>ye;ye++)S(V,Q=ce[ye])&&!S(le,Q)&&H(le,Q,L(V,Q));le.prototype=Z,Z.constructor=le,w(c,K,le)}},function(s,f,i){i(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(s,f,i){var l=i(17),c=i(214),v=i(83);l({target:"Array",proto:!0},{fill:c}),v("fill")},function(s,f,i){var l=i(7),c=i(15),v=i(19),m=i(50),w=l.Object,S=c("".split);s.exports=v(function(){return!w("z").propertyIsEnumerable(0)})?function(E){return m(E)=="String"?S(E,""):w(E)}:w},function(s,f){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(l){typeof window=="object"&&(i=window)}s.exports=i},function(s,f,i){var l=i(27),c=i(54),v=i(37),m=l("unscopables"),w=Array.prototype;w[m]==null&&v.f(w,m,{configurable:!0,value:c(null)}),s.exports=function(S){w[m][S]=!0}},function(s,f,i){var l=i(64),c=i(107);(s.exports=function(v,m){return c[v]||(c[v]=m!==void 0?m:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(s,f,i){var l=i(15),c=0,v=Math.random(),m=l(1 .toString);s.exports=function(w){return"Symbol("+(w===void 0?"":w)+")_"+m(++c+v,36)}},function(s,f,i){var l=i(7),c=i(33),v=l.document,m=c(v)&&c(v.createElement);s.exports=function(w){return m?v.createElement(w):{}}},function(s,f,i){var l=i(130),c=i(88);s.exports=function(v){var m=l(v,"string");return c(m)?m:m+""}},function(s,f,i){var l=i(7),c=i(46),v=i(28),m=i(58),w=i(128),S=l.Object;s.exports=w?function(E){return typeof E=="symbol"}:function(E){var A=c("Symbol");return v(A)&&m(A.prototype,S(E))}},function(s,f,i){var l=i(7).String;s.exports=function(c){try{return l(c)}catch(v){return"Object"}}},function(s,f,i){var l=i(68),c=Math.min;s.exports=function(v){return v>0?c(l(v),9007199254740991):0}},function(s,f,i){var l=i(84),c=i(85),v=l("keys");s.exports=function(m){return v[m]||(v[m]=c(m))}},function(s,f,i){var l=i(15),c=i(28),v=i(107),m=l(Function.toString);c(v.inspectSource)||(v.inspectSource=function(w){return m(w)}),s.exports=v.inspectSource},function(s,f,i){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!l.call({1:2},1);f.f=v?function(m){var w=c(this,m);return!!w&&w.enumerable}:l},function(s,f,i){var l=i(36),c=i(34),v=Function.prototype,m=l&&Object.getOwnPropertyDescriptor,w=c(v,"name"),S=w&&function(){}.name==="something",E=w&&(!l||l&&m(v,"name").configurable);s.exports={EXISTS:w,PROPER:S,CONFIGURABLE:E}},function(s,f,i){var l=i(19),c=i(28),v=/#|\.prototype\./,m=function(P,T){var N=S[w(P)];return N==A||N!=E&&(c(T)?l(T):!!T)},w=m.normalize=function(P){return String(P).replace(v,".").toLowerCase()},S=m.data={},E=m.NATIVE="N",A=m.POLYFILL="P";s.exports=m},function(s,f,i){var l=i(7),c=i(34),v=i(28),m=i(38),w=i(91),S=i(137),E=w("IE_PROTO"),A=l.Object,P=A.prototype;s.exports=S?A.getPrototypeOf:function(T){var N=m(T);if(c(N,E))return N[E];var B=N.constructor;return v(B)&&N instanceof B?B.prototype:N instanceof A?P:null}},function(s,f,i){var l=i(15),c=i(32),v=i(173);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m,w=!1,S={};try{(m=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(S,[]),w=S instanceof Array}catch(E){}return function(E,A){return c(E),v(A),w?m(E,A):E.__proto__=A,E}}():void 0)},function(s,f,i){var l=i(7),c=i(116),v=i(28),m=i(50),w=i(27)("toStringTag"),S=l.Object,E=m(function(){return arguments}())=="Arguments";s.exports=c?m:function(A){var P,T,N;return A===void 0?"Undefined":A===null?"Null":typeof(T=function(B,L){try{return B[L]}catch(H){}}(P=S(A),w))=="string"?T:E?m(P):(N=m(P))=="Object"&&v(P.callee)?"Arguments":N}},function(s,f,i){var l=i(50);s.exports=Array.isArray||function(c){return l(c)=="Array"}},function(s,f,i){var l=i(15),c=i(19),v=i(28),m=i(98),w=i(46),S=i(92),E=function(){},A=[],P=w("Reflect","construct"),T=/^\s*(?:class|function)\b/,N=l(T.exec),B=!T.exec(E),L=function(H){if(!v(H))return!1;try{return P(E,A,H),!0}catch($){return!1}};s.exports=!P||c(function(){var H;return L(L.call)||!L(Object)||!L(function(){H=!0})||H})?function(H){if(!v(H))return!1;switch(m(H)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return B||!!N(T,S(H))}:L},function(s,f,i){var l=i(15);s.exports=l([].slice)},function(s,f,i){var l,c,v=i(35),m=i(15),w=i(41),S=i(185),E=i(151),A=i(84),P=i(54),T=i(56).get,N=i(186),B=i(187),L=A("native-string-replace",String.prototype.replace),H=RegExp.prototype.exec,$=H,ie=m("".charAt),K=m("".indexOf),V=m("".replace),Z=m("".slice),z=(c=/b*/g,v(H,l=/a/,"a"),v(H,c,"a"),l.lastIndex!==0||c.lastIndex!==0),D=E.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0;(z||C||D||N||B)&&($=function(R){var F,Q,le,ce,ye,xe,ge,ue=this,he=T(ue),be=w(R),Se=he.raw;if(Se)return Se.lastIndex=ue.lastIndex,F=v($,Se,be),ue.lastIndex=Se.lastIndex,F;var Ie=he.groups,Ke=D&&ue.sticky,Pe=v(S,ue),Ce=ue.source,Ze=0,J=be;if(Ke&&(Pe=V(Pe,"y",""),K(Pe,"g")===-1&&(Pe+="g"),J=Z(be,ue.lastIndex),ue.lastIndex>0&&(!ue.multiline||ue.multiline&&ie(be,ue.lastIndex-1)!==`
`)&&(Ce="(?: "+Ce+")",J=" "+J,Ze++),Q=new RegExp("^(?:"+Ce+")",Pe)),C&&(Q=new RegExp("^"+Ce+"$(?!\\s)",Pe)),z&&(le=ue.lastIndex),ce=v(H,Ke?Q:ue,J),Ke?ce?(ce.input=Z(ce.input,Ze),ce[0]=Z(ce[0],Ze),ce.index=ue.lastIndex,ue.lastIndex+=ce[0].length):ue.lastIndex=0:z&&ce&&(ue.lastIndex=ue.global?ce.index+ce[0].length:le),C&&ce&&ce.length>1&&v(L,ce[0],Q,function(){for(ye=1;ye<arguments.length-2;ye++)arguments[ye]===void 0&&(ce[ye]=void 0)}),ce&&Ie)for(ce.groups=xe=P(null),ye=0;ye<Ie.length;ye++)xe[(ge=Ie[ye])[0]]=ce[ge[1]];return ce}),s.exports=$},function(s,f,i){var l=i(17),c=i(7),v=i(67),m=i(68),w=i(43),S=i(38),E=i(119),A=i(61),P=i(75)("splice"),T=c.TypeError,N=Math.max,B=Math.min,L=9007199254740991,H="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!P},{splice:function($,ie){var K,V,Z,z,D,C,R=S(this),F=w(R),Q=v($,F),le=arguments.length;if(le===0?K=V=0:le===1?(K=0,V=F-Q):(K=le-2,V=B(N(m(ie),0),F-Q)),F+K-V>L)throw T(H);for(Z=E(R,V),z=0;z<V;z++)(D=Q+z)in R&&A(Z,z,R[D]);if(Z.length=V,K<V){for(z=Q;z<F-V;z++)C=z+K,(D=z+V)in R?R[C]=R[D]:delete R[C];for(z=F;z>F-V+K;z--)delete R[z-1]}else if(K>V)for(z=F-V;z>Q;z--)C=z+K-1,(D=z+V-1)in R?R[C]=R[D]:delete R[C];for(z=0;z<K;z++)R[z+Q]=arguments[z+2];return R.length=F-V+K,Z}})},function(s,f,i){var l=i(17),c=i(202);l({target:"String",proto:!0,forced:i(203)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(s,f,i){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;f.a=c}).call(this,i(82))},function(s,f,i){(function(l){var c=i(31),v=h&&!h.nodeType&&h,m=v&&typeof l=="object"&&l&&!l.nodeType&&l,w=m&&m.exports===v?c.a.Buffer:void 0,S=w?w.allocUnsafe:void 0;f.a=function(E,A){if(A)return E.slice();var P=E.length,T=S?S(P):new E.constructor(P);return E.copy(T),T}}).call(this,i(121)(s))},function(s,f,i){var l=i(7),c=i(108),v="__core-js_shared__",m=l[v]||c(v,{});s.exports=m},function(s,f,i){var l=i(7),c=Object.defineProperty;s.exports=function(v,m){try{c(l,v,{value:m,configurable:!0,writable:!0})}catch(w){l[v]=m}return m}},function(s,f,i){var l=i(65),c=i(19);s.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(s,f){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(s,f,i){var l=i(17),c=i(35),v=i(64),m=i(94),w=i(28),S=i(172),E=i(96),A=i(97),P=i(73),T=i(57),N=i(44),B=i(27),L=i(70),H=i(136),$=m.PROPER,ie=m.CONFIGURABLE,K=H.IteratorPrototype,V=H.BUGGY_SAFARI_ITERATORS,Z=B("iterator"),z="keys",D="values",C="entries",R=function(){return this};s.exports=function(F,Q,le,ce,ye,xe,ge){S(le,Q,ce);var ue,he,be,Se=function(q){if(q===ye&&Ze)return Ze;if(!V&&q in Pe)return Pe[q];switch(q){case z:case D:case C:return function(){return new le(this,q)}}return function(){return new le(this)}},Ie=Q+" Iterator",Ke=!1,Pe=F.prototype,Ce=Pe[Z]||Pe["@@iterator"]||ye&&Pe[ye],Ze=!V&&Ce||Se(ye),J=Q=="Array"&&Pe.entries||Ce;if(J&&(ue=E(J.call(new F)))!==Object.prototype&&ue.next&&(v||E(ue)===K||(A?A(ue,K):w(ue[Z])||N(ue,Z,R)),P(ue,Ie,!0,!0),v&&(L[Ie]=R)),$&&ye==D&&Ce&&Ce.name!==D&&(!v&&ie?T(Pe,"name",D):(Ke=!0,Ze=function(){return c(Ce,this)})),ye)if(he={values:Se(D),keys:xe?Ze:Se(z),entries:Se(C)},ge)for(be in he)(V||Ke||!(be in Pe))&&N(Pe,be,he[be]);else l({target:Q,proto:!0,forced:V||Ke},he);return v&&!ge||Pe[Z]===Ze||N(Pe,Z,Ze,{name:ye}),L[Q]=Ze,he}},function(s,f){f.f=Object.getOwnPropertySymbols},function(s,f,i){var l=i(7),c=i(67),v=i(43),m=i(61),w=l.Array,S=Math.max;s.exports=function(E,A,P){for(var T=v(E),N=c(A,T),B=c(P===void 0?T:P,T),L=w(S(B-N,0)),H=0;N<B;N++,H++)m(L,H,E[N]);return L.length=H,L}},function(s,f,i){var l=i(7),c=i(62),v=i(35),m=i(32),w=i(89),S=i(140),E=i(43),A=i(58),P=i(141),T=i(115),N=i(142),B=l.TypeError,L=function($,ie){this.stopped=$,this.result=ie},H=L.prototype;s.exports=function($,ie,K){var V,Z,z,D,C,R,F,Q=K&&K.that,le=!(!K||!K.AS_ENTRIES),ce=!(!K||!K.IS_ITERATOR),ye=!(!K||!K.INTERRUPTED),xe=c(ie,Q),ge=function(he){return V&&N(V,"normal",he),new L(!0,he)},ue=function(he){return le?(m(he),ye?xe(he[0],he[1],ge):xe(he[0],he[1])):ye?xe(he,ge):xe(he)};if(ce)V=$;else{if(!(Z=T($)))throw B(w($)+" is not iterable");if(S(Z)){for(z=0,D=E($);D>z;z++)if((C=ue($[z]))&&A(H,C))return C;return new L(!1)}V=P($,Z)}for(R=V.next;!(F=v(R,V)).done;){try{C=ue(F.value)}catch(he){N(V,"throw",he)}if(typeof C=="object"&&C&&A(H,C))return C}return new L(!1)}},function(s,f,i){var l=i(98),c=i(59),v=i(70),m=i(27)("iterator");s.exports=function(w){if(w!=null)return c(w,m)||c(w,"@@iterator")||v[l(w)]}},function(s,f,i){var l={};l[i(27)("toStringTag")]="z",s.exports=String(l)==="[object z]"},function(s,f,i){var l=i(7),c=i(58),v=l.TypeError;s.exports=function(m,w){if(c(w,m))return m;throw v("Incorrect invocation")}},function(s,f,i){var l=i(27)("iterator"),c=!1;try{var v=0,m={next:function(){return{done:!!v++}},return:function(){c=!0}};m[l]=function(){return this},Array.from(m,function(){throw 2})}catch(w){}s.exports=function(w,S){if(!S&&!c)return!1;var E=!1;try{var A={};A[l]=function(){return{next:function(){return{done:E=!0}}}},w(A)}catch(P){}return E}},function(s,f,i){var l=i(181);s.exports=function(c,v){return new(l(c))(v===0?0:v)}},function(s,f,i){var l=i(19);s.exports=function(c,v){var m=[][c];return!!m&&l(function(){m.call(null,v||function(){throw 1},1)})}},function(s,f){s.exports=function(i){if(!i.webpackPolyfill){var l=Object.create(i);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(s,f,i){i(18);var l=i(15),c=i(44),v=i(102),m=i(19),w=i(27),S=i(57),E=w("species"),A=RegExp.prototype;s.exports=function(P,T,N,B){var L=w(P),H=!m(function(){var V={};return V[L]=function(){return 7},""[P](V)!=7}),$=H&&!m(function(){var V=!1,Z=/a/;return P==="split"&&((Z={}).constructor={},Z.constructor[E]=function(){return Z},Z.flags="",Z[L]=/./[L]),Z.exec=function(){return V=!0,null},Z[L](""),!V});if(!H||!$||N){var ie=l(/./[L]),K=T(L,""[P],function(V,Z,z,D,C){var R=l(V),F=Z.exec;return F===v||F===A.exec?H&&!C?{done:!0,value:ie(Z,z,D)}:{done:!0,value:R(z,Z,D)}:{done:!1}});c(String.prototype,P,K[0]),c(A,L,K[1])}B&&S(A[L],"sham",!0)}},function(s,f,i){var l=i(146).charAt;s.exports=function(c,v,m){return v+(m?l(c,v).length:1)}},function(s,f,i){var l=i(7),c=i(35),v=i(32),m=i(28),w=i(50),S=i(102),E=l.TypeError;s.exports=function(A,P){var T=A.exec;if(m(T)){var N=c(T,A,P);return N!==null&&v(N),N}if(w(A)==="RegExp")return c(S,A,P);throw E("RegExp#exec called on incompatible receiver")}},function(s,f,i){var l=i(76),c=i(35),v=i(15),m=i(122),w=i(19),S=i(32),E=i(28),A=i(68),P=i(90),T=i(41),N=i(45),B=i(123),L=i(59),H=i(198),$=i(124),ie=i(27)("replace"),K=Math.max,V=Math.min,Z=v([].concat),z=v([].push),D=v("".indexOf),C=v("".slice),R="a".replace(/./,"$0")==="$0",F=!!/./[ie]&&/./[ie]("a","$0")==="";m("replace",function(Q,le,ce){var ye=F?"$":"$0";return[function(xe,ge){var ue=N(this),he=xe==null?void 0:L(xe,ie);return he?c(he,xe,ue,ge):c(le,T(ue),xe,ge)},function(xe,ge){var ue=S(this),he=T(xe);if(typeof ge=="string"&&D(ge,ye)===-1&&D(ge,"$<")===-1){var be=ce(le,ue,he,ge);if(be.done)return be.value}var Se=E(ge);Se||(ge=T(ge));var Ie=ue.global;if(Ie){var Ke=ue.unicode;ue.lastIndex=0}for(var Pe=[];;){var Ce=$(ue,he);if(Ce===null||(z(Pe,Ce),!Ie))break;T(Ce[0])===""&&(ue.lastIndex=B(he,P(ue.lastIndex),Ke))}for(var Ze,J="",q=0,ae=0;ae<Pe.length;ae++){for(var _e=T((Ce=Pe[ae])[0]),Ae=K(V(A(Ce.index),he.length),0),we=[],qe=1;qe<Ce.length;qe++)z(we,(Ze=Ce[qe])===void 0?Ze:String(Ze));var nt=Ce.groups;if(Se){var $e=Z([_e],we,Ae,he);nt!==void 0&&z($e,nt);var Ye=T(l(ge,void 0,$e))}else Ye=H(_e,he,Ae,we,nt,ge);Ae>=q&&(J+=C(he,q,Ae)+Ye,q=Ae+_e.length)}return J+C(he,q)}]},!!w(function(){var Q=/./;return Q.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(Q,"$<a>")!=="7"})||!R||F)},function(s,f,i){var l=i(50),c=i(7);s.exports=l(c.process)=="process"},function(s,f,i){i(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(s,f,i){var l=i(109);s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(s,f,i){var l=i(36),c=i(19),v=i(86);s.exports=!l&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(s,f,i){var l=i(7),c=i(35),v=i(33),m=i(88),w=i(59),S=i(170),E=i(27),A=l.TypeError,P=E("toPrimitive");s.exports=function(T,N){if(!v(T)||m(T))return T;var B,L=w(T,P);if(L){if(N===void 0&&(N="default"),B=c(L,T,N),!v(B)||m(B))return B;throw A("Can't convert object to primitive value")}return N===void 0&&(N="number"),S(T,N)}},function(s,f,i){var l=i(15),c=i(34),v=i(40),m=i(132).indexOf,w=i(69),S=l([].push);s.exports=function(E,A){var P,T=v(E),N=0,B=[];for(P in T)!c(w,P)&&c(T,P)&&S(B,P);for(;A.length>N;)c(T,P=A[N++])&&(~m(B,P)||S(B,P));return B}},function(s,f,i){var l=i(40),c=i(67),v=i(43),m=function(w){return function(S,E,A){var P,T=l(S),N=v(T),B=c(A,N);if(w&&E!=E){for(;N>B;)if((P=T[B++])!=P)return!0}else for(;N>B;B++)if((w||B in T)&&T[B]===E)return w||B||0;return!w&&-1}};s.exports={includes:m(!0),indexOf:m(!1)}},function(s,f,i){var l=i(46);s.exports=l("document","documentElement")},function(s,f,i){var l=i(34),c=i(135),v=i(51),m=i(37);s.exports=function(w,S){for(var E=c(S),A=m.f,P=v.f,T=0;T<E.length;T++){var N=E[T];l(w,N)||A(w,N,P(S,N))}}},function(s,f,i){var l=i(46),c=i(15),v=i(72),m=i(112),w=i(32),S=c([].concat);s.exports=l("Reflect","ownKeys")||function(E){var A=v.f(w(E)),P=m.f;return P?S(A,P(E)):A}},function(s,f,i){var l,c,v,m=i(19),w=i(28),S=i(54),E=i(96),A=i(44),P=i(27),T=i(64),N=P("iterator"),B=!1;[].keys&&("next"in(v=[].keys())?(c=E(E(v)))!==Object.prototype&&(l=c):B=!0),l==null||m(function(){var L={};return l[N].call(L)!==L})?l={}:T&&(l=S(l)),w(l[N])||A(l,N,function(){return this}),s.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:B}},function(s,f,i){var l=i(19);s.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(s,f,i){var l=i(17),c=i(15),v=i(69),m=i(33),w=i(34),S=i(37).f,E=i(72),A=i(139),P=i(175),T=i(85),N=i(177),B=!1,L=T("meta"),H=0,$=function(K){S(K,L,{value:{objectID:"O"+H++,weakData:{}}})},ie=s.exports={enable:function(){ie.enable=function(){},B=!0;var K=E.f,V=c([].splice),Z={};Z[L]=1,K(Z).length&&(E.f=function(z){for(var D=K(z),C=0,R=D.length;C<R;C++)if(D[C]===L){V(D,C,1);break}return D},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:A.f}))},fastKey:function(K,V){if(!m(K))return typeof K=="symbol"?K:(typeof K=="string"?"S":"P")+K;if(!w(K,L)){if(!P(K))return"F";if(!V)return"E";$(K)}return K[L].objectID},getWeakData:function(K,V){if(!w(K,L)){if(!P(K))return!0;if(!V)return!1;$(K)}return K[L].weakData},onFreeze:function(K){return N&&B&&P(K)&&!w(K,L)&&$(K),K}};v[L]=!0},function(s,f,i){var l=i(50),c=i(40),v=i(72).f,m=i(113),w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(S){return w&&l(S)=="Window"?function(E){try{return v(E)}catch(A){return m(w)}}(S):v(c(S))}},function(s,f,i){var l=i(27),c=i(70),v=l("iterator"),m=Array.prototype;s.exports=function(w){return w!==void 0&&(c.Array===w||m[v]===w)}},function(s,f,i){var l=i(7),c=i(35),v=i(55),m=i(32),w=i(89),S=i(115),E=l.TypeError;s.exports=function(A,P){var T=arguments.length<2?S(A):P;if(v(T))return m(c(T,A));throw E(w(A)+" is not iterable")}},function(s,f,i){var l=i(35),c=i(32),v=i(59);s.exports=function(m,w,S){var E,A;c(m);try{if(!(E=v(m,"return"))){if(w==="throw")throw S;return S}E=l(E,m)}catch(P){A=!0,E=P}if(w==="throw")throw S;if(A)throw E;return c(E),S}},function(s,f,i){var l=i(28),c=i(33),v=i(97);s.exports=function(m,w,S){var E,A;return v&&l(E=w.constructor)&&E!==S&&c(A=E.prototype)&&A!==S.prototype&&v(m,A),m}},function(s,f,i){var l=i(44);s.exports=function(c,v,m){for(var w in v)l(c,w,v[w],m);return c}},function(s,f,i){var l=i(46),c=i(37),v=i(27),m=i(36),w=v("species");s.exports=function(S){var E=l(S),A=c.f;m&&E&&!E[w]&&A(E,w,{configurable:!0,get:function(){return this}})}},function(s,f,i){var l=i(15),c=i(68),v=i(41),m=i(45),w=l("".charAt),S=l("".charCodeAt),E=l("".slice),A=function(P){return function(T,N){var B,L,H=v(m(T)),$=c(N),ie=H.length;return $<0||$>=ie?P?"":void 0:(B=S(H,$))<55296||B>56319||$+1===ie||(L=S(H,$+1))<56320||L>57343?P?w(H,$):B:P?E(H,$,$+2):L-56320+(B-55296<<10)+65536}};s.exports={codeAt:A(!1),charAt:A(!0)}},function(s,f){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(s,f,i){var l=i(86)("span").classList,c=l&&l.constructor&&l.constructor.prototype;s.exports=c===Object.prototype?void 0:c},function(s,f,i){var l=i(27);f.f=l},function(s,f,i){var l=i(182),c=i(34),v=i(149),m=i(37).f;s.exports=function(w){var S=l.Symbol||(l.Symbol={});c(S,w)||m(S,w,{value:v.f(w)})}},function(s,f,i){var l=i(19),c=i(7).RegExp,v=l(function(){var S=c("a","y");return S.lastIndex=2,S.exec("abcd")!=null}),m=v||l(function(){return!c("a","y").sticky}),w=v||l(function(){var S=c("^r","gy");return S.lastIndex=2,S.exec("str")!=null});s.exports={BROKEN_CARET:w,MISSED_STICKY:m,UNSUPPORTED_Y:v}},function(s,f,i){var l=i(17),c=i(132).includes,v=i(83);l({target:"Array",proto:!0},{includes:function(m){return c(this,m,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(s,f,i){var l=i(17),c=i(15),v=i(194),m=i(45),w=i(41),S=i(195),E=c("".indexOf);l({target:"String",proto:!0,forced:!S("includes")},{includes:function(A){return!!~E(w(m(this)),w(v(A)),arguments.length>1?arguments[1]:void 0)}})},function(s,f,i){var l=i(33),c=i(50),v=i(27)("match");s.exports=function(m){var w;return l(m)&&((w=m[v])!==void 0?!!w:c(m)=="RegExp")}},function(s,f){var i,l,c=s.exports={};function v(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}function w(H){if(i===setTimeout)return setTimeout(H,0);if((i===v||!i)&&setTimeout)return i=setTimeout,setTimeout(H,0);try{return i(H,0)}catch($){try{return i.call(null,H,0)}catch(ie){return i.call(this,H,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:v}catch(H){i=v}try{l=typeof clearTimeout=="function"?clearTimeout:m}catch(H){l=m}})();var S,E=[],A=!1,P=-1;function T(){A&&S&&(A=!1,S.length?E=S.concat(E):P=-1,E.length&&N())}function N(){if(!A){var H=w(T);A=!0;for(var $=E.length;$;){for(S=E,E=[];++P<$;)S&&S[P].run();P=-1,$=E.length}S=null,A=!1,function(ie){if(l===clearTimeout)return clearTimeout(ie);if((l===m||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(ie);try{l(ie)}catch(K){try{return l.call(null,ie)}catch(V){return l.call(this,ie)}}}(H)}}function B(H,$){this.fun=H,this.array=$}function L(){}c.nextTick=function(H){var $=new Array(arguments.length-1);if(arguments.length>1)for(var ie=1;ie<arguments.length;ie++)$[ie-1]=arguments[ie];E.push(new B(H,$)),E.length!==1||A||w(N)},B.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=L,c.addListener=L,c.once=L,c.off=L,c.removeListener=L,c.removeAllListeners=L,c.emit=L,c.prependListener=L,c.prependOnceListener=L,c.listeners=function(H){return[]},c.binding=function(H){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(H){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(s,f,i){var l=i(32),c=i(157),v=i(27)("species");s.exports=function(m,w){var S,E=l(m).constructor;return E===void 0||(S=l(E)[v])==null?w:c(S)}},function(s,f,i){var l=i(7),c=i(100),v=i(89),m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(v(w)+" is not a constructor")}},function(s,f,i){var l=i(17),c=i(159).trim;l({target:"String",proto:!0,forced:i(196)("trim")},{trim:function(){return c(this)}})},function(s,f,i){var l=i(15),c=i(45),v=i(41),m=i(160),w=l("".replace),S="["+m+"]",E=RegExp("^"+S+S+"*"),A=RegExp(S+S+"*$"),P=function(T){return function(N){var B=v(c(N));return 1&T&&(B=w(B,E,"")),2&T&&(B=w(B,A,"")),B}};s.exports={start:P(1),end:P(2),trim:P(3)}},function(s,f){s.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(s,f,i){var l=i(35),c=i(122),v=i(32),m=i(90),w=i(41),S=i(45),E=i(59),A=i(123),P=i(124);c("match",function(T,N,B){return[function(L){var H=S(this),$=L==null?void 0:E(L,T);return $?l($,L,H):new RegExp(L)[T](w(H))},function(L){var H=v(this),$=w(L),ie=B(N,H,$);if(ie.done)return ie.value;if(!H.global)return P(H,$);var K=H.unicode;H.lastIndex=0;for(var V,Z=[],z=0;(V=P(H,$))!==null;){var D=w(V[0]);Z[z]=D,D===""&&(H.lastIndex=A($,m(H.lastIndex),K)),z++}return z===0?null:Z}]})},function(s,f,i){var l=i(17),c=Math.hypot,v=Math.abs,m=Math.sqrt;l({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(w,S){for(var E,A,P=0,T=0,N=arguments.length,B=0;T<N;)B<(E=v(arguments[T++]))?(P=P*(A=B/E)*A+1,B=E):P+=E>0?(A=E/B)*A:E;return B===1/0?1/0:B*m(P)}})},function(s,f,i){var l,c,v,m,w=i(7),S=i(76),E=i(62),A=i(28),P=i(34),T=i(19),N=i(133),B=i(101),L=i(86),H=i(164),$=i(126),ie=w.setImmediate,K=w.clearImmediate,V=w.process,Z=w.Dispatch,z=w.Function,D=w.MessageChannel,C=w.String,R=0,F={},Q="onreadystatechange";try{l=w.location}catch(ge){}var le=function(ge){if(P(F,ge)){var ue=F[ge];delete F[ge],ue()}},ce=function(ge){return function(){le(ge)}},ye=function(ge){le(ge.data)},xe=function(ge){w.postMessage(C(ge),l.protocol+"//"+l.host)};ie&&K||(ie=function(ge){var ue=B(arguments,1);return F[++R]=function(){S(A(ge)?ge:z(ge),void 0,ue)},c(R),R},K=function(ge){delete F[ge]},$?c=function(ge){V.nextTick(ce(ge))}:Z&&Z.now?c=function(ge){Z.now(ce(ge))}:D&&!H?(m=(v=new D).port2,v.port1.onmessage=ye,c=E(m.postMessage,m)):w.addEventListener&&A(w.postMessage)&&!w.importScripts&&l&&l.protocol!=="file:"&&!T(xe)?(c=xe,w.addEventListener("message",ye,!1)):c=Q in L("script")?function(ge){N.appendChild(L("script")).onreadystatechange=function(){N.removeChild(this),le(ge)}}:function(ge){setTimeout(ce(ge),0)}),s.exports={set:ie,clear:K}},function(s,f,i){var l=i(53);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(s,f,i){var l=i(55),c=function(v){var m,w;this.promise=new v(function(S,E){if(m!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");m=S,w=E}),this.resolve=l(m),this.reject=l(w)};s.exports.f=function(v){return new c(v)}},function(s,f,i){f.a=function(){return!1}},function(s,f,i){(function(l){i.d(f,"a",function(){return V});var c=i(1);function v(D){throw new Error("[mobx-utils] "+D)}function m(D,C){C===void 0&&(C="Illegal state"),D||v(C)}var w=function(D){return D&&D!==Object.prototype&&Object.getOwnPropertyNames(D).concat(w(Object.getPrototypeOf(D))||[])},S=function(D){return function(C){var R=w(C);return R.filter(function(F,Q){return R.indexOf(F)===Q})}(D).filter(function(C){return C!=="constructor"&&!~C.indexOf("__")})},E="pending",A="fulfilled",P="rejected";function T(D){switch(this.state){case E:return D.pending&&D.pending(this.value);case P:return D.rejected&&D.rejected(this.value);case A:return D.fulfilled?D.fulfilled(this.value):this.value}}function N(D,C){if(m(arguments.length<=2,"fromPromise expects up to two arguments"),m(typeof D=="function"||typeof D=="object"&&D&&typeof D.then=="function","Please pass a promise or function to fromPromise"),D.isPromiseBasedObservable===!0)return D;typeof D=="function"&&(D=new Promise(D));var R=D;D.then(Object(c.k)("observableFromPromise-resolve",function(Q){R.value=Q,R.state=A}),Object(c.k)("observableFromPromise-reject",function(Q){R.value=Q,R.state=P})),R.isPromiseBasedObservable=!0,R.case=T;var F=C&&C.state===A?C.value:void 0;return Object(c.q)(R,{value:F,state:E},{},{deep:!1}),R}(function(D){D.reject=Object(c.k)("fromPromise.reject",function(C){var R=D(Promise.reject(C));return R.state=P,R.value=C,R}),D.resolve=Object(c.k)("fromPromise.resolve",function(C){C===void 0&&(C=void 0);var R=D(Promise.resolve(C));return R.state=A,R.value=C,R})})(N||(N={}));var B=function(D,C,R,F){var Q,le=arguments.length,ce=le<3?C:F===null?F=Object.getOwnPropertyDescriptor(C,R):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(D,C,R,F);else for(var ye=D.length-1;ye>=0;ye--)(Q=D[ye])&&(ce=(le<3?Q(ce):le>3?Q(C,R,ce):Q(C,R))||ce);return le>3&&ce&&Object.defineProperty(C,R,ce),ce};(function(){function D(C,R){var F=this;Object(c.G)(function(){F.current=R,F.subscription=C.subscribe(F)})}D.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},D.prototype.next=function(C){this.current=C},D.prototype.complete=function(){this.dispose()},D.prototype.error=function(C){this.current=C,this.dispose()},B([c.C.ref],D.prototype,"current",void 0),B([c.k.bound],D.prototype,"next",null),B([c.k.bound],D.prototype,"complete",null),B([c.k.bound],D.prototype,"error",null)})();var L=function(){return L=Object.assign||function(D){for(var C,R=1,F=arguments.length;R<F;R++)for(var Q in C=arguments[R])Object.prototype.hasOwnProperty.call(C,Q)&&(D[Q]=C[Q]);return D},L.apply(this,arguments)},H=function(D,C,R,F){var Q,le=arguments.length,ce=le<3?C:F===null?F=Object.getOwnPropertyDescriptor(C,R):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(D,C,R,F);else for(var ye=D.length-1;ye>=0;ye--)(Q=D[ye])&&(ce=(le<3?Q(ce):le>3?Q(C,R,ce):Q(C,R))||ce);return le>3&&ce&&Object.defineProperty(C,R,ce),ce},$=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function D(C){var R=this;this.model=C,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(F){return R.localValues.has(F)},m(Object(c.A)(C),"createViewModel expects an observable object"),S(C).forEach(function(F){if(F!==c.a&&F!=="__mobxDidRunLazyInitializers"){if(m($.indexOf(F)===-1,"The propertyname "+F+" is reserved and cannot be used with viewModels"),Object(c.w)(C,F)){var Q=Object(c.h)(C,F).derivation;R.localComputedValues.set(F,Object(c.m)(Q.bind(R)))}var le=Object.getOwnPropertyDescriptor(C,F),ce=le?{enumerable:le.enumerable}:{};Object.defineProperty(R,F,L(L({},ce),{configurable:!0,get:function(){return Object(c.w)(C,F)?R.localComputedValues.get(F).get():R.isPropertyDirty(F)?R.localValues.get(F):R.model[F]},set:Object(c.k)(function(ye){ye!==R.model[F]?R.localValues.set(F,ye):R.localValues.delete(F)})}))}})}Object.defineProperty(D.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),D.prototype.submit=function(){var C=this;Object(c.B)(this.localValues).forEach(function(R){var F=C.localValues.get(R),Q=C.model[R];Object(c.y)(Q)?Q.replace(F):Object(c.z)(Q)?(Q.clear(),Q.merge(F)):Object(c.v)(F)||(C.model[R]=F)}),this.localValues.clear()},D.prototype.reset=function(){this.localValues.clear()},D.prototype.resetProperty=function(C){this.localValues.delete(C)},H([c.m],D.prototype,"isDirty",null),H([c.m],D.prototype,"changedValues",null),H([c.k.bound],D.prototype,"submit",null),H([c.k.bound],D.prototype,"reset",null),H([c.k.bound],D.prototype,"resetProperty",null)})();function ie(D){if(!D)return"ROOT";for(var C=[];D.parent;)C.push(D.path),D=D.parent;return C.reverse().join("/")}function K(D){return Object(c.A)(D)||Object(c.y)(D)||Object(c.z)(D)}function V(D,C){var R=new WeakMap;function F(ce){var ye=R.get(ce.object);(function(xe,ge){switch(xe.type){case"add":Q(xe.newValue,ge,xe.name);break;case"update":le(xe.oldValue),Q(xe.newValue,ge,xe.name||""+xe.index);break;case"remove":case"delete":le(xe.oldValue);break;case"splice":xe.removed.map(le),xe.added.forEach(function(be,Se){return Q(be,ge,""+(xe.index+Se))});for(var ue=xe.index+xe.addedCount;ue<xe.object.length;ue++)if(K(xe.object[ue])){var he=R.get(xe.object[ue]);he&&(he.path=""+ue)}}})(ce,ye),C(ce,ie(ye),D)}function Q(ce,ye,xe){if(K(ce)){var ge=R.get(ce);if(ge){if(ge.parent!==ye||ge.path!==xe)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+ie(ye)+"/"+xe+"', but it already exists at '"+ie(ge.parent)+"/"+ge.path+"'")}else{var ue={parent:ye,path:xe,dispose:Object(c.D)(ce,F)};R.set(ce,ue),Object(c.p)(ce).forEach(function(he){var be=he[0];return Q(he[1],ue,be)})}}}function le(ce){if(K(ce)){var ye=R.get(ce);if(!ye)return;R.delete(ce),ye.dispose(),Object(c.L)(ce).forEach(le)}}return Q(D,void 0,""),function(){le(D)}}var Z,z=(Z=function(D,C){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,F){R.__proto__=F}||function(R,F){for(var Q in F)F.hasOwnProperty(Q)&&(R[Q]=F[Q])},Z(D,C)},function(D,C){function R(){this.constructor=D}Z(D,C),D.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)});(function(D){function C(R,F,Q){var le=Q===void 0?{}:Q,ce=le.name,ye=ce===void 0?"ogm"+(1e3*Math.random()|0):ce,xe=le.keyToName,ge=xe===void 0?function(be){return""+be}:xe,ue=D.call(this)||this;ue._keyToName=ge,ue._groupBy=F,ue._ogmInfoKey=Symbol("ogmInfo"+ye),ue._base=R;for(var he=0;he<R.length;he++)ue._addItem(R[he]);return ue._disposeBaseObserver=Object(c.D)(ue._base,function(be){if(be.type==="splice")Object(c.J)(function(){for(var Se=0,Ie=be.removed;Se<Ie.length;Se++){var Ke=Ie[Se];ue._removeItem(Ke)}for(var Pe=0,Ce=be.added;Pe<Ce.length;Pe++){var Ze=Ce[Pe];ue._addItem(Ze)}});else{if(be.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ue._removeItem(be.oldValue),ue._addItem(be.newValue)})}}),ue}z(C,D),C.prototype.clear=function(){throw new Error("not supported")},C.prototype.delete=function(R){throw new Error("not supported")},C.prototype.set=function(R,F){throw new Error("not supported")},C.prototype.dispose=function(){this._disposeBaseObserver();for(var R=0;R<this._base.length;R++){var F=this._base[R];F[this._ogmInfoKey].reaction(),delete F[this._ogmInfoKey]}},C.prototype._getGroupArr=function(R){var F=D.prototype.get.call(this,R);return F===void 0&&(F=Object(c.C)([],{name:"GroupArray["+this._keyToName(R)+"]",deep:!1}),D.prototype.set.call(this,R,F)),F},C.prototype._removeFromGroupArr=function(R,F){var Q=D.prototype.get.call(this,R);Q.length===1?D.prototype.delete.call(this,R):(F===Q.length-1||(Q[F]=Q[Q.length-1],Q[F][this._ogmInfoKey].groupArrIndex=F),Q.length--)},C.prototype._addItem=function(R){var F=this,Q=this._groupBy(R),le=this._getGroupArr(Q),ce={groupByValue:Q,groupArrIndex:le.length,reaction:Object(c.F)(function(){return F._groupBy(R)},function(ye,xe){var ge=R[F._ogmInfoKey];F._removeFromGroupArr(ge.groupByValue,ge.groupArrIndex);var ue=F._getGroupArr(ye),he=ue.length;ue.push(R),ge.groupByValue=ye,ge.groupArrIndex=he})};Object.defineProperty(R,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ce}),le.push(R)},C.prototype._removeItem=function(R){var F=R[this._ogmInfoKey];this._removeFromGroupArr(F.groupByValue,F.groupArrIndex),F.reaction(),delete R[this._ogmInfoKey]}})(c.b),function(){function D(C,R){this.base=C,this.args=R,this.closestIdx=0,this.isDisposed=!1;for(var F=this.closest=this.root=C,Q=0;Q<this.args.length-1&&(F=F.get(R[Q]));Q++)this.closest=F;this.closestIdx=Q}return D.prototype.exists=function(){this.assertNotDisposed();var C=this.args.length;return this.closestIdx>=C-1&&this.closest.has(this.args[C-1])},D.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},D.prototype.set=function(C){this.assertNotDisposed();for(var R=this.args.length,F=this.closest,Q=this.closestIdx;Q<R-1;Q++){var le=new Map;F.set(this.args[Q],le),F=le}this.closestIdx=R-1,this.closest=F,F.set(this.args[R-1],C)},D.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var C=this.args.length;this.closest.delete(this.args[C-1]);for(var R=this.root,F=[R],Q=0;Q<C-1;Q++)R=R.get(this.args[Q]),F.push(R);for(Q=F.length-1;Q>0;Q--)F[Q].size===0&&F[Q-1].delete(this.args[Q-1]);this.isDisposed=!0},D.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},D}(),Promise.resolve(),typeof queueMicrotask!="undefined"||l!==void 0&&l.nextTick}).call(this,i(155))},function(s,f,i){var l;(function(c,v,m){if(c){for(var w,S={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},P={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T=1;T<20;++T)S[111+T]="f"+T;for(T=0;T<=9;++T)S[T+96]=T.toString();K.prototype.bind=function(V,Z,z){var D=this;return V=V instanceof Array?V:[V],D._bindMultiple.call(D,V,Z,z),D},K.prototype.unbind=function(V,Z){return this.bind.call(this,V,function(){},Z)},K.prototype.trigger=function(V,Z){var z=this;return z._directMap[V+":"+Z]&&z._directMap[V+":"+Z]({},V),z},K.prototype.reset=function(){var V=this;return V._callbacks={},V._directMap={},V},K.prototype.stopCallback=function(V,Z){if((" "+Z.className+" ").indexOf(" mousetrap ")>-1||ie(Z,this.target))return!1;if("composedPath"in V&&typeof V.composedPath=="function"){var z=V.composedPath()[0];z!==V.target&&(Z=z)}return Z.tagName=="INPUT"||Z.tagName=="SELECT"||Z.tagName=="TEXTAREA"||Z.isContentEditable},K.prototype.handleKey=function(){var V=this;return V._handleKey.apply(V,arguments)},K.addKeycodes=function(V){for(var Z in V)V.hasOwnProperty(Z)&&(S[Z]=V[Z]);w=null},K.init=function(){var V=K(v);for(var Z in V)Z.charAt(0)!=="_"&&(K[Z]=function(z){return function(){return V[z].apply(V,arguments)}}(Z))},K.init(),c.Mousetrap=K,s.exports&&(s.exports=K),(l=function(){return K}.call(f,i,f,s))===void 0||(s.exports=l)}function N(V,Z,z){V.addEventListener?V.addEventListener(Z,z,!1):V.attachEvent("on"+Z,z)}function B(V){if(V.type=="keypress"){var Z=String.fromCharCode(V.which);return V.shiftKey||(Z=Z.toLowerCase()),Z}return S[V.which]?S[V.which]:E[V.which]?E[V.which]:String.fromCharCode(V.which).toLowerCase()}function L(V){return V=="shift"||V=="ctrl"||V=="alt"||V=="meta"}function H(V,Z,z){return z||(z=function(){if(!w)for(var D in w={},S)D>95&&D<112||S.hasOwnProperty(D)&&(w[S[D]]=D);return w}()[V]?"keydown":"keypress"),z=="keypress"&&Z.length&&(z="keydown"),z}function $(V,Z){var z,D,C,R=[];for(z=function(F){return F==="+"?["+"]:(F=F.replace(/\+{2}/g,"+plus")).split("+")}(V),C=0;C<z.length;++C)D=z[C],P[D]&&(D=P[D]),Z&&Z!="keypress"&&A[D]&&(D=A[D],R.push("shift")),L(D)&&R.push(D);return{key:D,modifiers:R,action:Z=H(D,R,Z)}}function ie(V,Z){return V!==null&&V!==v&&(V===Z||ie(V.parentNode,Z))}function K(V){var Z=this;if(V=V||v,!(Z instanceof K))return new K(V);Z.target=V,Z._callbacks={},Z._directMap={};var z,D={},C=!1,R=!1,F=!1;function Q(ue){ue=ue||{};var he,be=!1;for(he in D)ue[he]?be=!0:D[he]=0;be||(F=!1)}function le(ue,he,be,Se,Ie,Ke){var Pe,Ce,Ze,J,q=[],ae=be.type;if(!Z._callbacks[ue])return[];for(ae=="keyup"&&L(ue)&&(he=[ue]),Pe=0;Pe<Z._callbacks[ue].length;++Pe)if(Ce=Z._callbacks[ue][Pe],(Se||!Ce.seq||D[Ce.seq]==Ce.level)&&ae==Ce.action&&(ae=="keypress"&&!be.metaKey&&!be.ctrlKey||(Ze=he,J=Ce.modifiers,Ze.sort().join(",")===J.sort().join(",")))){var _e=!Se&&Ce.combo==Ie,Ae=Se&&Ce.seq==Se&&Ce.level==Ke;(_e||Ae)&&Z._callbacks[ue].splice(Pe,1),q.push(Ce)}return q}function ce(ue,he,be,Se){Z.stopCallback(he,he.target||he.srcElement,be,Se)||ue(he,be)===!1&&(function(Ie){Ie.preventDefault?Ie.preventDefault():Ie.returnValue=!1}(he),function(Ie){Ie.stopPropagation?Ie.stopPropagation():Ie.cancelBubble=!0}(he))}function ye(ue){typeof ue.which!="number"&&(ue.which=ue.keyCode);var he=B(ue);he&&(ue.type!="keyup"||C!==he?Z.handleKey(he,function(be){var Se=[];return be.shiftKey&&Se.push("shift"),be.altKey&&Se.push("alt"),be.ctrlKey&&Se.push("ctrl"),be.metaKey&&Se.push("meta"),Se}(ue),ue):C=!1)}function xe(ue,he,be,Se){function Ie(Ze){return function(){F=Ze,++D[ue],clearTimeout(z),z=setTimeout(Q,1e3)}}function Ke(Ze){ce(be,Ze,ue),Se!=="keyup"&&(C=B(Ze)),setTimeout(Q,10)}D[ue]=0;for(var Pe=0;Pe<he.length;++Pe){var Ce=Pe+1===he.length?Ke:Ie(Se||$(he[Pe+1]).action);ge(he[Pe],Ce,Se,ue,Pe)}}function ge(ue,he,be,Se,Ie){Z._directMap[ue+":"+be]=he;var Ke,Pe=(ue=ue.replace(/\s+/g," ")).split(" ");Pe.length>1?xe(ue,Pe,he,be):(Ke=$(ue,be),Z._callbacks[Ke.key]=Z._callbacks[Ke.key]||[],le(Ke.key,Ke.modifiers,{type:Ke.action},Se,ue,Ie),Z._callbacks[Ke.key][Se?"unshift":"push"]({callback:he,modifiers:Ke.modifiers,action:Ke.action,seq:Se,level:Ie,combo:ue}))}Z._handleKey=function(ue,he,be){var Se,Ie=le(ue,he,be),Ke={},Pe=0,Ce=!1;for(Se=0;Se<Ie.length;++Se)Ie[Se].seq&&(Pe=Math.max(Pe,Ie[Se].level));for(Se=0;Se<Ie.length;++Se)if(Ie[Se].seq){if(Ie[Se].level!=Pe)continue;Ce=!0,Ke[Ie[Se].seq]=1,ce(Ie[Se].callback,be,Ie[Se].combo,Ie[Se].seq)}else Ce||ce(Ie[Se].callback,be,Ie[Se].combo);var Ze=be.type=="keypress"&&R;be.type!=F||L(ue)||Ze||Q(Ke),R=Ce&&be.type=="keydown"},Z._bindMultiple=function(ue,he,be){for(var Se=0;Se<ue.length;++Se)ge(ue[Se],he,be)},N(V,"keypress",ye),N(V,"keydown",ye),N(V,"keyup",ye)}})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},function(s,f,i){var l=i(36),c=i(37),v=i(32),m=i(40),w=i(66);s.exports=l?Object.defineProperties:function(S,E){v(S);for(var A,P=m(E),T=w(E),N=T.length,B=0;N>B;)c.f(S,A=T[B++],P[A]);return S}},function(s,f,i){var l=i(7),c=i(35),v=i(28),m=i(33),w=l.TypeError;s.exports=function(S,E){var A,P;if(E==="string"&&v(A=S.toString)&&!m(P=c(A,S))||v(A=S.valueOf)&&!m(P=c(A,S))||E!=="string"&&v(A=S.toString)&&!m(P=c(A,S)))return P;throw w("Can't convert object to primitive value")}},function(s,f,i){var l=i(7),c=i(28),v=i(92),m=l.WeakMap;s.exports=c(m)&&/native code/.test(v(m))},function(s,f,i){var l=i(136).IteratorPrototype,c=i(54),v=i(71),m=i(73),w=i(70),S=function(){return this};s.exports=function(E,A,P,T){var N=A+" Iterator";return E.prototype=c(l,{next:v(+!T,P)}),m(E,N,!1,!0),w[N]=S,E}},function(s,f,i){var l=i(7),c=i(28),v=l.String,m=l.TypeError;s.exports=function(w){if(typeof w=="object"||c(w))return w;throw m("Can't set "+v(w)+" as a prototype")}},function(s,f,i){var l=i(17),c=i(7),v=i(15),m=i(95),w=i(44),S=i(138),E=i(114),A=i(117),P=i(28),T=i(33),N=i(19),B=i(118),L=i(73),H=i(143);s.exports=function($,ie,K){var V=$.indexOf("Map")!==-1,Z=$.indexOf("Weak")!==-1,z=V?"set":"add",D=c[$],C=D&&D.prototype,R=D,F={},Q=function(ue){var he=v(C[ue]);w(C,ue,ue=="add"?function(be){return he(this,be===0?0:be),this}:ue=="delete"?function(be){return!(Z&&!T(be))&&he(this,be===0?0:be)}:ue=="get"?function(be){return Z&&!T(be)?void 0:he(this,be===0?0:be)}:ue=="has"?function(be){return!(Z&&!T(be))&&he(this,be===0?0:be)}:function(be,Se){return he(this,be===0?0:be,Se),this})};if(m($,!P(D)||!(Z||C.forEach&&!N(function(){new D().entries().next()}))))R=K.getConstructor(ie,$,V,z),S.enable();else if(m($,!0)){var le=new R,ce=le[z](Z?{}:-0,1)!=le,ye=N(function(){le.has(1)}),xe=B(function(ue){new D(ue)}),ge=!Z&&N(function(){for(var ue=new D,he=5;he--;)ue[z](he,he);return!ue.has(-0)});xe||((R=ie(function(ue,he){A(ue,C);var be=H(new D,ue,R);return he!=null&&E(he,be[z],{that:be,AS_ENTRIES:V}),be})).prototype=C,C.constructor=R),(ye||ge)&&(Q("delete"),Q("has"),V&&Q("get")),(ge||ce)&&Q(z),Z&&C.clear&&delete C.clear}return F[$]=R,l({global:!0,forced:R!=D},F),L(R,$),Z||K.setStrong(R,$,V),R}},function(s,f,i){var l=i(19),c=i(33),v=i(50),m=i(176),w=Object.isExtensible,S=l(function(){});s.exports=S||m?function(E){return!!c(E)&&(!m||v(E)!="ArrayBuffer")&&(!w||w(E))}:w},function(s,f,i){var l=i(19);s.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(s,f,i){var l=i(19);s.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(s,f,i){var l=i(37).f,c=i(54),v=i(144),m=i(62),w=i(117),S=i(114),E=i(111),A=i(145),P=i(36),T=i(138).fastKey,N=i(56),B=N.set,L=N.getterFor;s.exports={getConstructor:function(H,$,ie,K){var V=H(function(R,F){w(R,Z),B(R,{type:$,index:c(null),first:void 0,last:void 0,size:0}),P||(R.size=0),F!=null&&S(F,R[K],{that:R,AS_ENTRIES:ie})}),Z=V.prototype,z=L($),D=function(R,F,Q){var le,ce,ye=z(R),xe=C(R,F);return xe?xe.value=Q:(ye.last=xe={index:ce=T(F,!0),key:F,value:Q,previous:le=ye.last,next:void 0,removed:!1},ye.first||(ye.first=xe),le&&(le.next=xe),P?ye.size++:R.size++,ce!=="F"&&(ye.index[ce]=xe)),R},C=function(R,F){var Q,le=z(R),ce=T(F);if(ce!=="F")return le.index[ce];for(Q=le.first;Q;Q=Q.next)if(Q.key==F)return Q};return v(Z,{clear:function(){for(var R=z(this),F=R.index,Q=R.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=void 0),delete F[Q.index],Q=Q.next;R.first=R.last=void 0,P?R.size=0:this.size=0},delete:function(R){var F=this,Q=z(F),le=C(F,R);if(le){var ce=le.next,ye=le.previous;delete Q.index[le.index],le.removed=!0,ye&&(ye.next=ce),ce&&(ce.previous=ye),Q.first==le&&(Q.first=ce),Q.last==le&&(Q.last=ye),P?Q.size--:F.size--}return!!le},forEach:function(R){for(var F,Q=z(this),le=m(R,arguments.length>1?arguments[1]:void 0);F=F?F.next:Q.first;)for(le(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(R){return!!C(this,R)}}),v(Z,ie?{get:function(R){var F=C(this,R);return F&&F.value},set:function(R,F){return D(this,R===0?0:R,F)}}:{add:function(R){return D(this,R=R===0?0:R,R)}}),P&&l(Z,"size",{get:function(){return z(this).size}}),V},setStrong:function(H,$,ie){var K=$+" Iterator",V=L($),Z=L(K);E(H,$,function(z,D){B(this,{type:K,target:z,state:V(z),kind:D,last:void 0})},function(){for(var z=Z(this),D=z.kind,C=z.last;C&&C.removed;)C=C.previous;return z.target&&(z.last=C=C?C.next:z.state.first)?D=="keys"?{value:C.key,done:!1}:D=="values"?{value:C.value,done:!1}:{value:[C.key,C.value],done:!1}:(z.target=void 0,{value:void 0,done:!0})},ie?"entries":"values",!ie,!0),A($)}}},function(s,f,i){var l=i(116),c=i(98);s.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(s,f,i){var l=i(74).forEach,c=i(120)("forEach");s.exports=c?[].forEach:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}},function(s,f,i){var l=i(7),c=i(99),v=i(100),m=i(33),w=i(27)("species"),S=l.Array;s.exports=function(E){var A;return c(E)&&(A=E.constructor,(v(A)&&(A===S||c(A.prototype))||m(A)&&(A=A[w])===null)&&(A=void 0)),A===void 0?S:A}},function(s,f,i){var l=i(7);s.exports=l},function(s,f,i){var l=i(7),c=i(62),v=i(35),m=i(38),w=i(184),S=i(140),E=i(100),A=i(43),P=i(61),T=i(141),N=i(115),B=l.Array;s.exports=function(L){var H=m(L),$=E(this),ie=arguments.length,K=ie>1?arguments[1]:void 0,V=K!==void 0;V&&(K=c(K,ie>2?arguments[2]:void 0));var Z,z,D,C,R,F,Q=N(H),le=0;if(!Q||this==B&&S(Q))for(Z=A(H),z=$?new this(Z):B(Z);Z>le;le++)F=V?K(H[le],le):H[le],P(z,le,F);else for(R=(C=T(H,Q)).next,z=$?new this:[];!(D=v(R,C)).done;le++)F=V?w(C,K,[D.value,le],!0):D.value,P(z,le,F);return z.length=le,z}},function(s,f,i){var l=i(32),c=i(142);s.exports=function(v,m,w,S){try{return S?m(l(w)[0],w[1]):m(w)}catch(E){c(v,"throw",E)}}},function(s,f,i){var l=i(32);s.exports=function(){var c=l(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(s,f,i){var l=i(19),c=i(7).RegExp;s.exports=l(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(s,f,i){var l=i(19),c=i(7).RegExp;s.exports=l(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(s,f,i){var l=i(17),c=i(15),v=i(55),m=i(38),w=i(43),S=i(41),E=i(19),A=i(189),P=i(120),T=i(190),N=i(191),B=i(65),L=i(192),H=[],$=c(H.sort),ie=c(H.push),K=E(function(){H.sort(void 0)}),V=E(function(){H.sort(null)}),Z=P("sort"),z=!E(function(){if(B)return B<70;if(!(T&&T>3)){if(N)return!0;if(L)return L<603;var D,C,R,F,Q="";for(D=65;D<76;D++){switch(C=String.fromCharCode(D),D){case 66:case 69:case 70:case 72:R=3;break;case 68:case 71:R=4;break;default:R=2}for(F=0;F<47;F++)H.push({k:C+F,v:R})}for(H.sort(function(le,ce){return ce.v-le.v}),F=0;F<H.length;F++)C=H[F].k.charAt(0),Q.charAt(Q.length-1)!==C&&(Q+=C);return Q!=="DGBEFHACIJK"}});l({target:"Array",proto:!0,forced:K||!V||!Z||!z},{sort:function(D){D!==void 0&&v(D);var C=m(this);if(z)return D===void 0?$(C):$(C,D);var R,F,Q=[],le=w(C);for(F=0;F<le;F++)F in C&&ie(Q,C[F]);for(A(Q,function(ce){return function(ye,xe){return xe===void 0?-1:ye===void 0?1:ce!==void 0?+ce(ye,xe)||0:S(ye)>S(xe)?1:-1}}(D)),R=Q.length,F=0;F<R;)C[F]=Q[F++];for(;F<le;)delete C[F++];return C}})},function(s,f,i){var l=i(113),c=Math.floor,v=function(S,E){var A=S.length,P=c(A/2);return A<8?m(S,E):w(S,v(l(S,0,P),E),v(l(S,P),E),E)},m=function(S,E){for(var A,P,T=S.length,N=1;N<T;){for(P=N,A=S[N];P&&E(S[P-1],A)>0;)S[P]=S[--P];P!==N++&&(S[P]=A)}return S},w=function(S,E,A,P){for(var T=E.length,N=A.length,B=0,L=0;B<T||L<N;)S[B+L]=B<T&&L<N?P(E[B],A[L])<=0?E[B++]:A[L++]:B<T?E[B++]:A[L++];return S};s.exports=v},function(s,f,i){var l=i(53).match(/firefox\/(\d+)/i);s.exports=!!l&&+l[1]},function(s,f,i){var l=i(53);s.exports=/MSIE|Trident/.test(l)},function(s,f,i){var l=i(53).match(/AppleWebKit\/(\d+)\./);s.exports=!!l&&+l[1]},function(s,f,i){var l=i(17),c=i(74).find,v=i(83),m="find",w=!0;m in[]&&Array(1).find(function(){w=!1}),l({target:"Array",proto:!0,forced:w},{find:function(S){return c(this,S,arguments.length>1?arguments[1]:void 0)}}),v(m)},function(s,f,i){var l=i(7),c=i(154),v=l.TypeError;s.exports=function(m){if(c(m))throw v("The method doesn't accept regular expressions");return m}},function(s,f,i){var l=i(27)("match");s.exports=function(c){var v=/./;try{"/./"[c](v)}catch(m){try{return v[l]=!1,"/./"[c](v)}catch(w){}}return!1}},function(s,f,i){var l=i(94).PROPER,c=i(19),v=i(160);s.exports=function(m){return c(function(){return!!v[m]()||"​᠎"[m]()!=="​᠎"||l&&v[m].name!==m})}},function(s,f,i){var l=i(15);s.exports=l(1 .valueOf)},function(s,f,i){var l=i(15),c=i(38),v=Math.floor,m=l("".charAt),w=l("".replace),S=l("".slice),E=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,A=/\$([$&'`]|\d{1,2})/g;s.exports=function(P,T,N,B,L,H){var $=N+P.length,ie=B.length,K=A;return L!==void 0&&(L=c(L),K=E),w(H,K,function(V,Z){var z;switch(m(Z,0)){case"$":return"$";case"&":return P;case"`":return S(T,0,N);case"'":return S(T,$);case"<":z=L[S(Z,1,-1)];break;default:var D=+Z;if(D===0)return V;if(D>ie){var C=v(D/10);return C===0?V:C<=ie?B[C-1]===void 0?m(Z,1):B[C-1]+m(Z,1):V}z=B[D-1]}return z===void 0?"":z})}},function(s,f,i){var l=i(36),c=i(15),v=i(35),m=i(19),w=i(66),S=i(112),E=i(93),A=i(38),P=i(81),T=Object.assign,N=Object.defineProperty,B=c([].concat);s.exports=!T||m(function(){if(l&&T({b:1},T(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var L={},H={},$=Symbol(),ie="abcdefghijklmnopqrst";return L[$]=7,ie.split("").forEach(function(K){H[K]=K}),T({},L)[$]!=7||w(T({},H)).join("")!=ie})?function(L,H){for(var $=A(L),ie=arguments.length,K=1,V=S.f,Z=E.f;ie>K;)for(var z,D=P(arguments[K++]),C=V?B(w(D),V(D)):w(D),R=C.length,F=0;R>F;)z=C[F++],l&&!v(Z,D,z)||($[z]=D[z]);return $}:T},function(s,f,i){var l=i(7),c=i(15),v=i(55),m=i(33),w=i(34),S=i(101),E=l.Function,A=c([].concat),P=c([].join),T={},N=function(B,L,H){if(!w(T,L)){for(var $=[],ie=0;ie<L;ie++)$[ie]="a["+ie+"]";T[L]=E("C,a","return new C("+P($,",")+")")}return T[L](B,H)};s.exports=E.bind||function(B){var L=v(this),H=L.prototype,$=S(arguments,1),ie=function(){var K=A($,S(arguments));return this instanceof ie?N(L,K.length,K):L.apply(B,K)};return m(H)&&(ie.prototype=H),ie}},function(s,f,i){var l=i(34);s.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(s,f,i){var l=i(15),c=i(45),v=i(41),m=/"/g,w=l("".replace);s.exports=function(S,E,A,P){var T=v(c(S)),N="<"+E;return A!==""&&(N+=" "+A+'="'+w(v(P),m,"&quot;")+'"'),N+">"+T+"</"+E+">"}},function(s,f,i){var l=i(19);s.exports=function(c){return l(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(s,f,i){var l,c,v,m,w=i(17),S=i(64),E=i(7),A=i(46),P=i(35),T=i(205),N=i(44),B=i(144),L=i(97),H=i(73),$=i(145),ie=i(55),K=i(28),V=i(33),Z=i(117),z=i(92),D=i(114),C=i(118),R=i(156),F=i(163).set,Q=i(206),le=i(209),ce=i(210),ye=i(165),xe=i(211),ge=i(56),ue=i(95),he=i(27),be=i(212),Se=i(126),Ie=i(65),Ke=he("species"),Pe="Promise",Ce=ge.getterFor(Pe),Ze=ge.set,J=ge.getterFor(Pe),q=T&&T.prototype,ae=T,_e=q,Ae=E.TypeError,we=E.document,qe=E.process,nt=ye.f,$e=nt,Ye=!!(we&&we.createEvent&&E.dispatchEvent),ve=K(E.PromiseRejectionEvent),He="unhandledrejection",te=!1,Le=ue(Pe,function(){var Y=z(ae),se=Y!==String(ae);if(!se&&Ie===66||S&&!_e.finally)return!0;if(Ie>=51&&/native code/.test(Y))return!1;var Te=new ae(function(Xe){Xe(1)}),De=function(Xe){Xe(function(){},function(){})};return(Te.constructor={})[Ke]=De,!(te=Te.then(function(){})instanceof De)||!se&&be&&!ve}),ut=Le||!C(function(Y){ae.all(Y).catch(function(){})}),vt=function(Y){var se;return!(!V(Y)||!K(se=Y.then))&&se},it=function(Y,se){if(!Y.notified){Y.notified=!0;var Te=Y.reactions;Q(function(){for(var De=Y.value,Xe=Y.state==1,ft=0;Te.length>ft;){var Ht,Kt,Ct,Rt=Te[ft++],ze=Xe?Rt.ok:Rt.fail,Ve=Rt.resolve,et=Rt.reject,rt=Rt.domain;try{ze?(Xe||(Y.rejection===2&&at(Y),Y.rejection=1),ze===!0?Ht=De:(rt&&rt.enter(),Ht=ze(De),rt&&(rt.exit(),Ct=!0)),Ht===Rt.promise?et(Ae("Promise-chain cycle")):(Kt=vt(Ht))?P(Kt,Ht,Ve,et):Ve(Ht)):et(De)}catch(wt){rt&&!Ct&&rt.exit(),et(wt)}}Y.reactions=[],Y.notified=!1,se&&!Y.rejection&&St(Y)})}},yt=function(Y,se,Te){var De,Xe;Ye?((De=we.createEvent("Event")).promise=se,De.reason=Te,De.initEvent(Y,!1,!0),E.dispatchEvent(De)):De={promise:se,reason:Te},!ve&&(Xe=E["on"+Y])?Xe(De):Y===He&&ce("Unhandled promise rejection",Te)},St=function(Y){P(F,E,function(){var se,Te=Y.facade,De=Y.value;if(Pt(Y)&&(se=xe(function(){Se?qe.emit("unhandledRejection",De,Te):yt(He,Te,De)}),Y.rejection=Se||Pt(Y)?2:1,se.error))throw se.value})},Pt=function(Y){return Y.rejection!==1&&!Y.parent},at=function(Y){P(F,E,function(){var se=Y.facade;Se?qe.emit("rejectionHandled",se):yt("rejectionhandled",se,Y.value)})},Nt=function(Y,se,Te){return function(De){Y(se,De,Te)}},G=function(Y,se,Te){Y.done||(Y.done=!0,Te&&(Y=Te),Y.value=se,Y.state=2,it(Y,!0))},ne=function(Y,se,Te){if(!Y.done){Y.done=!0,Te&&(Y=Te);try{if(Y.facade===se)throw Ae("Promise can't be resolved itself");var De=vt(se);De?Q(function(){var Xe={done:!1};try{P(De,se,Nt(ne,Xe,Y),Nt(G,Xe,Y))}catch(ft){G(Xe,ft,Y)}}):(Y.value=se,Y.state=1,it(Y,!1))}catch(Xe){G({done:!1},Xe,Y)}}};if(Le&&(_e=(ae=function(Y){Z(this,_e),ie(Y),P(l,this);var se=Ce(this);try{Y(Nt(ne,se),Nt(G,se))}catch(Te){G(se,Te)}}).prototype,(l=function(Y){Ze(this,{type:Pe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=B(_e,{then:function(Y,se){var Te=J(this),De=Te.reactions,Xe=nt(R(this,ae));return Xe.ok=!K(Y)||Y,Xe.fail=K(se)&&se,Xe.domain=Se?qe.domain:void 0,Te.parent=!0,De[De.length]=Xe,Te.state!=0&&it(Te,!1),Xe.promise},catch:function(Y){return this.then(void 0,Y)}}),c=function(){var Y=new l,se=Ce(Y);this.promise=Y,this.resolve=Nt(ne,se),this.reject=Nt(G,se)},ye.f=nt=function(Y){return Y===ae||Y===v?new c(Y):$e(Y)},!S&&K(T)&&q!==Object.prototype)){m=q.then,te||(N(q,"then",function(Y,se){var Te=this;return new ae(function(De,Xe){P(m,Te,De,Xe)}).then(Y,se)},{unsafe:!0}),N(q,"catch",_e.catch,{unsafe:!0}));try{delete q.constructor}catch(Y){}L&&L(q,_e)}w({global:!0,wrap:!0,forced:Le},{Promise:ae}),H(ae,Pe,!1,!0),$(Pe),v=A(Pe),w({target:Pe,stat:!0,forced:Le},{reject:function(Y){var se=nt(this);return P(se.reject,void 0,Y),se.promise}}),w({target:Pe,stat:!0,forced:S||Le},{resolve:function(Y){return le(S&&this===v?ae:this,Y)}}),w({target:Pe,stat:!0,forced:ut},{all:function(Y){var se=this,Te=nt(se),De=Te.resolve,Xe=Te.reject,ft=xe(function(){var Ht=ie(se.resolve),Kt=[],Ct=0,Rt=1;D(Y,function(ze){var Ve=Ct++,et=!1;Rt++,P(Ht,se,ze).then(function(rt){et||(et=!0,Kt[Ve]=rt,--Rt||De(Kt))},Xe)}),--Rt||De(Kt)});return ft.error&&Xe(ft.value),Te.promise},race:function(Y){var se=this,Te=nt(se),De=Te.reject,Xe=xe(function(){var ft=ie(se.resolve);D(Y,function(Ht){P(ft,se,Ht).then(Te.resolve,De)})});return Xe.error&&De(Xe.value),Te.promise}})},function(s,f,i){var l=i(7);s.exports=l.Promise},function(s,f,i){var l,c,v,m,w,S,E,A,P=i(7),T=i(62),N=i(51).f,B=i(163).set,L=i(164),H=i(207),$=i(208),ie=i(126),K=P.MutationObserver||P.WebKitMutationObserver,V=P.document,Z=P.process,z=P.Promise,D=N(P,"queueMicrotask"),C=D&&D.value;C||(l=function(){var R,F;for(ie&&(R=Z.domain)&&R.exit();c;){F=c.fn,c=c.next;try{F()}catch(Q){throw c?m():v=void 0,Q}}v=void 0,R&&R.enter()},L||ie||$||!K||!V?!H&&z&&z.resolve?((E=z.resolve(void 0)).constructor=z,A=T(E.then,E),m=function(){A(l)}):ie?m=function(){Z.nextTick(l)}:(B=T(B,P),m=function(){B(l)}):(w=!0,S=V.createTextNode(""),new K(l).observe(S,{characterData:!0}),m=function(){S.data=w=!w})),s.exports=C||function(R){var F={fn:R,next:void 0};v&&(v.next=F),c||(c=F,m()),v=F}},function(s,f,i){var l=i(53),c=i(7);s.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(s,f,i){var l=i(53);s.exports=/web0s(?!.*chrome)/i.test(l)},function(s,f,i){var l=i(32),c=i(33),v=i(165);s.exports=function(m,w){if(l(m),c(w)&&w.constructor===m)return w;var S=v.f(m);return(0,S.resolve)(w),S.promise}},function(s,f,i){var l=i(7);s.exports=function(c,v){var m=l.console;m&&m.error&&(arguments.length==1?m.error(c):m.error(c,v))}},function(s,f){s.exports=function(i){try{return{error:!1,value:i()}}catch(l){return{error:!0,value:l}}}},function(s,f){s.exports=typeof window=="object"},function(s,f,i){var l=i(36),c=i(15),v=i(66),m=i(40),w=c(i(93).f),S=c([].push),E=function(A){return function(P){for(var T,N=m(P),B=v(N),L=B.length,H=0,$=[];L>H;)T=B[H++],l&&!w(N,T)||S($,A?[T,N[T]]:N[T]);return $}};s.exports={entries:E(!0),values:E(!1)}},function(s,f,i){var l=i(38),c=i(67),v=i(43);s.exports=function(m){for(var w=l(this),S=v(w),E=arguments.length,A=c(E>1?arguments[1]:void 0,S),P=E>2?arguments[2]:void 0,T=P===void 0?S:c(P,S);T>A;)w[A++]=m;return w}},function(s,f,i){i.r(f),i.d(f,"observer",function(){return Gn}),i.d(f,"LogicFlow",function(){return sf}),i.d(f,"h",function(){return te.g}),i.d(f,"LogicFlowUtil",function(){return l}),i.d(f,"BaseNode",function(){return Or}),i.d(f,"RectNode",function(){return el}),i.d(f,"CircleNode",function(){return ol}),i.d(f,"PolygonNode",function(){return cl}),i.d(f,"DiamondNode",function(){return dl}),i.d(f,"EllipseNode",function(){return bl}),i.d(f,"TextNode",function(){return _l}),i.d(f,"HtmlNode",function(){return Sl}),i.d(f,"BaseEdge",function(){return Oi}),i.d(f,"LineEdge",function(){return Bl}),i.d(f,"PolylineEdge",function(){return Xl}),i.d(f,"BezierEdge",function(){return Kl}),i.d(f,"Arrow",function(){return M_}),i.d(f,"BaseEdgeModel",function(){return _s}),i.d(f,"BezierEdgeModel",function(){return cc}),i.d(f,"LineEdgeModel",function(){return js}),i.d(f,"PolylineEdgeModel",function(){return Ms}),i.d(f,"BaseNodeModel",function(){return mr}),i.d(f,"CircleNodeModel",function(){return yc}),i.d(f,"DiamondNodeModel",function(){return Oc}),i.d(f,"EllipseNodeModel",function(){return Ec}),i.d(f,"PolygonNodeModel",function(){return Mc}),i.d(f,"RectNodeModel",function(){return Cc}),i.d(f,"TextNodeModel",function(){return zc}),i.d(f,"HtmlNodeModel",function(){return Hc}),i.d(f,"EditConfigModel",function(){return Qf}),i.d(f,"GraphModel",function(){return Xd}),i.d(f,"SnaplineModel",function(){return Ey}),i.d(f,"Keyboard",function(){return lg}),i.d(f,"get",function(){return hh}),i.d(f,"defaults",function(){return gh}),i.d(f,"ElementState",function(){return _t}),i.d(f,"ModelType",function(){return ht}),i.d(f,"ElementType",function(){return Ut}),i.d(f,"EventType",function(){return tt}),i.d(f,"formateAnchorConnectValidateData",function(){return ii});var l={};i.r(l),i.d(l,"createUuid",function(){return Nr}),i.d(l,"refreshGraphId",function(){return Cb}),i.d(l,"createDrag",function(){return cm}),i.d(l,"StepDrag",function(){return yr});var c=i(1),v=i(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var m=i(42),w=Object(m.b)("observerBatching");function S(e){e()}var E=!1;function A(){return E}function P(e){return Object(c.t)(e)}var T,N=1e4,B=new Set;function L(){T===void 0&&(T=setTimeout(H,1e4))}function H(){T=void 0;var e=Date.now();B.forEach(function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,B.delete(t))}),B.size>0&&L()}var $=!1,ie=[],K={};function V(e){return"observer"+e}function Z(e,t,n){t===void 0&&(t="observed"),n===void 0&&(n=K),A();var r,a=function(O){return function(){$?ie.push(O):O()}}((n.useForceUpdate||m.d)()),o=v.d.useRef(null);if(!o.current){var u=new c.c(V(t),function(){p.mounted?a():(u.dispose(),o.current=null)}),p=function(O){return{cleanAt:Date.now()+N,reaction:O}}(u);o.current=p,r=o,B.add(r),L()}var d=o.current.reaction;return v.d.useDebugValue(d,P),v.d.useEffect(function(){var O;return O=o,B.delete(O),o.current?o.current.mounted=!0:(o.current={reaction:new c.c(V(t),function(){a()}),cleanAt:1/0},a()),function(){o.current.reaction.dispose(),o.current=null}},[]),function(O){$=!0,ie=[];try{var _=O();$=!1;var j=ie.length>0?ie:void 0;return v.d.useLayoutEffect(function(){j&&j.forEach(function(k){return k()})},[j]),_}finally{$=!1}}(function(){var O,_;if(d.track(function(){try{O=e()}catch(j){_=j}}),_)throw _;return O})}var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};function D(e,t){var n,r,a,o=z({forwardRef:!1},t),u=e.displayName||e.name,p=function(d,O){return Z(function(){return e(d,O)},u)};return p.displayName=u,n=o.forwardRef?Object(v.f)(Object(v.e)(p)):Object(v.f)(p),r=e,a=n,Object.keys(r).forEach(function(d){C[d]||Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(r,d))}),n.displayName=u,n}var C={$$typeof:!0,render:!0,compare:!0,type:!0};function R(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:Z(r)}function F(e,t,n,r,a){var o=t==="children"?"render":"children",u=typeof e[t]=="function",p=typeof e[o]=="function";return u&&p?new Error("MobX Observer: Do not use children and render in the same time in`"+n):u||p?null:new Error("Invalid prop `"+a+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}R.propTypes={children:F,render:F},R.displayName="Observer";var Q;(Q=v.g)||(Q=S),Object(c.n)({reactionScheduler:Q}),Object(m.a)()[w]=!0;var le=0,ce={};function ye(e){return ce[e]||(ce[e]=function(t){if(typeof Symbol=="function")return Symbol(t);var n="__$mobx-react "+t+" ("+le+")";return le++,n}(e)),ce[e]}function xe(e,t){if(ge(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.hasOwnProperty.call(t,n[a])||!ge(e[n[a]],t[n[a]]))return!1;return!0}function ge(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ue(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var he=ye("patchMixins"),be=ye("patchedDefinition");function Se(e,t){for(var n=this,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];t.locks++;try{var u;return e!=null&&(u=e.apply(this,a)),u}finally{t.locks--,t.locks===0&&t.methods.forEach(function(p){p.apply(n,a)})}}function Ie(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];Se.call.apply(Se,[this,e,t].concat(r))}}function Ke(e,t,n){var r=function(p,d){var O=p[he]=p[he]||{},_=O[d]=O[d]||{};return _.locks=_.locks||0,_.methods=_.methods||[],_}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var a=Object.getOwnPropertyDescriptor(e,t);if(!a||!a[be]){var o=e[t],u=Pe(e,t,a?a.enumerable:void 0,r,o);Object.defineProperty(e,t,u)}}function Pe(e,t,n,r,a){var o,u=Ie(a,r);return(o={})[be]=!0,o.get=function(){return u},o.set=function(p){if(this===e)u=Ie(p,r);else{var d=Pe(this,t,n,r,p);Object.defineProperty(this,t,d)}},o.configurable=!0,o.enumerable=n,o}var Ce=c.a||"$mobx",Ze=ye("isMobXReactObserver"),J=ye("isUnmounted"),q=ye("skipRender"),ae=ye("isForcingUpdate");function _e(e){var t=e.prototype;if(e[Ze]?Ae(t):e[Ze]=!0,t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==v.b)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==qe)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=qe;nt(t,"props"),nt(t,"state");var n=t.render;return t.render=function(){return we.call(this,n)},Ke(t,"componentWillUnmount",function(){var r;(r=this.render[Ce])===null||r===void 0||r.dispose(),this[J]=!0,!this.render[Ce]&&Ae(this)}),e}function Ae(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function we(e){var t=this;ue(this,q,!1),ue(this,ae,!1);var n=Ae(this),r=e.bind(this),a=!1,o=new c.c(n+".render()",function(){if(!a&&(a=!0,t[J]!==!0)){var p=!0;try{ue(t,ae,!0),t[q]||v.a.prototype.forceUpdate.call(t),p=!1}finally{ue(t,ae,!1),p&&o.dispose()}}});function u(){a=!1;var p=void 0,d=void 0;if(o.track(function(){try{d=Object(c.d)(!1,r)}catch(O){p=O}}),p)throw p;return d}return o.reactComponent=this,u[Ce]=o,this.render=u,u.call(this)}function qe(e,t){return this.state!==t||!xe(this.props,e)}function nt(e,t){var n=ye("reactProp_"+t+"_valueHolder"),r=ye("reactProp_"+t+"_atomHolder");function a(){return this[r]||ue(this,r,Object(c.o)("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var o=!1;return c.f&&c.e&&(o=Object(c.f)(!0)),a.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(o),this[n]},set:function(o){this[ae]||xe(this[n],o)?ue(this,n,o):(ue(this,n,o),ue(this,q,!0),a.call(this).reportChanged(),ue(this,q,!1))}})}var $e=typeof Symbol=="function"&&Symbol.for,Ye=$e?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(e){return null}).$$typeof,ve=$e?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(e){return null}).$$typeof;function He(e){if(e.isMobxInjector,ve&&e.$$typeof===ve)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Ye&&e.$$typeof===Ye){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var n=arguments;return Object(v.c)(R,null,function(){return t.apply(void 0,n)})})}return typeof e!="function"||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(v.a,e)?_e(e):D(e)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var te=i(0);i(3),i(60),i(2),i(6),i(4),i(11),i(39),i(29),i(22),i(20),i(5),i(23),i(21),i(25),i(8),i(9),i(16),i(24),i(18),i(188),i(193),i(103),i(152),i(153);var Le=function(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},ut=function(){this.__data__=[],this.size=0},vt=function(e,t){return e===t||e!=e&&t!=t},it=function(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1},yt=Array.prototype.splice,St=function(e){var t=this.__data__,n=it(t,e);return!(n<0)&&(n==t.length-1?t.pop():yt.call(t,n,1),--this.size,!0)},Pt=function(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]},at=function(e){return it(this.__data__,e)>-1},Nt=function(e,t){var n=this.__data__,r=it(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function G(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G.prototype.clear=ut,G.prototype.delete=St,G.prototype.get=Pt,G.prototype.has=at,G.prototype.set=Nt;var ne=G,Y=function(){this.__data__=new ne,this.size=0},se=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Te=function(e){return this.__data__.get(e)},De=function(e){return this.__data__.has(e)},Xe=i(31),ft=Xe.a.Symbol,Ht=Object.prototype,Kt=Ht.hasOwnProperty,Ct=Ht.toString,Rt=ft?ft.toStringTag:void 0,ze=function(e){var t=Kt.call(e,Rt),n=e[Rt];try{e[Rt]=void 0;var r=!0}catch(o){}var a=Ct.call(e);return r&&(t?e[Rt]=n:delete e[Rt]),a},Ve=Object.prototype.toString,et=function(e){return Ve.call(e)},rt=ft?ft.toStringTag:void 0,wt=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?ze(e):et(e)},Tt=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},cr,Xn=function(e){if(!Tt(e))return!1;var t=wt(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Yn=Xe.a["__core-js_shared__"],Wr=(cr=/[^.]+$/.exec(Yn&&Yn.keys&&Yn.keys.IE_PROTO||""))?"Symbol(src)_1."+cr:"",Fu=function(e){return!!Wr&&Wr in e},Xo=Function.prototype.toString,kn=function(e){if(e!=null){try{return Xo.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Ci=/^\[object .+?Constructor\]$/,Ge=Function.prototype,Hu=Object.prototype,Ri=Ge.toString,Ii=Hu.hasOwnProperty,mn=RegExp("^"+Ri.call(Ii).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),On=function(e){return!(!Tt(e)||Fu(e))&&(Xn(e)?mn:Ci).test(kn(e))},Li=function(e,t){return e==null?void 0:e[t]},Vn=function(e,t){var n=Li(e,t);return On(n)?n:void 0},jr=Vn(Xe.a,"Map"),zn=Vn(Object,"create"),Yo=function(){this.__data__=zn?zn(null):{},this.size=0},zi=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Uu=Object.prototype.hasOwnProperty,co=function(e){var t=this.__data__;if(zn){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Uu.call(t,e)?t[e]:void 0},Gu=Object.prototype.hasOwnProperty,Bi=function(e){var t=this.__data__;return zn?t[e]!==void 0:Gu.call(t,e)},Xu=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zn&&t===void 0?"__lodash_hash_undefined__":t,this};function lr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lr.prototype.clear=Yo,lr.prototype.delete=zi,lr.prototype.get=co,lr.prototype.has=Bi,lr.prototype.set=Xu;var Fi=lr,Wn=function(){this.size=0,this.__data__={hash:new Fi,map:new(jr||ne),string:new Fi}},Yu=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},lo=function(e,t){var n=e.__data__;return Yu(t)?n[typeof t=="string"?"string":"hash"]:n.map},Vo=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Wo=function(e){return lo(this,e).get(e)},Vu=function(e){return lo(this,e).has(e)},Hi=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Pr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pr.prototype.clear=Wn,Pr.prototype.delete=Vo,Pr.prototype.get=Wo,Pr.prototype.has=Vu,Pr.prototype.set=Hi;var Ar=Pr,Ui=function(e,t){var n=this.__data__;if(n instanceof ne){var r=n.__data__;if(!jr||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ar(r)}return n.set(e,t),this.size=n.size,this};function kr(e){var t=this.__data__=new ne(e);this.size=t.size}kr.prototype.clear=Y,kr.prototype.delete=se,kr.prototype.get=Te,kr.prototype.has=De,kr.prototype.set=Ui;var Kn=kr,Gi=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Xi=function(e){return this.__data__.has(e)};function Kr(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ar;++t<n;)this.add(e[t])}Kr.prototype.add=Kr.prototype.push=Gi,Kr.prototype.has=Xi;var Yi=Kr,Wu=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Vi=function(e,t){return e.has(t)},Wi=function(e,t,n,r,a,o){var u=1&n,p=e.length,d=t.length;if(p!=d&&!(u&&d>p))return!1;var O=o.get(e),_=o.get(t);if(O&&_)return O==t&&_==e;var j=-1,k=!0,I=2&n?new Yi:void 0;for(o.set(e,t),o.set(t,e);++j<p;){var X=e[j],W=t[j];if(r)var oe=u?r(W,X,j,t,e,o):r(X,W,j,e,t,o);if(oe!==void 0){if(oe)continue;k=!1;break}if(I){if(!Wu(t,function(re,de){if(!Vi(I,de)&&(X===re||a(X,re,n,r,o)))return I.push(de)})){k=!1;break}}else if(X!==W&&!a(X,W,n,r,o)){k=!1;break}}return o.delete(e),o.delete(t),k},Zr=Xe.a.Uint8Array,Ki=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n},Ku=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},Zi=ft?ft.prototype:void 0,Ko=Zi?Zi.valueOf:void 0,qr=function(e,t,n,r,a,o,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Zr(e),new Zr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=Ki;case"[object Set]":var d=1&r;if(p||(p=Ku),e.size!=t.size&&!d)return!1;var O=u.get(e);if(O)return O==t;r|=2,u.set(e,t);var _=Wi(p(e),p(t),r,a,o,u);return u.delete(e),_;case"[object Symbol]":if(Ko)return Ko.call(e)==Ko.call(t)}return!1},Zn=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},Jt=Array.isArray,qi=function(e,t,n){var r=t(e);return Jt(e)?r:Zn(r,n(e))},Ji=function(e,t){for(var n=-1,r=e==null?0:e.length,a=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[a++]=u)}return o},$i=function(){return[]},Zu=Object.prototype.propertyIsEnumerable,fr=Object.getOwnPropertySymbols,Mn=fr?function(e){return e==null?[]:(e=Object(e),Ji(fr(e),function(t){return Zu.call(e,t)}))}:$i,qu=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Tn=function(e){return e!=null&&typeof e=="object"},_n=function(e){return Tn(e)&&wt(e)=="[object Arguments]"},Qi=Object.prototype,ea=Qi.hasOwnProperty,Ju=Qi.propertyIsEnumerable,fo=_n(function(){return arguments}())?_n:function(e){return Tn(e)&&ea.call(e,"callee")&&!Ju.call(e,"callee")},qn=fo,Jr=i(48),$u=/^(?:0|[1-9]\d*)$/,on=function(e,t){var n=typeof e;return!!(t=t==null?9007199254740991:t)&&(n=="number"||n!="symbol"&&$u.test(e))&&e>-1&&e%1==0&&e<t},pr=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},gt={};gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Arguments]"]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object Boolean]"]=gt["[object DataView]"]=gt["[object Date]"]=gt["[object Error]"]=gt["[object Function]"]=gt["[object Map]"]=gt["[object Number]"]=gt["[object Object]"]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object WeakMap]"]=!1;var wn=function(e){return Tn(e)&&pr(e.length)&&!!gt[wt(e)]},dr=function(e){return function(t){return e(t)}},Zt=i(49),ta=Zt.a&&Zt.a.isTypedArray,Zo=ta?dr(ta):wn,na=Object.prototype.hasOwnProperty,Dn=function(e,t){var n=Jt(e),r=!n&&qn(e),a=!n&&!r&&Object(Jr.a)(e),o=!n&&!r&&!a&&Zo(e),u=n||r||a||o,p=u?qu(e.length,String):[],d=p.length;for(var O in e)!t&&!na.call(e,O)||u&&(O=="length"||a&&(O=="offset"||O=="parent")||o&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||on(O,d))||p.push(O);return p},ra=Object.prototype,po=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||ra)},Nn=function(e,t){return function(n){return e(t(n))}},oa=Nn(Object.keys,Object),Qu=Object.prototype.hasOwnProperty,qo=function(e){if(!po(e))return oa(e);var t=[];for(var n in Object(e))Qu.call(e,n)&&n!="constructor"&&t.push(n);return t},It=function(e){return e!=null&&pr(e.length)&&!Xn(e)},Mr=function(e){return It(e)?Dn(e):qo(e)},ho=function(e){return qi(e,Mr,Mn)},yn=Object.prototype.hasOwnProperty,ia=function(e,t,n,r,a,o){var u=1&n,p=ho(e),d=p.length;if(d!=ho(t).length&&!u)return!1;for(var O=d;O--;){var _=p[O];if(!(u?_ in t:yn.call(t,_)))return!1}var j=o.get(e),k=o.get(t);if(j&&k)return j==t&&k==e;var I=!0;o.set(e,t),o.set(t,e);for(var X=u;++O<d;){var W=e[_=p[O]],oe=t[_];if(r)var re=u?r(oe,W,_,t,e,o):r(W,oe,_,e,t,o);if(!(re===void 0?W===oe||a(W,oe,n,r,o):re)){I=!1;break}X||(X=_=="constructor")}if(I&&!X){var de=e.constructor,me=t.constructor;de==me||!("constructor"in e)||!("constructor"in t)||typeof de=="function"&&de instanceof de&&typeof me=="function"&&me instanceof me||(I=!1)}return o.delete(e),o.delete(t),I},$r=Vn(Xe.a,"DataView"),yo=Vn(Xe.a,"Promise"),go=Vn(Xe.a,"Set"),vo=Vn(Xe.a,"WeakMap"),aa="[object Map]",gn="[object Promise]",xn="[object Set]",Tr="[object WeakMap]",Jo="[object DataView]",$o=kn($r),Qo=kn(jr),ua=kn(yo),es=kn(go),bo=kn(vo),hr=wt;($r&&hr(new $r(new ArrayBuffer(1)))!=Jo||jr&&hr(new jr)!=aa||yo&&hr(yo.resolve())!=gn||go&&hr(new go)!=xn||vo&&hr(new vo)!=Tr)&&(hr=function(e){var t=wt(e),n=t=="[object Object]"?e.constructor:void 0,r=n?kn(n):"";if(r)switch(r){case $o:return Jo;case Qo:return aa;case ua:return gn;case es:return xn;case bo:return Tr}return t});var y=hr,b="[object Arguments]",x="[object Array]",M="[object Object]",U=Object.prototype.hasOwnProperty,ee=function(e,t,n,r,a,o){var u=Jt(e),p=Jt(t),d=u?x:y(e),O=p?x:y(t),_=(d=d==b?M:d)==M,j=(O=O==b?M:O)==M,k=d==O;if(k&&Object(Jr.a)(e)){if(!Object(Jr.a)(t))return!1;u=!0,_=!1}if(k&&!_)return o||(o=new Kn),u||Zo(e)?Wi(e,t,n,r,a,o):qr(e,t,d,n,r,a,o);if(!(1&n)){var I=_&&U.call(e,"__wrapped__"),X=j&&U.call(t,"__wrapped__");if(I||X){var W=I?e.value():e,oe=X?t.value():t;return o||(o=new Kn),a(W,oe,n,r,o)}}return!!k&&(o||(o=new Kn),ia(e,t,n,r,a,o))},pe=function e(t,n,r,a,o){return t===n||(t==null||n==null||!Tn(t)&&!Tn(n)?t!=t&&n!=n:ee(t,n,r,a,e,o))},je=function(e,t,n,r){var a=n.length,o=a,u=!r;if(e==null)return!o;for(e=Object(e);a--;){var p=n[a];if(u&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<o;){var d=(p=n[a])[0],O=e[d],_=p[1];if(u&&p[2]){if(O===void 0&&!(d in e))return!1}else{var j=new Kn;if(r)var k=r(O,_,d,e,t,j);if(!(k===void 0?pe(_,O,3,r,j):k))return!1}}return!0},Fe=function(e){return e==e&&!Tt(e)},dt=function(e){for(var t=Mr(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Fe(a)]}return t},ot=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},xt=function(e){var t=dt(e);return t.length==1&&t[0][2]?ot(t[0][0],t[0][1]):function(n){return n===e||je(n,e,t)}},ct=function(e){return typeof e=="symbol"||Tn(e)&&wt(e)=="[object Symbol]"},Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,kt=function(e,t){if(Jt(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!ct(e))||En.test(e)||!Ot.test(e)||t!=null&&e in Object(t)};function an(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var u=e.apply(this,r);return n.cache=o.set(a,u)||o,u};return n.cache=new(an.Cache||Ar),n}an.Cache=Ar;var Qr=an,ts=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sa=/\\(\\)?/g,ca=function(e){var t=Qr(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ts,function(n,r,a,o){t.push(a?o.replace(sa,"$1"):r||n)}),t}),mo=ft?ft.prototype:void 0,ei=mo?mo.toString:void 0,un=function e(t){if(typeof t=="string")return t;if(Jt(t))return Le(t,e)+"";if(ct(t))return ei?ei.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},la=function(e){return e==null?"":un(e)},eo=function(e,t){return Jt(e)?e:kt(e,t)?[e]:ca(la(e))},ti=function(e){if(typeof e=="string"||ct(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},ns=function(e,t){for(var n=0,r=(t=eo(t,e)).length;e!=null&&n<r;)e=e[ti(t[n++])];return n&&n==r?e:void 0},jf=function(e,t,n){var r=e==null?void 0:ns(e,t);return r===void 0?n:r},Ov=function(e,t){return e!=null&&t in Object(e)},_v=function(e,t,n){for(var r=-1,a=(t=eo(t,e)).length,o=!1;++r<a;){var u=ti(t[r]);if(!(o=e!=null&&n(e,u)))break;e=e[u]}return o||++r!=a?o:!!(a=e==null?0:e.length)&&pr(a)&&on(u,a)&&(Jt(e)||qn(e))},Pf=function(e,t){return e!=null&&_v(e,t,Ov)},wv=function(e,t){return kt(e)&&Fe(t)?ot(ti(e),t):function(n){var r=jf(n,e);return r===void 0&&r===t?Pf(n,e):pe(t,r,3)}},rs=function(e){return e},xv=function(e){return function(t){return t==null?void 0:t[e]}},Ev=function(e){return function(t){return ns(t,e)}},Sv=function(e){return kt(e)?xv(ti(e)):Ev(e)},jv=function(e){return typeof e=="function"?e:e==null?rs:typeof e=="object"?Jt(e)?wv(e[0],e[1]):xt(e):Sv(e)},Af=function(e){return function(t,n,r){for(var a=-1,o=Object(t),u=r(t),p=u.length;p--;){var d=u[e?p:++a];if(n(o[d],d,o)===!1)break}return t}}(),Pv=function(e,t){return function(n,r){if(n==null)return n;if(!It(n))return e(n,r);for(var a=n.length,o=t?a:-1,u=Object(n);(t?o--:++o<a)&&r(u[o],o,u)!==!1;);return n}}(function(e,t){return e&&Af(e,t,Mr)}),Av=function(e,t){var n=-1,r=It(e)?Array(e.length):[];return Pv(e,function(a,o,u){r[++n]=t(a,o,u)}),r},fa=function(e,t){return(Jt(e)?Le:Av)(e,jv(t))};Object(c.n)({isolateGlobalState:!0});var pa=function(){try{var e=Vn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),os=function(e,t,n){t=="__proto__"&&pa?pa(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},kv=Object.prototype.hasOwnProperty,da=function(e,t,n){var r=e[t];kv.call(e,t)&&vt(r,n)&&(n!==void 0||t in e)||os(e,t,n)},Oo=function(e,t,n,r){var a=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var p=t[o],d=r?r(n[p],e[p],p,n,e):void 0;d===void 0&&(d=e[p]),a?os(n,p,d):da(n,p,d)}return n},Mv=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},kf=Math.max,Mf=function(e,t,n){return t=kf(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=kf(r.length-t,0),u=Array(o);++a<o;)u[a]=r[t+a];a=-1;for(var p=Array(t+1);++a<t;)p[a]=r[a];return p[t]=n(u),Mv(e,this,p)}},Tv=function(e){return function(){return e}},Dv=pa?function(e,t){return pa(e,"toString",{configurable:!0,enumerable:!1,value:Tv(t),writable:!0})}:rs,Nv=Date.now,Cv=function(e){var t=0,n=0;return function(){var r=Nv(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Tf=Cv(Dv),Rv=function(e,t){return Tf(Mf(e,t,rs),e+"")},Iv=function(e,t,n){if(!Tt(n))return!1;var r=typeof t;return!!(r=="number"?It(n)&&on(t,n.length):r=="string"&&t in n)&&vt(n[t],e)},Df=function(e){return Rv(function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,u=a>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(a--,o):void 0,u&&Iv(n[0],n[1],u)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var p=n[r];p&&e(t,p,r,o)}return t})},Lv=Object.prototype.hasOwnProperty,sn=Df(function(e,t){if(po(t)||It(t))Oo(t,Mr(t),e);else for(var n in t)Lv.call(t,n)&&da(e,n,t[n])}),zv=function(e,t,n,r){if(!Tt(e))return e;for(var a=-1,o=(t=eo(t,e)).length,u=o-1,p=e;p!=null&&++a<o;){var d=ti(t[a]),O=n;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(a!=u){var _=p[d];(O=r?r(_,d,p):void 0)===void 0&&(O=Tt(_)?_:on(t[a+1])?[]:{})}da(p,d,O),p=p[d]}return e},Bv=function(e,t,n){for(var r=-1,a=t.length,o={};++r<a;){var u=t[r],p=ns(e,u);n(p,u)&&zv(o,eo(u,e),p)}return o},Fv=function(e,t){return Bv(e,t,function(n,r){return Pf(e,r)})},Nf=ft?ft.isConcatSpreadable:void 0,Hv=function(e){return Jt(e)||qn(e)||!!(Nf&&e&&e[Nf])},Uv=function e(t,n,r,a,o){var u=-1,p=t.length;for(r||(r=Hv),o||(o=[]);++u<p;){var d=t[u];n>0&&r(d)?n>1?e(d,n-1,r,a,o):Zn(o,d):a||(o[o.length]=d)}return o},Gv=function(e){return e!=null&&e.length?Uv(e,1):[]},Lt,Cf,Rf,If,Lf,zf,Bf,Ff,Hf,Uf,Gf,Xf,Yf,Vf,Wf,Kf,Zf,qf,ni=function(e){return Tf(Mf(e,void 0,Gv),e+"")}(function(e,t){return e==null?{}:Fv(e,t)});function $t(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var _t,$f,ht,Ut,tt,Mt,Yv={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},is=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Qf=(Cf=qt((Lt=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),$t(this,"isSilentMode",Cf,this),$t(this,"stopZoomGraph",Rf,this),$t(this,"stopScrollGraph",If,this),$t(this,"stopMoveGraph",Lf,this),$t(this,"adjustEdge",zf,this),$t(this,"adjustEdgeMiddle",Bf,this),$t(this,"adjustEdgeStartAndEnd",Ff,this),$t(this,"adjustNodePosition",Hf,this),$t(this,"hideAnchors",Uf,this),$t(this,"hoverOutline",Gf,this),$t(this,"nodeSelectedOutline",Xf,this),$t(this,"edgeSelectedOutline",Yf,this),$t(this,"nodeTextEdit",Vf,this),$t(this,"edgeTextEdit",Wf,this),$t(this,"nodeTextDraggable",Kf,this),$t(this,"edgeTextDraggable",Zf,this),$t(this,"autoExpand",qf,this),Jf(this,"multipleSelectKey",""),Jf(this,"defaultConfig",{}),sn(this,this.getConfigDetail(r))}var t,n;return t=e,(n=[{key:"updateEditConfig",value:function(r){var a=this.getConfigDetail(r);sn(this,a)}},{key:"getConfigDetail",value:function(r){var a=r.isSilentMode,o=r.textEdit,u={};if(a===!1&&sn(u,this.defaultConfig),a===!0&&a!==this.isSilentMode){var p=ni(Yv,is);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},sn(u,p)}o===!1&&sn(u,{nodeTextEdit:!1,edgeTextEdit:!1});var d=ni(r,is);return sn(u,d)}},{key:"getConfig",value:function(){return ni(this,is)}}])&&Xv(t.prototype,n),e}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rf=qt(Lt.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),If=qt(Lt.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lf=qt(Lt.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zf=qt(Lt.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bf=qt(Lt.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ff=qt(Lt.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hf=qt(Lt.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Uf=qt(Lt.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gf=qt(Lt.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Xf=qt(Lt.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Yf=qt(Lt.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vf=qt(Lt.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wf=qt(Lt.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kf=qt(Lt.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=qt(Lt.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=qt(Lt.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt(Lt.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Lt.prototype,"updateEditConfig"),Lt.prototype),Lt);i(63),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(_t||(_t={})),function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"}($f||($f={})),function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"}(ht||(ht={})),function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"}(Ut||(Ut={})),function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"}(tt||(tt={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Mt||(Mt={}));var Sn,zt,ep,tp,np,rp,op,ip,ap;function ha(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return up(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return up(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function up(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function to(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function as(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(Sn||(Sn={}));var Wv=(zt=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),as(this,"MINI_SCALE_SIZE",.2),as(this,"MAX_SCALE_SIZE",16),to(this,"SCALE_X",ep,this),to(this,"SKEW_Y",tp,this),to(this,"SKEW_X",np,this),to(this,"SCALE_Y",rp,this),to(this,"TRANSLATE_X",op,this),to(this,"TRANSLATE_Y",ip,this),to(this,"ZOOM_SIZE",ap,this),as(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,n=[{key:"setZoomMiniSize",value:function(r){this.MINI_SCALE_SIZE=r}},{key:"setZoomMaxSize",value:function(r){this.MAX_SCALE_SIZE=r}},{key:"HtmlPointToCanvasPoint",value:function(r){var a=ha(r,2),o=a[0],u=a[1];return[(o-this.TRANSLATE_X)/this.SCALE_X,(u-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(r){var a=ha(r,2),o=a[0],u=a[1];return[o*this.SCALE_X+this.TRANSLATE_X,u*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(r,a,o){var u=ha(r,2),p=u[0],d=u[1];return[p+a/this.SCALE_X,d+o/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(r,a){return[r/this.SCALE_X,a/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var r=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(r,")")}}},{key:"zoom",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],a=arguments.length>1?arguments[1]:void 0,o=this.SCALE_X,u=this.SCALE_Y;return r===!0?(o+=this.ZOOM_SIZE,u+=this.ZOOM_SIZE):r===!1?(o-=this.ZOOM_SIZE,u-=this.ZOOM_SIZE):typeof r=="number"&&(o=r,u=r),o<this.MINI_SCALE_SIZE||o>this.MAX_SCALE_SIZE||(a&&(this.TRANSLATE_X-=(o-this.SCALE_X)*a[0],this.TRANSLATE_Y-=(u-this.SCALE_Y)*a[1]),this.SCALE_X=o,this.SCALE_Y=u,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(r){this.eventCenter.emit(tt.GRAPH_TRANSFORM,{type:r,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(r,a){this.TRANSLATE_X+=r,this.TRANSLATE_Y+=a,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(r,a,o,u){var p=ha(this.CanvasPointToHtmlPoint([r,a]),2),d=o/2-p[0],O=u/2-p[1];this.TRANSLATE_X+=d,this.TRANSLATE_Y+=O,this.emitGraphTransform("focusOn")}}],n&&Vv(t.prototype,n),e}(),ep=Bn(zt.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tp=Bn(zt.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),np=Bn(zt.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rp=Bn(zt.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),op=Bn(zt.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ip=Bn(zt.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ap=Bn(zt.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Bn(zt.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"zoom"),zt.prototype),Bn(zt.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"resetZoom"),zt.prototype),Bn(zt.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"translate"),zt.prototype),Bn(zt.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"focusOn"),zt.prototype),zt),Kv=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},Zv=function(e,t){return e&&Oo(t,Mr(t),e)},qv=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Jv=Object.prototype.hasOwnProperty,$v=function(e){if(!Tt(e))return qv(e);var t=po(e),n=[];for(var r in e)(r!="constructor"||!t&&Jv.call(e,r))&&n.push(r);return n},ri=function(e){return It(e)?Dn(e,!0):$v(e)},Qv=function(e,t){return e&&Oo(t,ri(t),e)},sp=i(106),cp=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},eb=function(e,t){return Oo(e,Mn(e),t)},us=Nn(Object.getPrototypeOf,Object),lp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Zn(t,Mn(e)),e=us(e);return t}:$i,tb=function(e,t){return Oo(e,lp(e),t)},nb=function(e){return qi(e,ri,lp)},rb=Object.prototype.hasOwnProperty,ob=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&rb.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ss=function(e){var t=new e.constructor(e.byteLength);return new Zr(t).set(new Zr(e)),t},ib=function(e,t){var n=t?ss(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},ab=/\w*$/,ub=function(e){var t=new e.constructor(e.source,ab.exec(e));return t.lastIndex=e.lastIndex,t},fp=ft?ft.prototype:void 0,pp=fp?fp.valueOf:void 0,sb=function(e){return pp?Object(pp.call(e)):{}},dp=function(e,t){var n=t?ss(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},cb=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return ss(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return ib(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return dp(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return ub(e);case"[object Symbol]":return sb(e)}},hp=Object.create,lb=function(){function e(){}return function(t){if(!Tt(t))return{};if(hp)return hp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),yp=function(e){return typeof e.constructor!="function"||po(e)?{}:lb(us(e))},fb=function(e){return Tn(e)&&y(e)=="[object Map]"},gp=Zt.a&&Zt.a.isMap,pb=gp?dr(gp):fb,db=function(e){return Tn(e)&&y(e)=="[object Set]"},vp=Zt.a&&Zt.a.isSet,hb=vp?dr(vp):db,bp="[object Arguments]",mp="[object Function]",yb="[object Object]",At={};At[bp]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At[mp]=At["[object WeakMap]"]=!1;var gb=function e(t,n,r,a,o,u){var p,d=1&n,O=2&n,_=4&n;if(r&&(p=o?r(t,a,o,u):r(t)),p!==void 0)return p;if(!Tt(t))return t;var j=Jt(t);if(j){if(p=ob(t),!d)return cp(t,p)}else{var k=y(t),I=k==mp||k=="[object GeneratorFunction]";if(Object(Jr.a)(t))return Object(sp.a)(t,d);if(k==yb||k==bp||I&&!o){if(p=O||I?{}:yp(t),!d)return O?tb(t,Qv(p,t)):eb(t,Zv(p,t))}else{if(!At[k])return o?t:{};p=cb(t,k,d)}}u||(u=new Kn);var X=u.get(t);if(X)return X;u.set(t,p),hb(t)?t.forEach(function(oe){p.add(e(oe,n,r,oe,t,u))}):pb(t)&&t.forEach(function(oe,re){p.set(re,e(oe,n,r,re,t,u))});var W=j?void 0:(_?O?nb:ho:O?ri:Mr)(t);return Kv(W||t,function(oe,re){W&&(oe=t[re=oe]),da(p,re,e(oe,n,r,re,t,u))}),p},Dt=function(e){return gb(e,5)},cs=function(e,t,n){(n!==void 0&&!vt(e[t],n)||n===void 0&&!(t in e))&&os(e,t,n)},vb=function(e){return Tn(e)&&It(e)},bb=Function.prototype,mb=Object.prototype,Op=bb.toString,Ob=mb.hasOwnProperty,_b=Op.call(Object),wb=function(e){if(!Tn(e)||wt(e)!="[object Object]")return!1;var t=us(e);if(t===null)return!0;var n=Ob.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Op.call(n)==_b},ls=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},xb=function(e){return Oo(e,ri(e))},Eb=function(e,t,n,r,a,o,u){var p=ls(e,n),d=ls(t,n),O=u.get(d);if(O)cs(e,n,O);else{var _=o?o(p,d,n+"",e,t,u):void 0,j=_===void 0;if(j){var k=Jt(d),I=!k&&Object(Jr.a)(d),X=!k&&!I&&Zo(d);_=d,k||I||X?Jt(p)?_=p:vb(p)?_=cp(p):I?(j=!1,_=Object(sp.a)(d,!0)):X?(j=!1,_=dp(d,!0)):_=[]:wb(d)||qn(d)?(_=p,qn(p)?_=xb(p):Tt(p)&&!Xn(p)||(_=yp(d))):j=!1}j&&(u.set(d,_),a(_,d,r,o,u),u.delete(d)),cs(e,n,_)}},Sb=function e(t,n,r,a,o){t!==n&&Af(n,function(u,p){if(o||(o=new Kn),Tt(u))Eb(t,n,p,r,e,a,o);else{var d=a?a(ls(t,p),u,p+"",t,n,o):void 0;d===void 0&&(d=u),cs(t,p,d)}},ri)},_p=Df(function(e,t,n){Sb(e,t,n)}),jb={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},wp=function(e){var t=Dt(jb);return e&&(t=_p(t,e)),t};i(77),i(158);function Pb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ab=function(){function e(){var r,a,o;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),o={},(a="_events")in(r=this)?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o}var t,n;return t=e,(n=[{key:"on",value:function(r,a,o){var u=this;return r==null||r.split(",").forEach(function(p){p=p.trim(),u._events[p]||(u._events[p]=[]),u._events[p].push({callback:a,once:!!o})}),this}},{key:"once",value:function(r,a){var o=this;r==null||r.split(",").forEach(function(u){return u=u.trim(),o.on(u,a,!0)})}},{key:"emit",value:function(r,a){var o=this;r==null||r.split(",").forEach(function(u){var p=o._events[u]||[],d=o._events["*"]||[],O=function(_){for(var j=_.length,k=0;k<j;k++)if(_[k]){var I=_[k],X=I.callback;I.once&&(_.splice(k,1),_.length===0&&delete o._events[u],j--,k--),X.apply(o,[a])}};O(p),O(d)})}},{key:"off",value:function(r,a){var o=this;return r||(this._events={}),r.split(",").forEach(function(u){if(a){for(var p=o._events[u]||[],d=p.length,O=0;O<d;O++)p[O].callback===a&&(p.splice(O,1),d--,O--);p.length===0&&delete o._events[u]}else delete o._events[u]}),this}},{key:"getEvents",value:function(){return this._events}}])&&Pb(t.prototype,n),e}();function Dr(e,t){return t*Math.round(e/t)||e}function xp(e,t){return e%t}function fs(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ep(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ep(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ps,ds=function(e,t,n){var r=fs(e,2),a=r[0],o=r[1],u=fs(t,2),p=u[0],d=u[1],O=fs(n,2),_=O[0],j=O[1];return a>p&&a<_&&o>d&&o<j},Sp=function(e,t){var n=!1;switch(t.multipleSelectKey){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1}return n},kb=(i(78),i(161),i(125),i(79),i(30),i(12),i(13),i(14),i(47),new Uint8Array(16));function Mb(){if(!ps&&!(ps=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ps(kb)}for(var Tb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Db=function(e){return typeof e=="string"&&Tb.test(e)},Qt=[],hs=0;hs<256;++hs)Qt.push((hs+256).toString(16).substr(1));var Nb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qt[e[t+0]]+Qt[e[t+1]]+Qt[e[t+2]]+Qt[e[t+3]]+"-"+Qt[e[t+4]]+Qt[e[t+5]]+"-"+Qt[e[t+6]]+Qt[e[t+7]]+"-"+Qt[e[t+8]]+Qt[e[t+9]]+"-"+Qt[e[t+10]]+Qt[e[t+11]]+Qt[e[t+12]]+Qt[e[t+13]]+Qt[e[t+14]]+Qt[e[t+15]]).toLowerCase();if(!Db(n))throw TypeError("Stringified UUID is invalid");return n},ys=function(e,t,n){var r=(e=e||{}).random||(e.rng||Mb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return Nb(r)},Nr=function(){return ys()},Cb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e.nodes.reduce(function(r,a){return r[a.id]=t+ys(),a.id=r[a.id],r},{});return e.edges.forEach(function(r){r.id=t+ys(),r.sourceNodeId=n[r.sourceNodeId],r.targetNodeId=n[r.targetNodeId]}),e},oi=(i(104),i(162),function(e,t,n){var r=e.x,a=e.y;return(r-t.x)*(r-n.x)<=0&&(a-t.y)*(a-n.y)<=0});function gs(e){return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}function jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jp(Object(n),!0).forEach(function(r){Rb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe,Ap,kp,Mp,Tp,Dp,Np,Cp,Rp,Ip,Lp,zp,Bp,Fp,Hp,Up,Gp,Xp,Yp,Vp,Wp,vs=function(e){return e.anchors},ya=function(e,t){for(var n,r=t.nodes,a=r.length-1;a>=0;a--){var o=r[a];if(Lb(e,o)){var u=o.getTargetAnchor(e);if(u){var p={node:o,anchorIndex:u.index,anchor:u.anchor};n&&!Ib(o,n.node,t)||(n=p)}}}return n},Ib=function(e,t,n){return e.zIndex>t.zIndex||n.nodesMap[e.id].index>n.nodesMap[t.id].index},Jn=function(e,t,n,r){return Math.hypot(e-n,t-r)},Cr=function(e,t){var n=!1,r=jn(t);return e.x>=r.minX-0&&e.x<=r.maxX+0&&e.y>=r.minY-0&&e.y<=r.maxY+0&&(n=!0),n},Lb=function(e,t){var n=!1,r=jn(t);return e.x>=r.minX-5&&e.x<=r.maxX+5&&e.y>=r.minY-5&&e.y<=r.maxY+5&&(n=!0),n},jn=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return{minX:t-r/2,minY:n-a/2,maxX:t+r/2,maxY:n+a/2,x:t,y:n,width:r,height:a,centerX:t,centerY:n}},Kp=function(e,t,n){var r,a=function(u){var p=u,d=p.x,O=p.y,_=p.width,j=p.height,k=p.radius;return[{x:d-_/2+k,y:O-j/2+k,r:k},{x:d+_/2-k,y:O-j/2+k,r:k},{x:d-_/2+k,y:O+j/2-k,r:k},{x:d+_/2-k,y:O+j/2-k,r:k}]}(n),o=Number.MAX_SAFE_INTEGER;return a.forEach(function(u){var p=Jn(e.x,e.y,u.x,u.y);p<o&&(o=p,r=u)}),bs(e,t,r)},bs=function(e,t,n){var r,a=n,o=a.x,u=a.y,p=a.r;if(t===Mt.HORIZONTAL){var d=o-Math.sqrt(p*p-(e.y-u)*(e.y-u)),O=o+Math.sqrt(p*p-(e.y-u)*(e.y-u));r={x:Math.abs(d-e.x)<Math.abs(O-e.x)?d:O,y:e.y}}else if(t===Mt.VERTICAL){var _=u-Math.sqrt(p*p-(e.x-o)*(e.x-o)),j=u+Math.sqrt(p*p-(e.x-o)*(e.x-o)),k=Math.abs(_-e.y)<Math.abs(j-e.y)?_:j;r={x:e.x,y:k}}return r},Zp=function(e,t){var n=t,r=!1,a=n.x-n.width/2+n.radius,o=n.x+n.width/2-n.radius,u=n.y-n.height/2+n.radius,p=n.y+n.height/2-n.radius,d=n.x,O=n.y,_=n.width,j=n.height;return e.y===O+j/2||e.y===O-j/2?r=e.x>a&&e.x<o:e.x!==d+_/2&&e.x!==d-_/2||(r=e.y>u&&e.y<p),r},qp=function(e,t,n){var r,a=n,o=a.x,u=a.y,p=a.rx,d=a.ry;if(t===Mt.HORIZONTAL){var O=o-Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(d*d)),_=o+Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(d*d));r={x:Math.abs(O-e.x)<Math.abs(_-e.x)?O:_,y:e.y}}else if(t===Mt.VERTICAL){var j=u-Math.sqrt(d*d-(e.x-o)*(e.x-o)*d*d/(p*p)),k=u+Math.sqrt(d*d-(e.x-o)*(e.x-o)*d*d/(p*p)),I=Math.abs(j-e.y)<Math.abs(k-e.y)?j:k;r={x:e.x,y:I}}return r},Jp=function(e,t,n){for(var r,a=n.pointsPosition,o=Number.MAX_SAFE_INTEGER,u=[],p=0;p<a.length;p++)u.push({start:a[p],end:a[(p+1)%a.length]});return u.forEach(function(d){var O=d.start,_=d.end,j=O,k=_;O.x>_.x&&(j=_,k=O);var I={x:e.x,y:e.y};if(j.x===k.x&&t===Mt.HORIZONTAL&&(I={x:j.x,y:e.y}),j.y===k.y&&t===Mt.VERTICAL&&(I={x:e.x,y:j.y}),j.x!==k.x&&j.y!==k.y){var X=(k.y-j.y)/(k.x-j.x),W=(j.x*k.y-k.x*j.y)/(j.x-k.x);t===Mt.HORIZONTAL?I={x:(e.y-W)/X,y:e.y}:t===Mt.VERTICAL&&(I={x:e.x,y:X*e.x+W})}if(oi(I,O,_)){var oe=Jn(I.x,I.y,e.x,e.y);oe<o&&(o=oe,r=I)}}),r},$p=function(e,t,n,r){var a=e.x,o=e.y;return t.x>e.x?a=e.x+n/2:t.x<e.x&&(a=e.x-n/2),t.y>e.y?o=e.y+r/2:t.y<e.y&&(o=e.y-r/2),{x:a,y:o}},Qp=function(e){var t=e.rows,n=e.style,r=e.rowsLength,a=e.className,o=document.createElement("div");o.style.fontSize=n.fontSize,o.style.width=n.width,o.className=a,o.style.lineHeight=n.lineHeight,o.style.padding=n.padding,n.fontFamily&&(o.style.fontFamily=n.fontFamily),r>1?t.forEach(function(p){var d=document.createElement("div");d.textContent=p,o.appendChild(d)}):o.textContent=t,document.body.appendChild(o);var u=o.clientHeight;return document.body.removeChild(o),u},ms=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,a=0;return t&&t.forEach(function(o){var u=wd(o);a=u>a?u:a}),{width:Math.ceil(a/2)*r+r/4,height:n*(r+2)+r/4}},ii=function(e){return gs(e)!=="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e},tn=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}},zb=1e3,Bb=999,Os=function(){return++zb};function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Fb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var _s=(Oe=function(){function e(r,a){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Cn(this,"id",""),Gt(this,"type",Ap,this),Gt(this,"sourceNodeId",kp,this),Gt(this,"targetNodeId",Mp,this),Gt(this,"startPoint",Tp,this),Gt(this,"endPoint",Dp,this),Gt(this,"text",Np,this),Gt(this,"properties",Cp,this),Gt(this,"points",Rp,this),Gt(this,"pointsList",Ip,this),Gt(this,"isSelected",Lp,this),Gt(this,"isHovered",zp,this),Gt(this,"isHitable",Bp,this),Gt(this,"draggable",Fp,this),Gt(this,"visible",Hp,this),Cn(this,"virtual",!1),Gt(this,"isAnimation",Up,this),Gt(this,"isShowAdjustPoint",Gp,this),Cn(this,"graphModel",void 0),Gt(this,"zIndex",Xp,this),Cn(this,"BaseType",Ut.EDGE),Cn(this,"modelType",ht.EDGE),Gt(this,"state",Yp,this),Cn(this,"additionStateData",void 0),Cn(this,"sourceAnchorId",""),Cn(this,"targetAnchorId",""),Cn(this,"menu",void 0),Cn(this,"customTextPosition",!1),Gt(this,"style",Vp,this),Gt(this,"arrowConfig",Wp,this),this.graphModel=a,this.initEdgeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"initEdgeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,o=a&&a(r.type),u=this.createId();r.id=u||o||Nr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(r.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(r.id,")");var p=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=p,sn(this,um(r)),this.graphModel.overlapMode===Sn.INCREASE&&(this.zIndex=r.zIndex||Os()),this.setAnchors(),this.initPoints(),this.formatText(r)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return vn(vn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return vn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.edgeText;return Dt(r)}},{key:"getEdgeAnimationStyle",value:function(){var r=this.graphModel.theme.edgeAnimation;return Dt(r)}},{key:"getArrowStyle",value:function(){var r=this.getEdgeStyle(),a=this.getEdgeAnimationStyle(),o=this.graphModel.theme.arrow,u=this.isAnimation?a.stroke:r.stroke;return vn(vn({},r),{},{fill:u,stroke:u},o)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Dt(r)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.sourceNodeId])===null||a===void 0?void 0:a.model}},{key:"targetNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.targetNodeId])===null||a===void 0?void 0:a.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(r,a){var o,u;return vs(r).forEach(function(p){var d=jd(p,a);(u===void 0||d<u)&&(u=d,o=p)}),o}},{key:"getEndAnchor",value:function(r){var a,o,u=this;return vs(r).forEach(function(p){var d=jd(p,u.startPoint);(o===void 0||d<o)&&(o=d,a=p)}),a}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var r=this.text,a=r.x,o=r.y,u=r.value,p={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return u&&(p.text={x:a,y:o,value:u}),this.graphModel.overlapMode===Sn.INCREASE&&(p.zIndex=this.zIndex),p}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(r,a){this.properties[r]=tn(a),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=vn(vn({},Object(c.I)(this.properties)),tn(r)),this.setAttributes()}},{key:"changeEdgeId",value:function(r){var a=this.arrowConfig,o=a.markerEnd,u=a.markerStart;u&&u==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(r,")")),o&&o==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(r,")")),this.id=r}},{key:"setStyle",value:function(r,a){this.style=vn(vn({},this.style),{},Cn({},r,tn(a)))}},{key:"setStyles",value:function(r){this.style=vn(vn({},this.style),tn(r))}},{key:"updateStyles",value:function(r){this.style=vn({},tn(r))}},{key:"formatText",value:function(r){var a=this.textPosition,o=a.x,u=a.y;r.text&&typeof r.text!="string"?Object.prototype.toString.call(r.text)==="[object Object]"&&(this.text={x:r.text.x||o,y:r.text.y||u,value:r.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:r.text||"",x:o,y:u,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var r=this.textPosition,a=r.x,o=r.y;this.text.x=a,this.text.y=o}},{key:"moveText",value:function(r,a){if(this.text){var o=this.text,u=o.x,p=o.y,d=o.value,O=o.draggable,_=o.editable;this.text={value:d,draggable:O,x:u+r,y:p+a,editable:_}}}},{key:"setText",value:function(r){r&&sn(this.text,r)}},{key:"updateText",value:function(r){this.text=vn(vn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var r=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:r.x,y:r.y}),this.sourceAnchorId||(this.sourceAnchorId=r.id)}if(!this.targetAnchorId||!this.endPoint){var a=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:a.x,y:a.y}),this.targetAnchorId||(this.targetAnchorId=a.id)}}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"updateStartPoint",value:function(r){this.startPoint=r}},{key:"moveStartPoint",value:function(r,a){this.startPoint.x+=r,this.startPoint.y+=a}},{key:"updateEndPoint",value:function(r){this.endPoint=r}},{key:"moveEndPoint",value:function(r,a){this.endPoint.x+=r,this.endPoint.y+=a}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=r}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(r){sn(this,r)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(r){var a=r.startPoint,o=r.endPoint;this.updateStartPoint({x:a.x,y:a.y}),this.updateEndPoint({x:o.x,y:o.y})}}],n&&Fb(t.prototype,n),e}(),Ap=Qe(Oe.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kp=Qe(Oe.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mp=Qe(Oe.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tp=Qe(Oe.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dp=Qe(Oe.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Np=Qe(Oe.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Cp=Qe(Oe.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Rp=Qe(Oe.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ip=Qe(Oe.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Lp=Qe(Oe.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zp=Qe(Oe.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bp=Qe(Oe.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fp=Qe(Oe.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hp=Qe(Oe.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Up=Qe(Oe.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gp=Qe(Oe.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xp=Qe(Oe.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yp=Qe(Oe.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Vp=Qe(Oe.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Wp=Qe(Oe.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Qe(Oe.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"sourceNode"),Oe.prototype),Qe(Oe.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"targetNode"),Oe.prototype),Qe(Oe.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Oe.prototype,"textPosition"),Oe.prototype),Qe(Oe.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setProperty"),Oe.prototype),Qe(Oe.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"deleteProperty"),Oe.prototype),Qe(Oe.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setProperties"),Oe.prototype),Qe(Oe.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"changeEdgeId"),Oe.prototype),Qe(Oe.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setStyle"),Oe.prototype),Qe(Oe.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setStyles"),Oe.prototype),Qe(Oe.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateStyles"),Oe.prototype),Qe(Oe.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"formatText"),Oe.prototype),Qe(Oe.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"resetTextPosition"),Oe.prototype),Qe(Oe.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveText"),Oe.prototype),Qe(Oe.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setText"),Oe.prototype),Qe(Oe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateText"),Oe.prototype),Qe(Oe.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setAnchors"),Oe.prototype),Qe(Oe.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setSelected"),Oe.prototype),Qe(Oe.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setHovered"),Oe.prototype),Qe(Oe.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setHitable"),Oe.prototype),Qe(Oe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"openEdgeAnimation"),Oe.prototype),Qe(Oe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"closeEdgeAnimation"),Oe.prototype),Qe(Oe.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setElementState"),Oe.prototype),Qe(Oe.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateStartPoint"),Oe.prototype),Qe(Oe.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveStartPoint"),Oe.prototype),Qe(Oe.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateEndPoint"),Oe.prototype),Qe(Oe.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"moveEndPoint"),Oe.prototype),Qe(Oe.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"setZIndex"),Oe.prototype),Qe(Oe.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"initPoints"),Oe.prototype),Qe(Oe.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateAttributes"),Oe.prototype),Qe(Oe.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"getAdjustStart"),Oe.prototype),Qe(Oe.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"getAdjustEnd"),Oe.prototype),Qe(Oe.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Oe.prototype,"updateAfterAdjustStartAndEnd"),Oe.prototype),Oe),ws=_s;function xs(e){return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(e)}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?td(Object(n),!0).forEach(function(r){od(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Es(){return Es=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=Gb(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Es.apply(this,arguments)}function Gb(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=_o(e))!==null;);return e}function Ss(e,t){return Ss=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ss(e,t)}function Xb(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=_o(e);if(t){var a=_o(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yb(this,n)}}function Yb(e,t){if(t&&(xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rd(e)}function rd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(e)}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st,id,js=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ss(o,u)})(a,e);var t,n,r=Xb(a);function a(){var o;Hb(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return od(rd(o=r.call.apply(r,[this].concat(p))),"modelType",ht.LINE_EDGE),o}return t=a,(n=[{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.line;return nd(nd({},Es(_o(a.prototype),"getEdgeStyle",this).call(this)),Dt(o))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Ub(t.prototype,n),a}(ws);function Ps(e){return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ps(e)}function Vb(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ad(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ad(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ad(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){ks(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wb(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Kb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(){return ai=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=qb(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},ai.apply(this,arguments)}function qb(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rr(e))!==null;);return e}function As(e,t){return As=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},As(e,t)}function Jb(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Rr(e);if(t){var a=Rr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $b(this,n)}}function $b(e,t){if(t&&(Ps(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ui(e)}function ui(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(e)}function ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Ms=(st=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&As(o,u)})(a,e);var t,n,r=Jb(a);function a(){var o;Kb(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ks(ui(o=r.call.apply(r,[this].concat(p))),"modelType",ht.POLYLINE_EDGE),ks(ui(o),"draggingPointList",void 0),Wb(ui(o),"dbClickPosition",id,ui(o)),o}return t=a,(n=[{key:"initEdgeData",value:function(o){this.offset=30,ai(Rr(a.prototype),"initEdgeData",this).call(this,o)}},{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.polyline;return sd(sd({},ai(Rr(a.prototype),"getEdgeStyle",this).call(this)),Dt(o))}},{key:"getTextPosition",value:function(){var o,u=(o=this.text)===null||o===void 0?void 0:o.value;if(this.dbClickPosition&&!u){var p=this.dbClickPosition;return{x:p.x,y:p.y}}var d=no(this.points),O=Vb(im(d),2),_=O[0],j=O[1];return{x:(_.x+j.x)/2,y:(_.y+j.y)/2}}},{key:"getAfterAnchor",value:function(o,u,p){var d,O;return p.forEach(function(_){var j;o===Mt.HORIZONTAL?j=Math.abs(u.y-_.y):o===Mt.VERTICAL&&(j=Math.abs(u.x-_.x)),(!O||O>j)&&(O=j,d=_)}),d}},{key:"getCrossPoint",value:function(o,u,p){var d;return o===Mt.HORIZONTAL?d={x:p.x,y:u.y}:o===Mt.VERTICAL&&(d={x:u.x,y:p.y}),d}},{key:"removeCrossPoints",value:function(o,u,p){var d=p.map(function(re){return re});if(o===1){var O=d[o],_=d[u],j=d[o-1];if(bd(j,O,this.sourceNode)){if(md(O,_,this.sourceNode)){var k=Od(O,_,this.sourceNode);k&&(d[o]=k,d.splice(o-1,1),o--,u--)}}else this.sourceNode.anchors.forEach(function(re){(re.x===j.x&&re.x===O.x||re.y===j.y&&re.y===O.y)&&Jn(re.x,re.y,O.x,O.y)<Jn(j.x,j.y,O.x,O.y)&&(d[o-1]=re)})}if(u===p.length-2){var I=d[o],X=d[u],W=d[u+1];if(bd(X,W,this.targetNode)){if(md(I,X,this.targetNode)){var oe=Od(I,X,this.targetNode);oe&&(d[u]=oe,d.splice(u+1,1))}}else this.targetNode.anchors.forEach(function(re){(re.x===W.x&&re.x===X.x||re.y===W.y&&re.y===X.y)&&Jn(re.x,re.y,X.x,X.y)<Jn(W.x,W.y,X.x,X.y)&&(d[u+1]=re)})}return d}},{key:"getDraggingPoints",value:function(o,u,p,d,O){var _=O.map(function(I){return I}),j=this.getAfterAnchor(o,p,d),k=this.getCrossPoint(o,p,j);return u==="start"?(_.unshift(k),_.unshift(j)):(_.push(k),_.push(j)),_}},{key:"updateCrossPoints",value:function(o){var u=o.map(function(me){return me}),p=o[0],d=o[1],O=o[u.length-2],_=o[u.length-1],j=this.sourceNode,k=this.targetNode,I=j.modelType,X=k.modelType,W=wa(p,d),oe=u[0];switch(I){case ht.RECT_NODE:j.radius!==0&&(Zp(p,j)||(oe=Kp(p,W,j)));break;case ht.CIRCLE_NODE:oe=bs(p,W,j);break;case ht.ELLIPSE_NODE:oe=qp(p,W,j);break;case ht.DIAMOND_NODE:case ht.POLYGON_NODE:oe=Jp(p,W,j)}u[0]=oe;var re=wa(O,_),de=u[u.length-1];switch(X){case ht.RECT_NODE:k.radius!==0&&(Zp(_,k)||(de=Kp(_,re,k)));break;case ht.CIRCLE_NODE:de=bs(_,re,k);break;case ht.ELLIPSE_NODE:de=qp(_,re,k);break;case ht.DIAMOND_NODE:case ht.POLYGON_NODE:de=Jp(_,re,k)}return u[u.length-1]=de,u}},{key:"getData",value:function(){var o=ai(Rr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Object.assign({},o,{pointsList:u})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(o){return"".concat(o.x,",").concat(o.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var o=vd({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=o,this.points=o.map(function(u){return"".concat(u.x,",").concat(u.y)}).join(" ")}},{key:"updateStartPoint",value:function(o){this.startPoint=o,this.updatePoints()}},{key:"moveStartPoint",value:function(o,u){this.startPoint.x+=o,this.startPoint.y+=u,this.updatePoints()}},{key:"updateEndPoint",value:function(o){this.endPoint=o,this.updatePoints()}},{key:"moveEndPoint",value:function(o,u){this.endPoint.x+=o,this.endPoint.y+=u,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(o){return o})}},{key:"dragAppendSimple",value:function(o,u){this.isDragging=!0;var p=o.start,d=o.end,O=o.startIndex,_=o.endIndex,j=o.direction,k=this.pointsList,I=k;return j===Mt.HORIZONTAL?(k[O]={x:p.x,y:p.y+u.y},k[_]={x:d.x,y:d.y+u.y},I=this.pointsList.map(function(X){return X})):j===Mt.VERTICAL&&(k[O]={x:p.x+u.x,y:p.y},k[_]={x:d.x+u.x,y:d.y},I=this.pointsList.map(function(X){return X})),this.updatePointsAfterDrag(I),this.draggingPointList=I,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[O]),end:Object.assign({},k[_]),startIndex:O,endIndex:_,direction:j}}},{key:"dragAppend",value:function(o,u){this.isDragging=!0;var p=o.start,d=o.end,O=o.startIndex,_=o.endIndex,j=o.direction,k=this.pointsList;if(j===Mt.HORIZONTAL){k[O]={x:p.x,y:p.y+u.y},k[_]={x:d.x,y:d.y+u.y};var I=this.pointsList.map(function(Me){return Me});if(O!==0&&_!==this.pointsList.length-1&&(I=this.removeCrossPoints(O,_,I)),O===0){var X={x:p.x,y:p.y+u.y};if(!Cr(X,this.sourceNode)){var W=this.sourceNode.anchors;I=this.getDraggingPoints(j,"start",X,W,I)}}if(_===this.pointsList.length-1){var oe={x:d.x,y:d.y+u.y};if(!Cr(oe,this.targetNode)){var re=this.targetNode.anchors;I=this.getDraggingPoints(j,"end",oe,re,I)}}this.updatePointsAfterDrag(I),this.draggingPointList=I}else if(j===Mt.VERTICAL){k[O]={x:p.x+u.x,y:p.y},k[_]={x:d.x+u.x,y:d.y};var de=this.pointsList.map(function(Me){return Me});if(O!==0&&_!==this.pointsList.length-1&&(de=this.removeCrossPoints(O,_,de)),O===0){var me={x:p.x+u.x,y:p.y};if(!Cr(me,this.sourceNode)){var ke=this.sourceNode.anchors;de=this.getDraggingPoints(j,"start",me,ke,de)}}if(_===this.pointsList.length-1){var Ee={x:d.x+u.x,y:d.y};if(!Cr(Ee,this.targetNode)){var Ue=this.targetNode.anchors;de=this.getDraggingPoints(j,"end",Ee,Ue,de)}}this.updatePointsAfterDrag(de),this.draggingPointList=de}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[O]),end:Object.assign({},k[_]),startIndex:O,endIndex:_,direction:j}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var o=gd(no(this.points));this.pointsList=o.map(function(d){return d}),this.draggingPointList=[];var u=o[0];this.startPoint=Object.assign({},u);var p=o[o.length-1];this.endPoint=Object.assign({},p)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(o){var u=this.updateCrossPoints(o);this.points=u.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var o=this.pointsList;return o[o.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(o){var u=o.startPoint,p=o.endPoint,d=o.sourceNode,O=o.targetNode,_=vd({x:u.x,y:u.y},{x:p.x,y:p.y},d,O,this.offset||0);this.pointsList=_,this.initPoints()}}])&&Zb(t.prototype,n),a}(ws),id=cn(st.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn(st.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"initPoints"),st.prototype),cn(st.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePoints"),st.prototype),cn(st.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateStartPoint"),st.prototype),cn(st.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveStartPoint"),st.prototype),cn(st.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateEndPoint"),st.prototype),cn(st.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveEndPoint"),st.prototype),cn(st.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendStart"),st.prototype),cn(st.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendSimple"),st.prototype),cn(st.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppend"),st.prototype),cn(st.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendEnd"),st.prototype),cn(st.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePointsAfterDrag"),st.prototype),cn(st.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustStart"),st.prototype),cn(st.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustEnd"),st.prototype),cn(st.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateAfterAdjustStartAndEnd"),st.prototype),st),si=function(e){var t=e.start,n=e.end,r=e.offset,a=e.verticalLength,o=e.type,u={leftX:0,leftY:0,rightX:0,rightY:0},p=Math.atan((n.y-t.y)/(n.x-t.x)),d=Math.atan(r/a),O=Math.sqrt(a*a+r*r);return o==="start"?n.x>=t.x?(u.leftX=t.x+O*Math.sin(p+d),u.leftY=t.y-O*Math.cos(p+d),u.rightX=t.x-O*Math.sin(p-d),u.rightY=t.y+O*Math.cos(p-d)):(u.leftX=t.x-O*Math.sin(p+d),u.leftY=t.y+O*Math.cos(p+d),u.rightX=t.x+O*Math.sin(p-d),u.rightY=t.y-O*Math.cos(p-d)):o==="end"&&(n.x>=t.x?(u.leftX=n.x+O*Math.sin(p-d),u.leftY=n.y-O*Math.cos(p-d),u.rightX=n.x-O*Math.sin(p+d),u.rightY=n.y+O*Math.cos(p+d)):(u.leftX=n.x-O*Math.sin(p-d),u.leftY=n.y+O*Math.cos(p-d),u.rightX=n.x+O*Math.sin(p+d),u.rightY=n.y-O*Math.cos(p+d))),u},Qb={x:1,y:0,z:0};function cd(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function em(e){return r=function(o,u){return o.x*u.y-o.y*u.x}(t=Qb,n=e),a=Math.acos(function(o,u){var p=[o.x,o.y,o.z];return[u.x,u.y,u.z].reduce(function(d,O,_){return d+O*p[_]})}(cd(t),cd(n))),r>=0?a:-a;var t,n,r,a}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(r){tm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nm(e){return function(t){if(Array.isArray(t))return Ds(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||fd(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ts(e){return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function va(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||fd(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fd(e,t){if(e){if(typeof e=="string")return Ds(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ds(e,t):void 0}}function Ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ns=function(e){var t=[],n={};return e.forEach(function(r){var a="".concat(r.x,"-").concat(r.y);r.id=a,n[a]=r}),Object.keys(n).forEach(function(r){t.push(n[r])}),t},ba=function(e,t){return e.width===0&&e.height===0?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},ma=function(e,t,n){var r=function(a,o){var u=Math.abs(a.x-o.centerX),p=Math.abs(a.y-o.centerY);return u/o.width>p/o.height?Mt.HORIZONTAL:Mt.VERTICAL}(n,t);return r===Mt.HORIZONTAL?{x:n.x>e.centerX?e.maxX:e.minX,y:n.y}:{x:n.x,y:n.y>e.centerY?e.maxY:e.minY}},pd=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:a,maxY:o,height:o-r,width:a-n}},ci=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=[];e.forEach(function(_){n.push(_.x),r.push(_.y)});var a=Math.min.apply(Math,n),o=Math.max.apply(Math,n),u=Math.min.apply(Math,r),p=Math.max.apply(Math,r),d=o-a,O=p-u;return t&&(d+=t,O+=t),{centerX:(a+o)/2,centerY:(u+p)/2,maxX:o,maxY:p,minX:a,minY:u,x:(a+o)/2,y:(u+p)/2,height:O,width:d}},Oa=function(e){var t=e.minX,n=e.minY,r=e.maxX,a=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:a},{x:t,y:a}]},_a=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},Cs=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},dd=function(e,t,n,r,a){return Cs(e,t)+Cs(e,n)+function(o,u){var p=0;return u.forEach(function(d){d&&(o.x===d.x&&(p+=-2),o.y===d.y&&(p+=-2))}),p}(e,[t,n,r,a])},rm=function e(t,n,r,a,o){o||(o=0),t.unshift(n[a]),r[a]&&r[a]!==a&&o<=100&&e(t,n,r,r[a],o+1)},li=function(e,t,n,r){var a=t.x-e.x,o=t.y-e.y,u=r.x-n.x,p=r.y-n.y,d=(-o*(e.x-n.x)+a*(e.y-n.y))/(-u*o+a*p),O=(u*(e.y-n.y)-p*(e.x-n.x))/(-u*o+a*p);return d>=0&&d<=1&&O>=0&&O<=1},hd=function(e,t,n){if(n.width===0&&n.height===0)return!1;var r=va(Oa(n),4),a=r[0],o=r[1],u=r[2],p=r[3];return li(e,t,a,o)||li(e,t,a,p)||li(e,t,o,u)||li(e,t,u,p)},om=function(e,t,n,r,a,o,u){var p=[],d=[t],O={},_={},j={};_[t.id]=0,j[t.id]=dd(t,n,t);var k={};e.forEach(function(W){k[W.id]=W});for(var I=function(){var W,oe,re,de=void 0,me=1/0;if(d.forEach(function(Ee){j[Ee.id]<me&&(me=j[Ee.id],de=Ee)}),de===n){var ke=[];return rm(ke,k,O,n.id),{v:ke}}oe=de,(re=(W=d).indexOf(oe))>-1&&W.splice(re,1),p.push(de),function(Ee,Ue,Me,Be){var Re=[];return Ee.forEach(function(lt){lt!==Ue&&(lt.x!==Ue.x&&lt.y!==Ue.y||hd(lt,Ue,Me)||hd(lt,Ue,Be)||Re.push(lt))}),Ns(Re)}(e,de,r,a).forEach(function(Ee){if(p.indexOf(Ee)===-1){d.indexOf(Ee)===-1&&d.push(Ee);var Ue=j[de.id]+Cs(de,Ee);_[Ee.id]&&Ue>=_[Ee.id]||(O[Ee.id]=de.id,_[Ee.id]=Ue,j[Ee.id]=_[Ee.id]+dd(Ee,n,t,o,u))}})};d.length;){var X=I();if(Ts(X)==="object")return X.v}return[t,n]},yd=function(e){return jn(e)},gd=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],r=e[t],a=e[t+1];n.x===r.x&&r.x===a.x||n.y===r.y&&r.y===a.y?e.splice(t,1):t++}return e},vd=function(e,t,n,r,a){var o,u,p=yd(n),d=yd(r),O=ba(p,a),_=ba(d,a),j=ma(O,p,e),k=ma(_,d,t);if(o=O,u=_,2*Math.abs(o.centerX-u.centerX)<o.width+u.width&&2*Math.abs(o.centerY-u.centerY)<o.height+u.height){var I=am(e,t,j,k);return[e,j].concat(nm(I),[k,t])}var X=ci([j,k]),W=pd(O,X),oe=pd(_,X),re=[];re=(re=re.concat(Oa(W))).concat(Oa(oe));var de={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[X,W,oe].forEach(function(ke){re=re.concat(function(Ee,Ue){return function(Me,Be){return Be<Me.minX||Be>Me.maxX?[]:[{x:Be,y:Me.minY},{x:Be,y:Me.maxY}]}(Ee,Ue.x).concat(function(Me,Be){return Be<Me.minY||Be>Me.maxY?[]:[{x:Me.minX,y:Be},{x:Me.maxX,y:Be}]}(Ee,Ue.y))}(ke,de).filter(function(Ee){return _a(Ee,O)&&_a(Ee,_)}))}),[{x:j.x,y:k.y},{x:k.x,y:j.y}].forEach(function(ke){_a(ke,O)&&_a(ke,_)&&re.push(ke)}),re.unshift(j),re.push(k),re=Ns(re);var me=om(re,j,k,p,d,e,t);return me.unshift(e),me.push(t),me.length>2&&(me=gd(me)),Ns(me)},im=function(e){var t;if(e.length===1)t=[e[0],e[0]];else if(e.length>=2){for(var n=e[0],r=e[1],a=Jn(n.x,n.y,r.x,r.y),o=1;o<e.length-1;o++){var u=e[o],p=e[o+1],d=Jn(u.x,u.y,p.x,p.y);d>a&&(a=d,n=u,r=p)}t=[n,r]}return t},bd=function(e,t,n){var r=Cr(e,n),a=Cr(t,n);return r&&a},md=function(e,t,n){var r=Cr(e,n),a=Cr(t,n);return!(r&&a)&&(r||a)},Od=function(e,t,n){for(var r,a,o=jn(n),u=Oa(o),p=0;p<u.length;p++)li(e,t,u[p],u[(p+1)%u.length])&&(a=[u[p],u[(p+1)%u.length]]);return a&&(r=function(d,O,_,j){var k=(O.y-d.y)*(j.x-_.x)-(d.x-O.x)*(_.y-j.y);if(k===0)return!1;var I=((O.x-d.x)*(j.x-_.x)*(_.y-d.y)+(O.y-d.y)*(j.x-_.x)*d.x-(j.y-_.y)*(O.x-d.x)*_.x)/k,X=-((O.y-d.y)*(j.y-_.y)*(_.x-d.x)+(O.x-d.x)*(j.y-_.y)*d.y-(j.x-_.x)*(O.y-d.y)*_.y)/k;return(I-d.x)*(I-O.x)<=0&&(X-d.y)*(X-O.y)<=0&&(I-_.x)*(I-j.x)<=0&&(X-_.y)*(X-j.y)<=0&&{x:I,y:X}}(e,t,a[0],a[1])),r},wa=function(e,t){var n;return e.x===t.x?n=Mt.VERTICAL:e.y===t.y&&(n=Mt.HORIZONTAL),n},no=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(r){var a=va(r.split(","),2),o=a[0],u=a[1];n.push({x:Number(o),y:Number(u)})}),n},am=function(e,t,n,r){var a=[];if(wa(e,n)===wa(t,r))e.y===n.y?(a.push({x:n.x,y:(n.y+r.y)/2}),a.push({x:r.x,y:(n.y+r.y)/2})):(a.push({x:(n.x+r.x)/2,y:n.y}),a.push({x:(n.x+r.x)/2,y:r.y}));else{var o={x:n.x,y:r.y},u=oi(o,e,n),p=oi(o,t,r);if(u||p)o={x:r.x,y:n.y};else{var d=_d(o,e,n),O=_d(o,t,r);d&&O&&(o={x:r.x,y:n.y})}a.push(o)}return a},_d=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},wd=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:t+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return t},xd=function(e){var t=e.start,n=e.end,r=e.sourceNode,a=e.targetNode,o=e.offset,u=jn(r),p=jn(a),d=ba(u,o),O=ba(p,o);return{sNext:ma(d,u,t),ePre:ma(O,p,n)}},xa=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(",");return[Ea(t[0]),Ea(t[1]),Ea(t[2]),Ea(t[3])]},Ea=function(e){var t=va(e.replace(/(^\s*)/g,"").split(" "),2);return{x:+t[0],y:+t[1]}},Ed=function(e){var t=xa(e),n=va(t,4),r=function(a,o,u,p){return function(d){if(d<0||d>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-d,3)+3*o.x*d*Math.pow(1-d,2)+3*u.x*Math.pow(d,2)*(1-d)+p.x*Math.pow(d,3),y:a.y*Math.pow(1-d,3)+3*o.y*d*Math.pow(1-d,2)+3*u.y*Math.pow(d,2)*(1-d)+p.y*Math.pow(d,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[r,t[3]]},Sd=function(e,t){for(var n,r=e.x,a=e.y,o=no(t),u=Number.MAX_SAFE_INTEGER,p=[],d=0;d<o.length;d++)p.push({start:o[d],end:o[(d+1)%o.length]});if(p.forEach(function(k){var I=k.start,X=k.end;if(I.x===X.x){var W={x:I.x,y:a};if(oi(W,I,X)){var oe=Math.abs(I.x-r);oe<u&&(u=oe,n=W)}}else if(I.y===X.y){var re={x:r,y:I.y};if(oi(re,I,X)){var de=Math.abs(I.y-a);de<u&&(u=de,n=re)}}}),!n){var O=p[0],_=O.start,j=O.end;n={x:_.x+(j.x-_.x)/2,y:_.y+(j.y-_.y)/2}}return n},um=function(e){return ni(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},jd=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};i(204);var wo=function(){};function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $n=window.document;function cm(e){var t=e.onDragStart,n=t===void 0?wo:t,r=e.onDragging,a=r===void 0?wo:r,o=e.onDragEnd,u=o===void 0?wo:o,p=e.step,d=p===void 0?1:p,O=e.isStopPropagation,_=O===void 0||O,j=!1,k=!1,I=0,X=0,W=0,oe=0;function re(me){if(_&&me.stopPropagation(),k&&(j=!0,W+=me.clientX-I,oe+=me.clientY-X,I=me.clientX,X=me.clientY,Math.abs(W)>d||Math.abs(oe)>d)){var ke=W%d,Ee=oe%d,Ue=W-ke,Me=oe-Ee;W=ke,oe=Ee,a({deltaX:Ue,deltaY:Me,event:me})}}function de(me){if(_&&me.stopPropagation(),k=!1,$n.removeEventListener("mousemove",re,!1),$n.removeEventListener("mouseup",de,!1),j)return j=!1,u({event:me})}return function(me){if(me.button===0)return _&&me.stopPropagation(),k=!0,I=me.clientX,X=me.clientY,$n.addEventListener("mousemove",re,!1),$n.addEventListener("mouseup",de,!1),n({event:me})}}var fe,Pd,Ad,kd,Md,Td,Dd,Nd,Cd,Rd,Id,Ld,zd,yr=function(){function e(r){var a=this,o=r.onDragStart,u=o===void 0?wo:o,p=r.onDragging,d=p===void 0?wo:p,O=r.onDragEnd,_=O===void 0?wo:O,j=r.eventType,k=j===void 0?"":j,I=r.eventCenter,X=I===void 0?null:I,W=r.step,oe=W===void 0?1:W,re=r.isStopPropagation,de=re===void 0||re,me=r.model,ke=me===void 0?null:me,Ee=r.data,Ue=Ee===void 0?null:Ee;(function(Me,Be){if(!(Me instanceof Be))throw new TypeError("Cannot call a class as a function")})(this,e),Xt(this,"onDragStart",void 0),Xt(this,"onDragging",void 0),Xt(this,"onDragEnd",void 0),Xt(this,"step",void 0),Xt(this,"isStopPropagation",void 0),Xt(this,"isDragging",!1),Xt(this,"isStartDragging",!1),Xt(this,"startX",0),Xt(this,"startY",0),Xt(this,"sumDeltaX",0),Xt(this,"sumDeltaY",0),Xt(this,"eventType",void 0),Xt(this,"eventCenter",void 0),Xt(this,"model",void 0),Xt(this,"data",void 0),Xt(this,"startTime",void 0),Xt(this,"handleMouseDown",function(Me){var Be,Re;if(Me.button===0){a.isStopPropagation&&Me.stopPropagation(),a.isStartDragging=!0,a.startX=Me.clientX,a.startY=Me.clientY,$n.addEventListener("mousemove",a.handleMouseMove,!1),$n.addEventListener("mouseup",a.handleMouseUp,!1);var lt=(Be=a.model)===null||Be===void 0?void 0:Be.getData();(Re=a.eventCenter)===null||Re===void 0||Re.emit(tt["".concat(a.eventType,"_MOUSEDOWN")],{e:Me,data:a.data||lt}),a.startTime=new Date().getTime()}}),Xt(this,"handleMouseMove",function(Me){if(a.isStopPropagation&&Me.stopPropagation(),a.isStartDragging&&(a.sumDeltaX+=Me.clientX-a.startX,a.sumDeltaY+=Me.clientY-a.startY,a.startX=Me.clientX,a.startY=Me.clientY,a.step<=1||Math.abs(a.sumDeltaX)>a.step||Math.abs(a.sumDeltaY)>a.step)){var Be,Re=a.sumDeltaX%a.step,lt=a.sumDeltaY%a.step,Et=a.sumDeltaX-Re,mt=a.sumDeltaY-lt;a.sumDeltaX=Re,a.sumDeltaY=lt;var jt,Ft=(Be=a.model)===null||Be===void 0?void 0:Be.getData();a.isDragging||((jt=a.eventCenter)===null||jt===void 0||jt.emit(tt["".concat(a.eventType,"_DRAGSTART")],{e:Me,data:a.data||Ft}),a.onDragStart({event:Me})),a.isDragging=!0,Promise.resolve().then(function(){var Wt,pn;a.onDragging({deltaX:Et,deltaY:mt,event:Me}),(Wt=a.eventCenter)===null||Wt===void 0||Wt.emit(tt["".concat(a.eventType,"_MOUSEMOVE")],{e:Me,data:a.data||Ft}),(pn=a.eventCenter)===null||pn===void 0||pn.emit(tt["".concat(a.eventType,"_DRAG")],{e:Me,data:a.data||Ft})})}}),Xt(this,"handleMouseUp",function(Me){a.isStartDragging=!1,a.isStopPropagation&&Me.stopPropagation(),Promise.resolve().then(function(){var Be,Re,lt;$n.removeEventListener("mousemove",a.handleMouseMove,!1),$n.removeEventListener("mouseup",a.handleMouseUp,!1);var Et=(Be=a.model)===null||Be===void 0?void 0:Be.getData();(Re=a.eventCenter)===null||Re===void 0||Re.emit(tt["".concat(a.eventType,"_MOUSEUP")],{e:Me,data:a.data||Et}),a.isDragging&&(a.isDragging=!1,a.onDragEnd({event:Me}),(lt=a.eventCenter)===null||lt===void 0||lt.emit(tt["".concat(a.eventType,"_DROP")],{e:Me,data:a.data||Et}))})}),Xt(this,"cancelDrag",function(){$n.removeEventListener("mousemove",a.handleMouseMove,!1),$n.removeEventListener("mouseup",a.handleMouseUp,!1),a.onDragEnd({event:null}),a.isDragging=!1}),this.onDragStart=u,this.onDragging=d,this.onDragEnd=_,this.step=oe,this.isStopPropagation=de,this.eventType=k,this.eventCenter=X,this.model=ke,this.data=Ue}var t,n;return t=e,(n=[{key:"setStep",value:function(r){this.step=r}}])&&sm(t.prototype,n),e}(),Bd={node:!1,edge:!1},lm={node:!0,edge:!0};function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fd(Object(n),!0).forEach(function(r){Qn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fi(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||Hd(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xo(e){return function(t){if(Array.isArray(t))return Rs(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Hd(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hd(e,t){if(e){if(typeof e=="string")return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rs(e,t):void 0}}function Rs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(e){return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(e)}function Rn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Ud,Gd=200,Xd=(fe=function(){function e(r){(function(X,W){if(!(X instanceof W))throw new TypeError("Cannot call a class as a function")})(this,e),Qn(this,"rootEl",void 0),Rn(this,"width",Pd,this),Rn(this,"height",Ad,this),Qn(this,"theme",void 0),Qn(this,"eventCenter",void 0),Qn(this,"modelMap",new Map),Qn(this,"topElement",void 0),Qn(this,"animation",void 0),Qn(this,"idGenerator",void 0),Qn(this,"edgeGenerator",void 0),Qn(this,"nodeMoveRules",[]),Rn(this,"edgeType",kd,this),Rn(this,"nodes",Md,this),Rn(this,"edges",Td,this),Rn(this,"overlapMode",Dd,this),Rn(this,"background",Nd,this),Rn(this,"transformModel",Cd,this),Rn(this,"editConfigModel",Rd,this),Rn(this,"gridSize",Id,this),Rn(this,"partial",Ld,this),Rn(this,"fakerNode",zd,this);var a,o,u,p=r.container,d=r.background,O=d===void 0?{}:d,_=r.grid,j=r.idGenerator,k=r.edgeGenerator,I=r.animation;this.background=O,ja(_)==="object"&&(this.gridSize=_.size),this.rootEl=p,this.editConfigModel=new Qf(r),this.eventCenter=new Ab,this.transformModel=new Wv(this.eventCenter),this.theme=wp(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=(a=I)&&typeof a!="boolean"?_p(Dt(Bd),a):Dt(a===!0?lm:Bd),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=j,this.edgeGenerator=(o=this,typeof(u=k)!="function"?function(X,W,oe){return Object.assign({type:o.edgeType},oe)}:function(X,W,oe){var re=u(X,W,oe);return re?typeof re=="string"?Object.assign({},oe,{type:re}):Object.assign({type:re},oe):{type:o.edgeType}}),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=Nr()}var t,n;return t=e,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(r,a,o){return r[a.id]={index:o,model:a},r},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(r,a,o){return r[a.id]={index:o,model:a},r},{})}},{key:"modelsMap",get:function(){return[].concat(xo(this.nodes),xo(this.edges)).reduce(function(r,a){return r[a.id]=a,r},{})}},{key:"sortElements",get:function(){var r=[];this.nodes.forEach(function(O){return r.push(O)}),this.edges.forEach(function(O){return r.push(O)}),r=r.sort(function(O,_){return O.zIndex-_.zIndex});for(var a=[],o=[-200,-200],u=[this.width+Gd,this.height+Gd],p=0;p<r.length;p++){var d=r[p];d.visible&&(!this.partial||d.isSelected||this.isElementInArea(d,o,u,!1,!1))&&a.push(d)}return a}},{key:"textEditElement",get:function(){var r=this.nodes.find(function(o){return o.state===_t.TEXT_EDIT}),a=this.edges.find(function(o){return o.state===_t.TEXT_EDIT});return r||a}},{key:"selectElements",get:function(){var r=new Map;return this.nodes.forEach(function(a){a.isSelected&&r.set(a.id,a)}),this.edges.forEach(function(a){a.isSelected&&r.set(a.id,a)}),r}},{key:"selectNodes",get:function(){var r=[];return this.nodes.forEach(function(a){a.isSelected&&r.push(a)}),r}},{key:"getAreaElement",value:function(r,a){var o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=arguments.length>4&&arguments[4]!==void 0&&arguments[4],d=[],O=[];this.nodes.forEach(function(k){return O.push(k)}),this.edges.forEach(function(k){return O.push(k)});for(var _=0;_<O.length;_++){var j=O[_];p&&!j.visible||!this.isElementInArea(j,r,a,o,u)||d.push(j)}return d}},{key:"getModel",value:function(r){return this.modelMap.get(r)}},{key:"getNodeModelById",value:function(r){var a;return this.fakerNode&&r===this.fakerNode.id?this.fakerNode:(a=this.nodesMap[r])===null||a===void 0?void 0:a.model}},{key:"getPointByClient",value:function(r){var a=r.x,o=r.y,u=this.rootEl.getBoundingClientRect(),p={x:a-u.left,y:o-u.top},d=fi(this.transformModel.HtmlPointToCanvasPoint([p.x,p.y]),2);return{domOverlayPosition:p,canvasOverlayPosition:{x:d[0],y:d[1]}}}},{key:"isElementInArea",value:function(r,a,o){var u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(r.BaseType===Ut.NODE){for(var d=jn(r=r),O=d.minX,_=d.minY,j=d.maxX,k=d.maxY,I=[{x:O,y:_},{x:j,y:_},{x:j,y:k},{x:O,y:k}],X=p,W=0;W<I.length;W++){var oe=I[W],re=oe.x,de=oe.y,me=this.transformModel.CanvasPointToHtmlPoint([re,de]),ke=fi(me,2);if(re=ke[0],de=ke[1],ds([re,de],a,o)!==p){X=!p;break}}return X}if(r.BaseType===Ut.EDGE){var Ee=r=r,Ue=Ee.startPoint,Me=Ee.endPoint,Be=this.transformModel.CanvasPointToHtmlPoint([Ue.x,Ue.y]),Re=this.transformModel.CanvasPointToHtmlPoint([Me.x,Me.y]),lt=ds(Be,a,o),Et=ds(Re,a,o);return u?lt&&Et:lt||Et}return!1}},{key:"graphDataToModel",value:function(r){var a=this;if(this.width&&this.height||this.resize(),!r)return this.nodes=[],void(this.edges=[]);r.nodes?this.nodes=fa(r.nodes,function(o){var u=a.getModel(o.type);if(!u)throw new Error("找不到".concat(o.type,"对应的节点。"));var p=o.x,d=o.y;return p&&d&&(o.x=Dr(p,a.gridSize),o.y=Dr(d,a.gridSize),ja(o.text)==="object"&&(o.text.x-=xp(p,a.gridSize),o.text.y-=xp(d,a.gridSize))),new u(o,a)}):this.nodes=[],r.edges?this.edges=fa(r.edges,function(o){var u=a.getModel(o.type);if(!u)throw new Error("找不到".concat(o.type,"对应的边。"));return new u(o,a)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var r=[];this.edges.forEach(function(o){var u=o.getData();u&&!o.virtual&&r.push(u)});var a=[];return this.nodes.forEach(function(o){var u=o.getData();u&&!o.virtual&&a.push(u)}),{nodes:a,edges:r}}},{key:"modelToHistoryData",value:function(){for(var r=!1,a=[],o=0;o<this.nodes.length;o++){var u=this.nodes[o];if(u.isDragging){r=!0;break}a.push(u.getHistoryData())}if(r)return!1;for(var p=!1,d=[],O=0;O<this.edges.length;O++){var _=this.edges[O];if(_.isDragging){p=!0;break}d.push(_.getHistoryData())}return!p&&{nodes:a,edges:d}}},{key:"getEdgeModelById",value:function(r){var a;return(a=this.edgesMap[r])===null||a===void 0?void 0:a.model}},{key:"getElement",value:function(r){return this.modelsMap[r]}},{key:"getNodeEdges",value:function(r){for(var a=[],o=0;o<this.edges.length;o++){var u=this.edges[o],p=this.edges[o].sourceNodeId===r,d=this.edges[o].targetNodeId===r;(p||d)&&a.push(u)}return a}},{key:"getSelectElements",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=this.selectElements,o={nodes:[],edges:[]};return a.forEach(function(u){if(u.BaseType===Ut.NODE&&o.nodes.push(u.getData()),u.BaseType===Ut.EDGE){var p=u.getData(),d=a.get(p.sourceNodeId)&&a.get(p.targetNodeId);(r||d)&&o.edges.push(p)}}),o}},{key:"updateAttributes",value:function(r,a){this.getElement(r).updateAttributes(a)}},{key:"changeNodeId",value:function(r,a){return a||(a=Nr()),this.nodesMap[a]?"":this.nodesMap[r]?(this.edges.forEach(function(o){o.sourceNodeId===r&&(o.sourceNodeId=a),o.targetNodeId===r&&(o.targetNodeId=a)}),this.nodesMap[r].model.id=a,this.nodesMap[a]=this.nodesMap[r],a):""}},{key:"changeEdgeId",value:function(r,a){return a||(a=Nr()),this.edgesMap[a]?"":this.edgesMap[r]?(this.edges.forEach(function(o){o.id===r&&o.changeEdgeId(a)}),a):""}},{key:"setFakerNode",value:function(r){this.fakerNode=r}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(r,a){return this.modelMap.set(r,a)}},{key:"toFront",value:function(r){var a,o,u,p=((a=this.nodesMap[r])===null||a===void 0?void 0:a.model)||((o=this.edgesMap[r])===null||o===void 0?void 0:o.model);p&&(this.overlapMode===Sn.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex(),p.setZIndex(9999),this.topElement=p),this.overlapMode===Sn.INCREASE&&this.setElementZIndex(r,"top"))}},{key:"setElementZIndex",value:function(r,a){var o,u,p,d=((o=this.nodesMap[r])===null||o===void 0?void 0:o.model)||((u=this.edgesMap[r])===null||u===void 0?void 0:u.model);d&&(typeof a=="number"&&(p=a),a==="top"&&(p=Os()),a==="bottom"&&(p=--Bb),d.setZIndex(p))}},{key:"deleteNode",value:function(r){var a=this.nodesMap[r].model.getData();this.deleteEdgeBySource(r),this.deleteEdgeByTarget(r),this.nodes.splice(this.nodesMap[r].index,1),this.eventCenter.emit(tt.NODE_DELETE,{data:a})}},{key:"addNode",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,o=arguments.length>2?arguments[2]:void 0,u=tn(r);u.id&&this.nodesMap[r.id]&&delete u.id;var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));u.x=Dr(u.x,this.gridSize),u.y=Dr(u.y,this.gridSize);var d=new p(u,this);this.nodes.push(d);var O=d.getData(),_={data:O};return o&&(_.e=o),this.eventCenter.emit(a,_),d}},{key:"cloneNode",value:function(r){var a=this.getNodeModelById(r),o=a.getData();o.x+=30,o.y+=30,delete o.id,o.text&&(o.text.x+=30,o.text.y+=30);var u=this.addNode(o);return u.setSelected(!0),a.setSelected(!1),u.getData()}},{key:"moveNode",value:function(r,a,o){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var d=p.model,O=d.getMoveDistance(a,o,u),_=fi(O,2);a=_[0],o=_[1],this.moveEdge(r,a,o)}}},{key:"moveNode2Coordinate",value:function(r,a,o){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var d=p.model,O=d.x,_=d.y,j=a-O,k=o-_;this.moveNode(r,j,k,u)}}},{key:"editText",value:function(r){this.setElementStateById(r,_t.TEXT_EDIT)}},{key:"addEdge",value:function(r){var a=tn(r),o=a.type;o||(o=this.edgeType),a.id&&this.edgesMap[a.id]&&delete a.id;var u=this.getModel(o);if(!u)throw new Error("找不到".concat(o,"对应的边，请确认是否已注册此类型边。"));var p=new u(Sa(Sa({},a),{},{type:o}),this),d=p.getData();return this.edges.push(p),this.eventCenter.emit(tt.EDGE_ADD,{data:d}),p}},{key:"moveEdge",value:function(r,a,o){for(var u=0;u<this.edges.length;u++){var p=this.edges[u],d=p.textPosition,O=d.x,_=d.y,j=this.edges[u].sourceNodeId===r,k=this.edges[u].targetNodeId===r;j&&p.moveStartPoint(a,o),k&&p.moveEndPoint(a,o),(j||k)&&this.handleEdgeTextMove(p,O,_)}}},{key:"handleEdgeTextMove",value:function(r,a,o){var u;if(r.customTextPosition===!0)r.resetTextPosition();else if(r.modelType===ht.POLYLINE_EDGE&&(u=r.text)!==null&&u!==void 0&&u.value){var p=r.text,d=Sd(p,r.points);r.moveText(d.x-p.x,d.y-p.y)}else{var O=r.textPosition,_=O.x,j=O.y;r.moveText(_-a,j-o)}}},{key:"deleteEdgeBySourceAndTarget",value:function(r,a){for(var o=0;o<this.edges.length;o++)if(this.edges[o].sourceNodeId===r&&this.edges[o].targetNodeId===a){var u=this.edges[o].getData();this.edges.splice(o,1),o--,this.eventCenter.emit(tt.EDGE_DELETE,{data:u})}}},{key:"deleteEdgeById",value:function(r){if(this.edgesMap[r]){var a=this.edgesMap[r].index,o=this.edgesMap[r].model.getData();this.edges.splice(a,1),this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"deleteEdgeBySource",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].sourceNodeId===r){var o=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"deleteEdgeByTarget",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].targetNodeId===r){var o=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:o})}}},{key:"setElementStateById",value:function(r,a,o){this.nodes.forEach(function(u){u.id===r?u.setElementState(a,o):u.setElementState(_t.DEFAULT)}),this.edges.forEach(function(u){u.id===r?u.setElementState(a,o):u.setElementState(_t.DEFAULT)})}},{key:"updateText",value:function(r,a){this.nodes.forEach(function(o){o.id===r&&o.updateText(a)}),this.edges.forEach(function(o){o.id===r&&o.updateText(a)})}},{key:"selectNodeById",value:function(r){var a,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];o||this.clearSelectElements();var u=(a=this.nodesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectEdgeById",value:function(r){var a,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];o||this.clearSelectElements();var u=(a=this.edgesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectElementById",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];a||this.clearSelectElements();var o=this.getElement(r);o==null||o.setSelected(!0)}},{key:"clearSelectElements",value:function(){var r;this.selectElements.forEach(function(a){a==null||a.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Sn.DEFAULT&&((r=this.topElement)===null||r===void 0||r.setZIndex())}},{key:"moveNodes",value:function(r,a,o){for(var u=this,p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=r.reduce(function(ke,Ee){var Ue=u.nodesMap[Ee].model.getMoveDistance(a,o,p);return ke[Ee]=Ue,ke},{}),O=0;O<this.edges.length;O++){var _=this.edges[O],j=_.textPosition,k=j.x,I=j.y,X=d[_.sourceNodeId],W=void 0,oe=void 0;if(X){var re=fi(X,2);W=re[0],oe=re[1],_.moveStartPoint(W,oe)}var de=d[_.targetNodeId];if(de){var me=fi(de,2);W=me[0],oe=me[1],_.moveEndPoint(W,oe)}(X||de)&&this.handleEdgeTextMove(_,k,I)}}},{key:"addNodeMoveRules",value:function(r){this.nodeMoveRules.includes(r)||this.nodeMoveRules.push(r)}},{key:"setDefaultEdgeType",value:function(r){this.edgeType=r}},{key:"changeNodeType",value:function(r,a){var o=this.getNodeModelById(r);if(o){var u=o.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));var d=new p(u,this);this.nodes.splice(this.nodesMap[r].index,1,d),this.getNodeEdges(r).forEach(function(O){if(O.sourceNodeId===r){var _=$p(d,O.startPoint,d.width,d.height);O.updateStartPoint(_)}if(O.targetNodeId===r){var j=$p(d,O.endPoint,d.width,d.height);O.updateEndPoint(j)}})}}},{key:"changeEdgeType",value:function(r,a){var o=this.getEdgeModelById(r);if(o&&o.type!==a){var u=o.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));delete u.pointsList;var d=new p(u,this);this.edges.splice(this.edgesMap[r].index,1,d)}}},{key:"getNodeIncomingEdge",value:function(r){var a=[];return this.edges.forEach(function(o){o.targetNodeId===r&&a.push(o)}),a}},{key:"getNodeOutgoingEdge",value:function(r){var a=[];return this.edges.forEach(function(o){o.sourceNodeId===r&&a.push(o)}),a}},{key:"getNodeIncomingNode",value:function(r){var a=this,o=[];return this.edges.forEach(function(u){u.targetNodeId===r&&o.push(a.nodesMap[u.sourceNodeId].model)}),o}},{key:"getNodeOutgoingNode",value:function(r){var a=this,o=[];return this.edges.forEach(function(u){u.sourceNodeId===r&&o.push(a.nodesMap[u.targetNodeId].model)}),o}},{key:"setTheme",value:function(r){this.theme=wp(Sa(Sa({},this.theme),r))}},{key:"resize",value:function(r,a){this.width=r||this.rootEl.getBoundingClientRect().width,this.height=a||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var r=this.nodes,a=[],o=[];r.forEach(function(j){var k=j.x,I=j.y,X=j.width,W=j.height,oe=j.getNodeStyle().strokeWidth,re=oe===void 0?0:oe;a=a.concat([k+X/2+re,k-X/2-re]),o=o.concat([I+W/2+re,I-W/2-re])});var u=Math.min.apply(Math,xo(a)),p=Math.max.apply(Math,xo(a)),d=Math.min.apply(Math,xo(o)),O=p-u||0,_=Math.max.apply(Math,xo(o))-d||0;return{virtualRectWidth:O,virtualRectHeight:_,virtualRectCenterPositionX:u+O/2,virtualRectCenterPositionY:d+_/2}}},{key:"translateCenter",value:function(){var r=this.nodes,a=this.width,o=this.height,u=this.rootEl,p=this.transformModel;if(r.length){var d=a||u.clientWidth,O=o||u.clientHeight,_=this.getVirtualRectSize(),j=_.virtualRectCenterPositionX,k=_.virtualRectCenterPositionY;p.focusOn(j,k,d,O)}}},{key:"fitView",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,o=this.nodes,u=this.width,p=this.height,d=this.rootEl,O=this.transformModel;if(o.length){var _=u||d.clientWidth,j=p||d.clientHeight,k=this.getVirtualRectSize(),I=k.virtualRectWidth,X=k.virtualRectHeight,W=k.virtualRectCenterPositionX,oe=k.virtualRectCenterPositionY,re=(I+a)/_,de=(X+r)/j,me=0;me=1/Math.max(re,de);var ke=[_/2,j/2];O.zoom(me,ke),O.focusOn(W,oe,_,j)}}},{key:"openEdgeAnimation",value:function(r){this.getEdgeModelById(r).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(r){this.getEdgeModelById(r).closeEdgeAnimation()}}],n&&fm(t.prototype,n),e}(),Pd=We(fe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ad=We(fe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kd=We(fe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Md=We(fe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Td=We(fe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dd=We(fe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Sn.DEFAULT}}),Nd=We(fe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cd=We(fe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rd=We(fe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=We(fe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ld=We(fe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zd=We(fe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We(fe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"nodesMap"),fe.prototype),We(fe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"edgesMap"),fe.prototype),We(fe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"modelsMap"),fe.prototype),We(fe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"sortElements"),fe.prototype),We(fe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"textEditElement"),fe.prototype),We(fe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectElements"),fe.prototype),We(fe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodes"),fe.prototype),We(fe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setFakerNode"),fe.prototype),We(fe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"removeFakerNode"),fe.prototype),We(fe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setModel"),fe.prototype),We(fe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"toFront"),fe.prototype),We(fe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementZIndex"),fe.prototype),We(fe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteNode"),fe.prototype),We(fe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addNode"),fe.prototype),We(fe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"cloneNode"),fe.prototype),We(fe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode"),fe.prototype),We(fe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode2Coordinate"),fe.prototype),We(fe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"editText"),fe.prototype),We(fe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addEdge"),fe.prototype),We(fe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveEdge"),fe.prototype),We(fe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySourceAndTarget"),fe.prototype),We(fe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeById"),fe.prototype),We(fe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySource"),fe.prototype),We(fe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeByTarget"),fe.prototype),We(fe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementStateById"),fe.prototype),We(fe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"updateText"),fe.prototype),We(fe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodeById"),fe.prototype),We(fe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectEdgeById"),fe.prototype),We(fe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectElementById"),fe.prototype),We(fe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearSelectElements"),fe.prototype),We(fe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNodes"),fe.prototype),We(fe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setDefaultEdgeType"),fe.prototype),We(fe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeNodeType"),fe.prototype),We(fe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeEdgeType"),fe.prototype),We(fe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingEdge"),fe.prototype),We(fe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingEdge"),fe.prototype),We(fe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingNode"),fe.prototype),We(fe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingNode"),fe.prototype),We(fe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setTheme"),fe.prototype),We(fe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"resize"),fe.prototype),We(fe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearData"),fe.prototype),We(fe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"translateCenter"),fe.prototype),We(fe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"fitView"),fe.prototype),We(fe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"openEdgeAnimation"),fe.prototype),We(fe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"closeEdgeAnimation"),fe.prototype),fe),pm=Xd;function Is(e){return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function Ls(){return Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ls.apply(this,arguments)}function dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zs(e,t){return zs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},zs(e,t)}function hm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Pa(e);if(t){var a=Pa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ym(this,n)}}function ym(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return er(e)}function er(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pa(e){return Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pa(e)}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yd,gm=Gn(Ud=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&zs(o,u)})(a,e);var t,n,r=hm(a);function a(o){var u;(function(_,j){if(!(_ instanceof j))throw new TypeError("Cannot call a class as a function")})(this,a),gr(er(u=r.call(this)),"stepDrag",void 0),gr(er(u),"stepScrollX",0),gr(er(u),"stepScrollY",0),gr(er(u),"onDragging",function(_){var j=_.deltaX,k=_.deltaY;u.setState({isDragging:!0});var I=u.props.graphModel,X=I.transformModel;I.editConfigModel.stopMoveGraph||X.translate(j,k)}),gr(er(u),"onDragEnd",function(){u.setState({isDragging:!1})}),gr(er(u),"zoomHandler",function(_){var j=u.props,k=j.graphModel,I=k.editConfigModel,X=k.transformModel,W=k.gridSize,oe=j.graphModel,re=_.deltaX,de=_.deltaY;if(I.stopScrollGraph||_.ctrlKey===!0){if(!I.stopZoomGraph){_.preventDefault();var me=oe.getPointByClient({x:_.clientX,y:_.clientY}).canvasOverlayPosition,ke=me.x,Ee=me.y;X.zoom(_.deltaY<0,[ke,Ee])}}else{if(_.preventDefault(),u.stepScrollX+=re,u.stepScrollY+=de,Math.abs(u.stepScrollX)>=W){var Ue=u.stepScrollX%W,Me=u.stepScrollX-Ue;X.translate(-Me*X.SCALE_X,0),u.stepScrollX=Ue}if(Math.abs(u.stepScrollY)>=W){var Be=u.stepScrollY%W,Re=u.stepScrollY-Be;X.translate(0,-Re*X.SCALE_Y),u.stepScrollY=Be}}}),gr(er(u),"clickHandler",function(_){if(_.target.getAttribute("name")==="canvas-overlay"){var j=u.props.graphModel;j.selectElements.size>0&&j.clearSelectElements(),j.eventCenter.emit(tt.BLANK_CLICK,{e:_})}}),gr(er(u),"handleContextMenu",function(_){if(_.target.getAttribute("name")==="canvas-overlay"){_.preventDefault();var j=u.props.graphModel,k=j.getPointByClient({x:_.clientX,y:_.clientY});j.eventCenter.emit(tt.BLANK_CONTEXTMENU,{e:_,position:k})}}),gr(er(u),"mouseDownHandler",function(_){var j=u.props.graphModel,k=j.eventCenter,I=j.editConfigModel,X=j.transformModel.SCALE_X,W=j.gridSize,oe=_.target,re=!I.adjustEdge&&!I.adjustNodePosition;(oe.getAttribute("name")==="canvas-overlay"||re)&&(I.stopMoveGraph?k.emit(tt.BLANK_MOUSEDOWN,{e:_}):(u.stepDrag.setStep(W*X),u.stepDrag.handleMouseDown(_)),u.clickHandler(_))});var p=o.graphModel,d=p.gridSize,O=p.eventCenter;return u.stepDrag=new yr({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:d,eventType:"BLANK",isStopPropagation:!1,eventCenter:O,model:null}),u.state={isDragging:!1},u}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props,p=u.children,d=u.dnd,O=this.state.isDragging;return Object(te.g)("svg",Ls({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:O?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},d.eventMap()),Object(te.g)("g",{transform:o},p))}}])&&dm(t.prototype,n),a}(te.a))||Ud;function Bs(e){return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function vm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e,t){return Fs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fs(e,t)}function mm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Aa(e);if(t){var a=Aa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Om(this,n)}}function Om(e,t){if(t&&(Bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Aa(e){return Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(e)}var _m=Gn(Yd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Fs(o,u)})(a,e);var t,n,r=mm(a);function a(){return vm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var o=this.props,u=o.tool,p=o.graphModel,d=u.getTools().map(function(O){return Object(te.g)(O,{graphModel:p,logicFlow:u.instance})});return u.components=d,d}},{key:"triggerToolRender",value:function(){var o=this.props,u=o.tool,p=o.graphModel,d=document.querySelector("#ToolOverlay_".concat(p.flowId)),O=u.getInstance();O.components.forEach(function(_){return _(O,d)}),O.components=[]}},{key:"render",value:function(){var o=this.props.graphModel;return Object(te.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(o.flowId)},this.getTools())}}])&&bm(t.prototype,n),a}(te.a))||Yd;function Hs(e){return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Us(e,t){return Us=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Us(e,t)}function Em(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ka(e);if(t){var a=ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Sm(this,n)}}function Sm(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ka(e){return ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(e)}var Vd,jm=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Us(o,u)})(a,e);var t,n,r=Em(a);function a(){return wm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.background;return Object(te.g)("div",{className:"lf-background"},Object(te.g)("div",{style:o,className:"lf-background-area"}))}}])&&xm(t.prototype,n),a}(te.a);function Gs(e){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function Pm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xs(e,t){return Xs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Xs(e,t)}function km(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ma(e);if(t){var a=Ma(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Mm(this,n)}}function Mm(e,t){if(t&&(Gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wd(e)}function Wd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e){return Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ma(e)}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kd=Gn(Vd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Xs(o,u)})(a,e);var t,n,r=km(a);function a(){var o;Pm(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Tm(Wd(o=r.call.apply(r,[this].concat(p))),"id",Nr()),o}return t=a,(n=[{key:"renderDot",value:function(){var o=this.props,u=o.config,p=u.color,d=u.thickness,O=d===void 0?2:d,_=o.size,j=o.visible,k=Math.min(Math.max(2,O),_/2),I=1;return j||(I=0),Object(te.g)("rect",{width:k,height:k,rx:k/2,ry:k/2,fill:p,opacity:I})}},{key:"renderMesh",value:function(){var o=this.props,u=o.config,p=u.color,d=u.thickness,O=d===void 0?1:d,_=o.size,j=o.visible,k=Math.min(Math.max(1,O),_/2),I="M ".concat(_," 0 H0 M0 0 V0 ").concat(_),X=1;return j||(X=0),Object(te.g)("path",{d:I,stroke:p,strokeWidth:k,opacity:X})}},{key:"render",value:function(){var o=this.props,u=o.type,p=o.size,d=o.graphModel.transformModel,O=[d.SCALE_X,d.SKEW_Y,d.SKEW_X,d.SCALE_Y,d.TRANSLATE_X,d.TRANSLATE_Y].join(","),_="matrix(".concat(O,")");return Object(te.g)("div",{className:"lf-grid"},Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(te.g)("defs",null,Object(te.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:_,x:"0",y:"0",width:p,height:p},u==="dot"&&this.renderDot(),u==="mesh"&&this.renderMesh())),Object(te.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&Am(t.prototype,n),a}(te.a))||Vd;Kd.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},i(52);function Ys(e){return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function Dm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Zd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Zd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qd,Eo=function(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(n){var r=Dm(n,2),a=r[0],o=r[1];(a==="style"||Ys(o)!=="object")&&(t[a]=o)}),Object(te.g)("line",t)};function Vs(e){return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function Jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jd(Object(n),!0).forEach(function(r){Nm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ws(e,t){return Ws=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ws(e,t)}function Im(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Da(e);if(t){var a=Da(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lm(this,n)}}function Lm(e,t){if(t&&(Vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Da(e){return Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Da(e)}var $d,zm=Gn(qd=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ws(o,u)})(a,e);var t,n,r=Im(a);function a(){return Cm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.snaplineModel,u=o.position,p=o.isShowHorizontal,d=o.isShowVertical,O=o.getStyle(),_=u.x,j=_===void 0?0:_,k=u.y,I=k===void 0?0:k,X=Ta(Ta({x1:-1e5,y1:I,x2:1e5,y2:I},O),{},{stroke:p?O.stroke:"none"}),W=Ta(Ta({x1:j,y1:-1e5,x2:j,y2:1e5},O),{},{stroke:d?O.stroke:"none"});return Object(te.g)("g",{className:"lf-snapline"},Object(te.g)(Eo,X),Object(te.g)(Eo,W))}}])&&Rm(t.prototype,n),a}(te.a))||qd;function Ks(e){return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function Bm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Qd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=e.className,u=e.radius,p=t-r/2,d=n-a/2,O={};return Object.entries(e).forEach(function(_){var j=Bm(_,2),k=j[0],I=j[1];Ks(I)!=="object"&&(O[k]=I)}),O.className=o?"lf-basic-shape ".concat(o):"lf-basic-shape",u&&(O.rx=u,O.ry=u),O.x=p,O.y=d,Object(te.g)("rect",O)}function Zs(e){return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(e)}function So(){return So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},So.apply(this,arguments)}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(r){Fm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qs(e,t){return qs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},qs(e,t)}function Gm(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Na(e);if(t){var a=Na(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xm(this,n)}}function Xm(e,t){if(t&&(Zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Na(e){return Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Na(e)}Ir.defaultProps={className:"",radius:""};var nh,Ym=Gn($d=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&qs(o,u)})(a,e);var t,n,r=Gm(a);function a(){return Hm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getNodesOutline",value:function(){var o=this.props.graphModel,u=o.nodes,p=o.editConfigModel,d=p.hoverOutline,O=p.nodeSelectedOutline,_=[];return u.forEach(function(j){if(j.isHovered||j.isSelected){var k=j.isHovered,I=j.isSelected,X=j.x,W=j.y,oe=j.width,re=j.height;if(O&&I||d&&k){var de=j.getOutlineStyle(),me={};if(Object.keys(de).forEach(function(Ee){Ee!=="hover"&&(me[Ee]=de[Ee])}),k){var ke=de.hover;me=th(th({},me),ke)}_.push(Object(te.g)(Ir,So({className:"lf-outline-node",x:X,y:W,width:oe+10,height:re+10},me)))}}}),_}},{key:"getEdgeOutline",value:function(){for(var o=this.props.graphModel,u=o.edges,p=o.editConfigModel,d=p.edgeSelectedOutline,O=p.hoverOutline,_=[],j=0;j<u.length;j++){var k=u[j];(d&&k.isSelected||O&&k.isHovered)&&(k.modelType===ht.LINE_EDGE?_.push(this.getLineOutline(k)):k.modelType===ht.POLYLINE_EDGE?_.push(this.getPolylineOutline(k)):k.modelType===ht.BEZIER_EDGE&&_.push(this.getBezierOutline(k)))}return _}},{key:"getLineOutline",value:function(o){var u=o.startPoint,p=o.endPoint,d=(u.x+p.x)/2,O=(u.y+p.y)/2,_=Math.abs(u.x-p.x)+10,j=Math.abs(u.y-p.y)+10,k=o.getOutlineStyle();return Object(te.g)(Ir,So({className:"lf-outline-edge",x:d,y:O,width:_,height:j},k))}},{key:"getPolylineOutline",value:function(o){var u=o.points,p=no(u),d=ci(p,8),O=d.x,_=d.y,j=d.width,k=d.height,I=o.getOutlineStyle();return Object(te.g)(Ir,So({className:"lf-outline",x:O,y:_,width:j,height:k},I))}},{key:"getBezierOutline",value:function(o){var u=o.path,p=xa(u),d=ci(p,8),O=d.x,_=d.y,j=d.width,k=d.height,I=o.getOutlineStyle();return Object(te.g)(Ir,So({className:"lf-outline",x:O,y:_,width:j,height:k},I))}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Um(t.prototype,n),a}(te.a))||$d;function Js(e){return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function Vm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return rh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return rh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pi(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.r,u=o===void 0?4:o,p=e.className,d={cx:n,cy:a,r:u,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(O){var _=Vm(O,2),j=_[0],k=_[1];Js(k)!=="object"&&(d[j]=k)}),d.className=p?"lf-basic-shape ".concat(p):"lf-basic-shape",Object(te.g)("circle",d)}function $s(e){return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}function Wm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return oh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function di(){return di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}function ih(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uh(e,t,n){return t&&ah(e.prototype,t),n&&ah(e,n),e}function sh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qs(e,t)}function Qs(e,t){return Qs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Qs(e,t)}function ch(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ra(e);if(t){var a=Ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Km(this,n)}}function Km(e,t){if(t&&($s(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ca(e)}function Ca(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ra(e)}function ec(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lh,fh=function(e){sh(n,e);var t=ch(n);function n(){var r;return ih(this,n),ec(Ca(r=t.call(this)),"dragHandler",void 0),ec(Ca(r),"onDragging",function(a){var o=a.event,u=r.props,p=u.graphModel,d=u.bezierModel,O=u.type,_=p.getPointByClient({x:o.clientX,y:o.clientY}).canvasOverlayPosition,j=_.x,k=_.y;d.updateAdjustAnchor({x:j,y:k},O)}),ec(Ca(r),"onDragEnd",function(){r.props.bezierModel.isDragging=!1}),r.dragHandler=new yr({onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return uh(n,[{key:"render",value:function(){var r=this,a=this.props.position,o=a.x,u=a.y,p=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(te.g)(pi,di({className:"lf-bezier-adjust-anchor",x:o,y:u},p,{onMouseDown:function(d){r.dragHandler.handleMouseDown(d)}}))}}]),n}(te.a),Zm=Gn(nh=function(e){sh(n,e);var t=ch(n);function n(){return ih(this,n),t.apply(this,arguments)}return uh(n,[{key:"getBezierAdjust",value:function(r,a){var o=r.path,u=r.id,p=Wm(xa(o),4),d=p[0],O=p[1],_=p[2],j=p[3],k=r.getEdgeStyle().adjustLine,I=[];return I.push(Object(te.g)(Eo,di({x1:d.x,y1:d.y,x2:O.x,y2:O.y},k))),I.push(Object(te.g)(fh,{position:O,bezierModel:r,graphModel:a,key:"".concat(u,"_ePre"),type:"sNext"})),I.push(Object(te.g)(Eo,di({x1:j.x,y1:j.y,x2:_.x,y2:_.y},k))),I.push(Object(te.g)(fh,{position:_,bezierModel:r,graphModel:a,key:"".concat(u,"_sNext"),type:"ePre"})),I}},{key:"selectedBezierEdge",value:function(){for(var r=this.props.graphModel,a=r.edges,o=[],u=0;u<a.length;u++){var p=a[u];p.isSelected&&p.modelType===ht.BEZIER_EDGE&&p.draggable&&o.push(this.getBezierAdjust(p,r))}return o}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(te.a))||nh;function tc(e){return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function qm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nc(e,t){return nc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},nc(e,t)}function $m(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ia(e);if(t){var a=Ia(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qm(this,n)}}function Qm(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ia(e)}var ph,e0=Gn(lh=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&nc(o,u)})(a,e);var t,n,r=$m(a);function a(){return qm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props.children;return Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(te.g)("g",{transform:o},u))}}])&&Jm(t.prototype,n),a}(te.a))||lh;function rc(e){return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function oc(){return oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oc.apply(this,arguments)}function t0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ic(e,t){return ic=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ic(e,t)}function r0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=La(e);if(t){var a=La(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o0(this,n)}}function o0(e,t){if(t&&(rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},La(e)}var i0=Gn(ph=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&ic(o,u)})(a,e);var t,n,r=r0(a);function a(){return t0(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getComponent",value:function(o,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",d=this.props.getView,O=d(o.type);return Object(te.g)(O,{key:o.id,model:o,graphModel:u,overlay:p})}},{key:"render",value:function(){var o=this,u=this.props,p=u.graphModel,d=u.tool,O=u.options,_=u.dnd,j=u.snaplineModel,k={};O.width&&(k.width="".concat(p.width,"px")),O.height&&(k.height="".concat(p.height,"px"));var I=O.grid,X=p.fakerNode,W=p.editConfigModel.adjustEdge;return Object(te.g)("div",{className:"lf-graph","flow-id":p.flowId,style:k},Object(te.g)(gm,{graphModel:p,dnd:_},Object(te.g)("g",{className:"lf-base"},fa(p.sortElements,function(oe){return o.getComponent(oe,p)})),X?this.getComponent(X,p):""),Object(te.g)(e0,{graphModel:p},Object(te.g)(Ym,{graphModel:p}),W?Object(te.g)(Zm,{graphModel:p}):"",O.snapline!==!1?Object(te.g)(zm,{snaplineModel:j}):""),Object(te.g)(_m,{graphModel:p,tool:d}),O.background&&Object(te.g)(jm,{background:O.background}),O.grid&&Object(te.g)(Kd,oc({},I,{graphModel:p})))}}],n&&n0(t.prototype,n),a}(te.a))||ph,a0=i0;function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dh(Object(n),!0).forEach(function(r){vr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s0=function(){function e(r){var a=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),vr(this,"nodeConfig",void 0),vr(this,"lf",void 0),vr(this,"fakerNode",void 0),vr(this,"stopDrag",function(){a.nodeConfig=null,window.document.removeEventListener("mouseup",a.stopDrag)}),vr(this,"dragEnter",function(u){a.nodeConfig&&!a.fakerNode&&(a.fakerNode=a.lf.createFakerNode(za(za({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY}))))}),vr(this,"onDragOver",function(u){if(u.preventDefault(),a.fakerNode){var p=a.clientToLocalPoint({x:u.clientX,y:u.clientY}),d=p.x,O=p.y;a.fakerNode.moveTo(d,O);var _=a.fakerNode.getData();a.lf.setNodeSnapLine(_),a.lf.graphModel.eventCenter.emit(tt.NODE_DND_DRAG,{data:_})}return!1}),vr(this,"onDragLeave",function(){a.fakerNode&&(a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)}),vr(this,"onDrop",function(u){a.lf.graphModel&&u&&a.nodeConfig&&(a.lf.addNode(za(za({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY})),tt.NODE_DND_ADD,u),u.preventDefault(),u.stopPropagation(),a.nodeConfig=null,a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)});var o=r.lf;this.lf=o}var t,n;return t=e,(n=[{key:"clientToLocalPoint",value:function(r){var a=r.x,o=r.y,u=jf(this.lf.options,["grid","size"]),p=this.lf.graphModel.getPointByClient({x:a,y:o}).canvasOverlayPosition,d=p.x,O=p.y;return{x:Dr(d,u),y:Dr(O,u)}}},{key:"startDrag",value:function(r){this.nodeConfig=r,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&u0(t.prototype,n),e}();function hh(e){var t=e.container,n=e.grid,r=e.width,a=e.height;if(!t)throw new Error("请检查 container 参数是否有效");if(typeof r=="string"||typeof a=="string")throw new Error("width或height不支持传入字符串，请传数字");return n&&(e.grid=sn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),sn({},gh,e)}var bt,yh,gh={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function ac(e){return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function uc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return vh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return vh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bh(Object(n),!0).forEach(function(r){mh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function l0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(){return hi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=p0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},hi.apply(this,arguments)}function p0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Lr(e))!==null;);return e}function sc(e,t){return sc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},sc(e,t)}function d0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Lr(e);if(t){var a=Lr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h0(this,n)}}function h0(e,t){if(t&&(ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fa(e)}function Fa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lr(e)}function mh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var cc=(bt=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&sc(o,u)})(a,e);var t,n,r=d0(a);function a(){var o;l0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return mh(Fa(o=r.call.apply(r,[this].concat(p))),"modelType",ht.BEZIER_EDGE),c0(Fa(o),"path",yh,Fa(o)),o}return t=a,(n=[{key:"initEdgeData",value:function(o){this.offset=100,hi(Lr(a.prototype),"initEdgeData",this).call(this,o)}},{key:"getEdgeStyle",value:function(){var o=this.graphModel.theme.bezier;return Ba(Ba({},hi(Lr(a.prototype),"getEdgeStyle",this).call(this)),Dt(o))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var o=0,u=0;return this.pointsList.forEach(function(p){var d=p.x,O=p.y;o+=d,u+=O}),{x:o/this.pointsList.length,y:u/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var o=hi(Lr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Ba(Ba({},o),{},{pointsList:u})}},{key:"getControls",value:function(){var o=this.startPoint,u=this.endPoint;return xd({start:o,end:u,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(o){var u=uc(o,4),p=u[0],d=u[1],O=u[2],_=u[3];return"M ".concat(p.x," ").concat(p.y,`
    C `).concat(d.x," ").concat(d.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(_.x," ").concat(_.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var o=this.getControls(),u=o.sNext,p=o.ePre;this.updatePath(u,p)}},{key:"updatePath",value:function(o,u){o=Dt(o),u=Dt(u);var p={x:this.startPoint.x,y:this.startPoint.y},d={x:this.endPoint.x,y:this.endPoint.y};if(!o||!u){var O=this.getControls();o=O.sNext,u=O.ePre}this.pointsList=[p,o,u,d],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(o){this.startPoint=o,this.updatePoints()}},{key:"updateEndPoint",value:function(o){this.endPoint=o,this.updatePoints()}},{key:"moveStartPoint",value:function(o,u){this.startPoint.x+=o,this.startPoint.y+=u;var p=uc(this.pointsList,3),d=p[1],O=p[2];d.x+=o,d.y+=u,this.updatePath(d,O)}},{key:"moveEndPoint",value:function(o,u){this.endPoint.x+=o,this.endPoint.y+=u;var p=uc(this.pointsList,3),d=p[1],O=p[2];O.x+=o,O.y+=u,this.updatePath(d,O)}},{key:"updateAdjustAnchor",value:function(o,u){u==="sNext"?this.pointsList[1]=o:u==="ePre"&&(this.pointsList[2]=o),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var o=this.pointsList;return o[o.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(o){var u=o.startPoint,p=o.endPoint,d=o.sourceNode,O=o.targetNode,_=xd({start:u,end:p,sourceNode:d,targetNode:O,offset:this.offset}),j=_.sNext,k=_.ePre;this.pointsList=[u,j,k,p],this.initPoints()}}])&&f0(t.prototype,n),a}(ws),yh=Fn(bt.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fn(bt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"initPoints"),bt.prototype),Fn(bt.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updatePoints"),bt.prototype),Fn(bt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateStartPoint"),bt.prototype),Fn(bt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateEndPoint"),bt.prototype),Fn(bt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveStartPoint"),bt.prototype),Fn(bt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveEndPoint"),bt.prototype),Fn(bt.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAdjustAnchor"),bt.prototype),Fn(bt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustStart"),bt.prototype),Fn(bt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustEnd"),bt.prototype),Fn(bt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAfterAdjustStartAndEnd"),bt.prototype),bt),Ne,Oh,_h,wh,xh,Eh,Sh,jh,Ph,Ah,kh,Mh,Th,Dh,Nh,Ch,Rh,Ih,Lh,zh,y0=function(e){return e==null};function lc(e){return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function g0(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(d,O){if(d){if(typeof d=="string")return Bh(d,O);var _=Object.prototype.toString.call(d).slice(8,-1);if(_==="Object"&&d.constructor&&(_=d.constructor.name),_==="Map"||_==="Set")return Array.from(d);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return Bh(d,O)}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,u=!0,p=!1;return{s:function(){n=n.call(e)},n:function(){var d=n.next();return u=d.done,d},e:function(d){p=!0,o=d},f:function(){try{u||n.return==null||n.return()}finally{if(p)throw o}}}}function Bh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fh(Object(n),!0).forEach(function(r){bn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function v0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var br,Hh,mr=(Ne=function(){function e(r,a){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),bn(this,"id",""),Vt(this,"type",Oh,this),Vt(this,"x",_h,this),Vt(this,"y",wh,this),Vt(this,"text",xh,this),Vt(this,"properties",Eh,this),Vt(this,"_width",Sh,this),Vt(this,"_height",jh,this),Vt(this,"anchorsOffset",Ph,this),Vt(this,"isSelected",Ah,this),Vt(this,"isHovered",kh,this),Vt(this,"isShowAnchor",Mh,this),Vt(this,"isDragging",Th,this),Vt(this,"isHitable",Dh,this),Vt(this,"draggable",Nh,this),Vt(this,"visible",Ch,this),bn(this,"virtual",!1),bn(this,"graphModel",void 0),Vt(this,"zIndex",Rh,this),Vt(this,"state",Ih,this),Vt(this,"autoToFront",Lh,this),Vt(this,"style",zh,this),bn(this,"BaseType",Ut.NODE),bn(this,"modelType",ht.NODE),bn(this,"additionStateData",void 0),bn(this,"targetRules",[]),bn(this,"sourceRules",[]),bn(this,"moveRules",[]),bn(this,"hasSetTargetRules",!1),bn(this,"hasSetSourceRules",!1),this.graphModel=a,this.initNodeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"width",get:function(){return this._width},set:function(r){this._width=r}},{key:"height",get:function(){return this._height},set:function(r){this._height=r}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,o=a&&a(r.type),u=this.createId();r.id=u||o||Nr()}this.formatText(r),sn(this,function(p){return ni(p,["id","type","x","y","text","properties","virtual"])}(r)),this.graphModel.overlapMode===Sn.INCREASE&&(this.zIndex=r.zIndex||Os())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(r){r.text||(r.text={value:"",x:r.x,y:r.y,draggable:!1,editable:!0}),r.text&&typeof r.text=="string"?r.text={value:r.text,x:r.x,y:r.y,draggable:!1,editable:!0}:r.text&&r.text.editable===void 0&&(r.text.editable=!0)}},{key:"getData",value:function(){var r=this.text,a=r.x,o=r.y,u=r.value,p=this.properties;Object(c.x)(p)&&(p=Object(c.I)(p));var d={id:this.id,type:this.type,x:this.x,y:this.y,properties:p};return this.graphModel.overlapMode===Sn.INCREASE&&(d.zIndex=this.zIndex),u&&(d.text={x:a,y:o,value:u}),d}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return ln(ln({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.nodeText;return Dt(r)}},{key:"getAnchorStyle",value:function(r){var a=this.graphModel.theme.anchor;return Dt(a)}},{key:"getAnchorLineStyle",value:function(r){var a=this.graphModel.theme.anchorLine;return Dt(a)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Dt(r)}},{key:"isAllowConnectedAsSource",value:function(r,a,o,u){var p=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var d,O=!0,_=0;_<p.length;_++){var j=p[_];if(!j.validate.call(this,this,r,a,o,u)){O=!1,d=j.message;break}}return{isAllPass:O,msg:d}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(r,a,o,u){var p=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var d,O=!0,_=0;_<p.length;_++){var j=p[_];if(!j.validate.call(this,r,this,a,o,u)){O=!1,d=j.message;break}}return{isAllPass:O,msg:d}}},{key:"isAllowMoveNode",value:function(r,a){var o,u=!0,p=!0,d=g0(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(d.s();!(o=d.n()).done;){var O=(0,o.value)(this,r,a);if(!O)return!1;if(lc(O)==="object"){var _=O;if(_.x===!1&&_.y===!1)return!1;u=u&&_.x,p=p&&_.y}}}catch(j){d.e(j)}finally{d.f()}return{x:u,y:p}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var r=this.anchorsOffset,a=this.id,o=this.x,u=this.y;return r&&r.length>0?r.map(function(p,d){return p.length?(p=p,{id:"".concat(a,"_").concat(d),x:o+p[0],y:u+p[1]}):ln(ln({},p=p),{},{x:o+p.x,y:u+p.y,id:p.id||"".concat(a,"_").concat(d)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(r){return function(a,o){for(var u,p=vs(o),d=Number.MAX_SAFE_INTEGER,O=0;O<p.length;O++){var _=Jn(a.x,a.y,p[O].x,p[O].y);_<d&&(d=_,u={index:O,anchor:Pp(Pp({},p[O]),{},{x:p[O].x,y:p[O].y,id:p[O].id})})}return u}(r,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(r){if(!y0(r))for(var a=0;a<this.anchors.length;a++){var o=this.anchors[a];if(o.id===r)return o}}},{key:"addNodeMoveRules",value:function(r){this.moveRules.includes(r)||this.moveRules.push(r)}},{key:"move",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1;if(o)u=!0,p=!0;else{var d=this.isAllowMoveNode(r,a);typeof d=="boolean"?(u=d,p=d):(u=d.x,p=d.y)}if(u){var O=this.x+r;this.x=O,this.text&&this.moveText(r,0)}if(p){var _=this.y+a;this.y=_,this.text&&this.moveText(0,a)}return u||p}},{key:"getMoveDistance",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1,d=0,O=0;if(o)u=!0,p=!0;else{var _=this.isAllowMoveNode(r,a);typeof _=="boolean"?(u=_,p=_):(u=_.x,p=_.y)}if(u&&r){var j=this.x+r;this.x=j,this.text&&this.moveText(r,0),d=r}if(p&&a){var k=this.y+a;this.y=k,this.text&&this.moveText(0,a),O=a}return[d,O]}},{key:"moveTo",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=r-this.x,p=a-this.y;return!(!o&&!this.isAllowMoveNode(u,p)||(this.text&&this.text&&this.moveText(u,p),this.x=r,this.y=a,0))}},{key:"moveText",value:function(r,a){var o=this.text,u=o.x,p=o.y,d=o.value,O=o.draggable,_=o.editable;this.text={value:d,editable:_,draggable:O,x:u+r,y:p+a}}},{key:"updateText",value:function(r){this.text=ln(ln({},Object(c.I)(this.text)),{},{value:r})}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r,this.setIsShowAnchor(r)}},{key:"setIsShowAnchor",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"setProperty",value:function(r,a){this.properties=ln(ln({},Object(c.I)(this.properties)),{},bn({},r,tn(a))),this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=ln(ln({},Object(c.I)(this.properties)),tn(r)),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setStyle",value:function(r,a){this.style=ln(ln({},this.style),{},bn({},r,tn(a)))}},{key:"setStyles",value:function(r){this.style=ln(ln({},this.style),tn(r))}},{key:"updateStyles",value:function(r){this.style=ln({},tn(r))}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=r}},{key:"updateAttributes",value:function(r){sn(this,r)}}],n&&v0(t.prototype,n),e}(),Oh=pt(Ne.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_h=pt(Ne.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wh=pt(Ne.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xh=pt(Ne.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Eh=pt(Ne.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Sh=pt(Ne.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),jh=pt(Ne.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Ph=pt(Ne.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ah=pt(Ne.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kh=pt(Ne.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mh=pt(Ne.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Th=pt(Ne.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dh=pt(Ne.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nh=pt(Ne.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ch=pt(Ne.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rh=pt(Ne.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ih=pt(Ne.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lh=pt(Ne.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zh=pt(Ne.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),pt(Ne.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"incoming"),Ne.prototype),pt(Ne.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"outgoing"),Ne.prototype),pt(Ne.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"addNodeMoveRules"),Ne.prototype),pt(Ne.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"move"),Ne.prototype),pt(Ne.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"getMoveDistance"),Ne.prototype),pt(Ne.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveTo"),Ne.prototype),pt(Ne.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveText"),Ne.prototype),pt(Ne.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateText"),Ne.prototype),pt(Ne.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setSelected"),Ne.prototype),pt(Ne.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHovered"),Ne.prototype),pt(Ne.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setIsShowAnchor"),Ne.prototype),pt(Ne.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHitable"),Ne.prototype),pt(Ne.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setElementState"),Ne.prototype),pt(Ne.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperty"),Ne.prototype),pt(Ne.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperties"),Ne.prototype),pt(Ne.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"deleteProperty"),Ne.prototype),pt(Ne.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyle"),Ne.prototype),pt(Ne.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyles"),Ne.prototype),pt(Ne.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateStyles"),Ne.prototype),pt(Ne.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setZIndex"),Ne.prototype),pt(Ne.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateAttributes"),Ne.prototype),Ne);function fc(e){return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}function Uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uh(Object(n),!0).forEach(function(r){Xh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function m0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pc(){return pc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=_0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},pc.apply(this,arguments)}function _0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=jo(e))!==null;);return e}function dc(e,t){return dc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},dc(e,t)}function w0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=jo(e);if(t){var a=jo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x0(this,n)}}function x0(e,t){if(t&&(fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ha(e)}function Ha(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(e){return jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jo(e)}function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hc(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var nn,Yh,Vh,yc=(br=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&dc(o,u)})(a,e);var t,n,r=w0(a);function a(){var o;m0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Xh(Ha(o=r.call.apply(r,[this].concat(p))),"modelType",ht.CIRCLE_NODE),b0(Ha(o),"r",Hh,Ha(o)),o}return t=a,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var o=pc(jo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.circle;return Gh(Gh({},o),Dt(u))}},{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.r;return[{x:o,y:u-p,id:"".concat(this.id,"_0")},{x:o+p,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+p,id:"".concat(this.id,"_2")},{x:o-p,y:u,id:"".concat(this.id,"_3")}]}}])&&O0(t.prototype,n),a}(mr),Hh=hc(br.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),hc(br.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(br.prototype,"width"),br.prototype),hc(br.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(br.prototype,"height"),br.prototype),br);i(127);function gc(e){return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function vc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Wh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kh(Object(n),!0).forEach(function(r){Jh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function E0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bc(){return bc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=j0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},bc.apply(this,arguments)}function j0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ao(e))!==null;);return e}function mc(e,t){return mc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},mc(e,t)}function P0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Ao(e);if(t){var a=Ao(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A0(this,n)}}function A0(e,t){if(t&&(gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Po(e)}function Po(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(e)}function Jh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var tr,$h,Qh,Oc=(nn=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&mc(o,u)})(a,e);var t,n,r=P0(a);function a(){var o;E0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return Jh(Po(o=r.call.apply(r,[this].concat(p))),"modelType",ht.DIAMOND_NODE),qh(Po(o),"rx",Yh,Po(o)),qh(Po(o),"ry",Vh,Po(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=bc(Ao(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.diamond;return Zh(Zh({},o),Dt(u))}},{key:"points",get:function(){var o=this.x,u=this.y,p=this.rx,d=this.ry;return[[o,u-d],[o+p,u],[o,u+d],[o-p,u]]}},{key:"pointsPosition",get:function(){return this.points.map(function(o){return{x:o[0],y:o[1]}})}},{key:"width",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=vc(p,1)[0];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"height",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=vc(p,2)[1];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"getDefaultAnchor",value:function(){var o=this;return this.points.map(function(u,p){var d=vc(u,2);return{x:d[0],y:d[1],id:"".concat(o.id,"_").concat(p)}})}}])&&S0(t.prototype,n),a}(mr),Yh=ko(nn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Vh=ko(nn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),ko(nn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"points"),nn.prototype),ko(nn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"pointsPosition"),nn.prototype),ko(nn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"width"),nn.prototype),ko(nn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"height"),nn.prototype),nn);function _c(e){return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(r){ry(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ny(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function k0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wc(){return wc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=T0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},wc.apply(this,arguments)}function T0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=To(e))!==null;);return e}function xc(e,t){return xc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},xc(e,t)}function D0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=To(e);if(t){var a=To(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N0(this,n)}}function N0(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mo(e)}function Mo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},To(e)}function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ua(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var In,oy,Ec=(tr=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&xc(o,u)})(a,e);var t,n,r=D0(a);function a(){var o;k0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ry(Mo(o=r.call.apply(r,[this].concat(p))),"modelType",ht.ELLIPSE_NODE),ny(Mo(o),"rx",$h,Mo(o)),ny(Mo(o),"ry",Qh,Mo(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=wc(To(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.ellipse;return ty(ty({},o),Dt(u))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.rx,d=this.ry;return[{x:o,y:u-d,id:"".concat(this.id,"_0")},{x:o+p,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d,id:"".concat(this.id,"_2")},{x:o-p,y:u,id:"".concat(this.id,"_3")}]}}])&&M0(t.prototype,n),a}(mr),$h=Ua(tr.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Qh=Ua(tr.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ua(tr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tr.prototype,"width"),tr.prototype),Ua(tr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tr.prototype,"height"),tr.prototype),tr);function Sc(e){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function jc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return iy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ay(Object(n),!0).forEach(function(r){sy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function R0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pc(){return Pc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=L0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Pc.apply(this,arguments)}function L0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Do(e))!==null;);return e}function Ac(e,t){return Ac=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ac(e,t)}function z0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Do(e);if(t){var a=Do(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B0(this,n)}}function B0(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ga(e)}function Ga(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Do(e)}function sy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xa(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var kc,cy,Mc=(In=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ac(o,u)})(a,e);var t,n,r=z0(a);function a(){var o;R0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return sy(Ga(o=r.call.apply(r,[this].concat(p))),"modelType",ht.POLYGON_NODE),C0(Ga(o),"points",oy,Ga(o)),o}return t=a,(n=[{key:"getNodeStyle",value:function(){var o=Pc(Do(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.polygon;return uy(uy({},o),Dt(u))}},{key:"pointsPosition",get:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return this.points.map(function(O){return{x:O[0]+o-p/2,y:O[1]+u-d/2}})}},{key:"width",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=jc(p,1)[0];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"height",get:function(){var o=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var d=jc(p,2)[1];d<o&&(o=d),d>u&&(u=d)}),u-o}},{key:"getDefaultAnchor",value:function(){var o=this,u=this.x,p=this.y,d=this.width,O=this.height;return this.points.map(function(_,j){var k=jc(_,2),I=k[0],X=k[1];return{x:u+I-d/2,y:p+X-O/2,id:"".concat(o.id,"_").concat(j)}})}}])&&I0(t.prototype,n),a}(mr),oy=Xa(In.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Xa(In.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"pointsPosition"),In.prototype),Xa(In.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"width"),In.prototype),Xa(In.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(In.prototype,"height"),In.prototype),In);function Tc(e){return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ly(Object(n),!0).forEach(function(r){py(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function H0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dc(){return Dc=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=G0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Dc.apply(this,arguments)}function G0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=No(e))!==null;);return e}function Nc(e,t){return Nc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Nc(e,t)}function X0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=No(e);if(t){var a=No(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y0(this,n)}}function Y0(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ya(e)}function Ya(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},No(e)}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr,Cc=(kc=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Nc(o,u)})(a,e);var t,n,r=X0(a);function a(){var o;H0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return py(Ya(o=r.call.apply(r,[this].concat(p))),"modelType",ht.RECT_NODE),F0(Ya(o),"radius",cy,Ya(o)),o}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return[{x:o,y:u-d/2,id:"".concat(this.id,"_0")},{x:o+p/2,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d/2,id:"".concat(this.id,"_2")},{x:o-p/2,y:u,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var o=Dc(No(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.rect;return fy(fy({},o),Dt(u))}}])&&U0(t.prototype,n),a}(mr),cy=function(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}(kc.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),kc);function Rc(e){return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dy(Object(n),!0).forEach(function(r){gy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ic(){return Ic=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(e,t,n){var r=K0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Ic.apply(this,arguments)}function K0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Co(e))!==null;);return e}function Lc(e,t){return Lc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Lc(e,t)}function Z0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Co(e);if(t){var a=Co(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return q0(this,n)}}function q0(e,t){if(t&&(Rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yy(e)}function yy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Co(e)}function gy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vy(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var zc=(zr=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Lc(o,u)})(a,e);var t,n,r=Z0(a);function a(){var o;V0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return gy(yy(o=r.call.apply(r,[this].concat(p))),"modelType",ht.TEXT_NODE),o}return t=a,(n=[{key:"getTextStyle",value:function(){var o=Ic(Co(a.prototype),"getTextStyle",this).call(this),u=this.graphModel.theme.text;return hy(hy({},o),Dt(u))}},{key:"width",get:function(){var o=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return ms({rows:o,fontSize:u,rowsLength:o.length}).width}},{key:"height",get:function(){var o=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return ms({rows:o,fontSize:u,rowsLength:o.length}).height}}])&&W0(t.prototype,n),a}(mr),vy(zr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(zr.prototype,"width"),zr.prototype),vy(zr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(zr.prototype,"height"),zr.prototype),zr);function Bc(e){return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(e)}function J0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fc(e,t){return Fc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fc(e,t)}function Q0(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Va(e);if(t){var a=Va(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return eO(this,n)}}function eO(e,t){if(t&&(Bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return by(e)}function by(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Va(e){return Va=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Va(e)}function tO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn,my,Oy,_y,Hc=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Fc(o,u)})(a,e);var t,n,r=Q0(a);function a(){var o;J0(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return tO(by(o=r.call.apply(r,[this].concat(p))),"modelType",ht.HTML_NODE),o}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var o=this.x,u=this.y,p=this.width,d=this.height;return[{x:o,y:u-d/2,id:"".concat(this.id,"_0")},{x:o+p/2,y:u,id:"".concat(this.id,"_1")},{x:o,y:u+d/2,id:"".concat(this.id,"_2")},{x:o-p/2,y:u,id:"".concat(this.id,"_3")}]}}])&&$0(t.prototype,n),a}(mr);function wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Uc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function nO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yi(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(u){o[u]=r[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},o),a&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,t,o),o=null),o}var Ey=(Hn=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),xy(this,"graphModel",void 0),Uc(this,"isShowHorizontal",my,this),Uc(this,"isShowVertical",Oy,this),Uc(this,"position",_y,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}var t,n;return t=e,n=[{key:"getStyle",value:function(){return function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?wy(Object(o),!0).forEach(function(u){xy(r,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):wy(Object(o)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(o,u))})}return r}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(r,a){for(var o=r.x,u=r.y,p=!1,d=!1,O=0;O<a.length;O++){var _=a[O];if(_.id!==r.id&&(o===_.x&&(p=!0),u===_.y&&(d=!0),p&&d))break}return{isShowVertical:p,isShowHorizontal:d,position:{x:o,y:u}}}},{key:"getHorizontalSnapline",value:function(r,a){var o,u,p=!1,d=r.id;if(d){var O=this.graphModel.fakerNode;if(O&&O.id===d)u=jn(O);else{var _=this.graphModel.getNodeModelById(d);u=jn(_)}}for(var j=0;j<a.length;j++){var k=a[j];if(k.id!==r.id){var I=jn(k);if(I.minY===u.minY||I.maxY===u.minY){p=!0,o=u.minY;break}if(I.minY===u.maxY||I.maxY===u.maxY){p=!0,o=u.maxY;break}}}return sn({isShowHorizontal:p,position:{y:o}})}},{key:"getVerticalSnapline",value:function(r,a){var o,u,p=!1,d=r.id;if(d){var O=this.graphModel.fakerNode;if(O&&O.id===d)u=jn(O);else{var _=this.graphModel.getNodeModelById(d);u=jn(_)}}for(var j=0;j<a.length;j++){var k=a[j];if(k.id!==r.id){var I=jn(k);if(I.minX===u.minX||I.maxX===u.minX){p=!0,o=u.minX;break}if(I.minX===u.maxX||I.maxX===u.maxX){p=!0,o=u.maxX;break}}}return sn({isShowVertical:p,position:{x:o}})}},{key:"getSnapLinePosition",value:function(r,a){var o=this.getCenterSnapLine(r,a),u=o.isShowHorizontal,p=o.isShowVertical;if(!u){var d=this.getHorizontalSnapline(r,a);d.isShowHorizontal&&(o.isShowHorizontal=d.isShowHorizontal,o.position.y=d.position.y)}if(!p){var O=this.getVerticalSnapline(r,a);O.isShowVertical&&(o.isShowVertical=O.isShowVertical,o.position.x=O.position.x)}return o}},{key:"setSnaplineInfo",value:function(r){var a=r.isShowHorizontal,o=r.isShowVertical,u=r.position;this.position=u,this.isShowHorizontal=a,this.isShowVertical=o}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(r){var a=this.graphModel.nodes,o=this.getSnapLinePosition(r,a);this.setSnaplineInfo(o)}}],n&&nO(t.prototype,n),e}(),my=yi(Hn.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oy=yi(Hn.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_y=yi(Hn.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi(Hn.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Hn.prototype,"clearSnapline"),Hn.prototype),yi(Hn.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Hn.prototype,"setNodeSnapLine"),Hn.prototype),Hn),gi=new Map,Sy=function(e){var t=Nr(),n=window.requestAnimationFrame(function r(){if(e(),gi.get(t)){var a=window.requestAnimationFrame(r);gi.set(t,a)}});return gi.set(t,n),t},Wa=function(e){var t=gi.get(e);t&&(window.cancelAnimationFrame(t),gi.delete(e))};function Gc(e){return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gc(e)}function vi(){return vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vi.apply(this,arguments)}function jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jy(Object(n),!0).forEach(function(r){rr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Py(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Py(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xc(e,t){return Xc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Xc(e,t)}function iO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Za(e);if(t){var a=Za(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return aO(this,n)}}function aO(e,t){if(t&&(Gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nr(e)}function nr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e){return Za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Za(e)}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uO=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Xc(o,u)})(a,e);var t,n,r=iO(a);function a(){var o;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),rr(nr(o=r.call(this)),"preTargetNode",void 0),rr(nr(o),"sourceRuleResults",void 0),rr(nr(o),"targetRuleResults",void 0),rr(nr(o),"dragHandler",void 0),rr(nr(o),"t",void 0),rr(nr(o),"onDragStart",function(u){var p=u.event,d=o.props,O=d.anchorData,_=d.nodeModel,j=d.graphModel,k=j.overlapMode;j.selectNodeById(_.id),k!==Sn.INCREASE&&_.autoToFront&&j.toFront(_.id),j.eventCenter.emit(tt.ANCHOR_DRAGSTART,{data:O,e:p,nodeModel:_}),o.setState({startX:O.x,startY:O.y,endX:O.x,endY:O.y})}),rr(nr(o),"onDragging",function(u){var p=u.event,d=o.props,O=d.graphModel,_=d.nodeModel,j=d.anchorData,k=O.transformModel,I=O.eventCenter,X=O.width,W=O.height,oe=O.editConfigModel,re=oe.autoExpand,de=oe.stopMoveGraph,me=p.clientX,ke=p.clientY,Ee=O.getPointByClient({x:me,y:ke}),Ue=Ee.domOverlayPosition,Me=Ue.x,Be=Ue.y,Re=Ee.canvasOverlayPosition,lt=Re.x,Et=Re.y;o.t&&Wa(o.t);var mt=[];Me<10?mt=[10,0]:Me+10>X?mt=[-10,0]:Be<10?mt=[0,10]:Be+10>W&&(mt=[0,-10]),o.setState({endX:lt,endY:Et,dragging:!0}),o.moveAnchorEnd(lt,Et),mt.length>0&&!de&&re&&(o.t=Sy(function(){var jt=rO(mt,2),Ft=jt[0],Wt=jt[1];k.translate(Ft,Wt);var pn=o.state,ar=pn.endX,Ln=pn.endY;o.setState({endX:ar-Ft,endY:Ln-Wt}),o.moveAnchorEnd(ar-Ft,Ln-Wt)})),I.emit(tt.ANCHOR_DRAG,{data:j,e:p,nodeModel:_})}),rr(nr(o),"onDragEnd",function(u){var p=u.event;o.t&&Wa(o.t),o.checkEnd(p),o.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),o.sourceRuleResults.clear(),o.targetRuleResults.clear();var d=o.props,O=d.graphModel,_=d.nodeModel,j=d.anchorData;O.eventCenter.emit(tt.ANCHOR_DRAGEND,{data:j,e:p,nodeModel:_})}),rr(nr(o),"checkEnd",function(u){var p=o.props,d=p.graphModel,O=p.nodeModel,_=p.anchorData,j=_.x,k=_.y,I=_.id,X=(d.edgeType,o.state),W=X.endX,oe=X.endY,re=X.dragging,de=ya({x:W,y:oe},d);if(o.preTargetNode&&o.preTargetNode.state!==_t.DEFAULT&&o.preTargetNode.setElementState(_t.DEFAULT),re&&de&&de.node){var me=de.node,ke=de.anchor.id,Ee="".concat(O.id,"_").concat(me.id,"_").concat(ke,"_").concat(I),Ue=o.sourceRuleResults.get(Ee)||{},Me=Ue.isAllPass,Be=Ue.msg,Re=o.targetRuleResults.get(Ee)||{},lt=Re.isAllPass,Et=Re.msg;if(Me&&lt){me.setElementState(_t.DEFAULT);var mt=d.edgeGenerator(O.getData(),d.getNodeModelById(de.node.id).getData()),jt=d.addEdge(Ka(Ka({},mt),{},{sourceNodeId:O.id,sourceAnchorId:I,startPoint:{x:j,y:k},targetNodeId:de.node.id,targetAnchorId:de.anchor.id,endPoint:{x:de.anchor.x,y:de.anchor.y}})),Ft=o.props.anchorData;d.eventCenter.emit(tt.ANCHOR_DROP,{data:Ft,e:u,nodeModel:O,edgeModel:jt})}else{var Wt=me.getData();d.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Wt,msg:Et||Be})}}}),o.sourceRuleResults=new Map,o.targetRuleResults=new Map,o.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},o.dragHandler=new yr({onDragStart:o.onDragStart,onDragging:o.onDragging,onDragEnd:o.onDragEnd}),o}return t=a,(n=[{key:"getAnchorShape",value:function(){var o=this.props,u=o.anchorData,p=o.style,d=o.node.getAnchorShape(u);if(d)return d;var O=u.x,_=u.y,j=Ka(Ka({},p),p.hover);return Object(te.g)("g",null,Object(te.g)(pi,vi({className:"lf-node-anchor-hover"},j,{x:O,y:_})),Object(te.g)(pi,vi({className:"lf-node-anchor"},p,{x:O,y:_})))}},{key:"moveAnchorEnd",value:function(o,u){var p=this.props,d=p.graphModel,O=p.nodeModel,_=p.anchorData,j=ya({x:o,y:u},d);if(j){var k=j.node,I=j.anchor.id;if(this.preTargetNode&&this.preTargetNode!==j.node&&this.preTargetNode.setElementState(_t.DEFAULT),_.id===I)return;this.preTargetNode=k;var X="".concat(O.id,"_").concat(k.id,"_").concat(I,"_").concat(_.id);if(!this.targetRuleResults.has(X)){var W=j.anchor,oe=O.isAllowConnectedAsSource(k,_,W),re=k.isAllowConnectedAsTarget(O,_,W);this.sourceRuleResults.set(X,ii(oe)),this.targetRuleResults.set(X,ii(re))}var de=this.sourceRuleResults.get(X).isAllPass,me=this.targetRuleResults.get(X).isAllPass;de&&me?k.setElementState(_t.ALLOW_CONNECT):k.setElementState(_t.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==_t.DEFAULT&&this.preTargetNode.setElementState(_t.DEFAULT)}},{key:"isShowLine",value:function(){var o=this.state,u=o.startX,p=o.startY,d=o.endX,O=o.endY;return Jn(u,p,d,O)>10}},{key:"render",value:function(){var o=this,u=this.state,p=u.startX,d=u.startY,O=u.endX,_=u.endY,j=this.props,k=j.anchorData.edgeAddable,I=j.edgeStyle;return Object(te.g)("g",{className:"lf-anchor"},Object(te.g)("g",{onMouseDown:function(X){k!==!1&&o.dragHandler.handleMouseDown(X)}},this.getAnchorShape()),this.isShowLine()&&Object(te.g)(Eo,vi({x1:p,y1:d,x2:O,y2:_},I,{"pointer-events":"none"})))}}])&&oO(t.prototype,n),a}(te.a);i(80);function Ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ay(Object(n),!0).forEach(function(r){cO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yc(e){return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}function lO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ky(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ky(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function My(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.value,u=e.fontSize,p=e.fill,d=p===void 0?"currentColor":p,O=e.overflowMode,_=O===void 0?"default":O,j=e.textWidth,k=j===void 0?"":j,I=e.model,X={textAnchor:"middle","dominant-baseline":"middle",x:n,y:a,fill:d};if(Object.entries(e).forEach(function(ke){var Ee=lO(ke,2),Ue=Ee[0],Me=Ee[1];Yc(Me)!=="object"&&(X[Ue]=Me)}),o){var W=String(o).split(/[\r\n]/g),oe=W.length;if(_!=="default"){var re=I.BaseType,de=I.modelType;if(re===Ut.NODE&&de!==ht.TEXT_NODE||re===Ut.EDGE&&k)return function(ke){var Ee=ke.value,Ue=ke.fontSize,Me=ke.model,Be=ke.fontFamily,Re=Be===void 0?"":Be,lt=ke.lineHeight,Et=ke.wrapPadding,mt=Et===void 0?"0, 0":Et,jt=ke.overflowMode,Ft=ke.x,Wt=ke.y,pn=Me.width,ar=Me.textHeight,Ln=ke.textWidth||pn,Lo=String(Ee).split(/[\r\n]/g),bu=Lo.length,mu=Qp({rows:Lo,style:{fontSize:"".concat(Ue,"px"),width:"".concat(Ln,"px"),fontFamily:Re,lineHeight:lt,padding:mt},rowsLength:bu,className:"lf-get-text-height"}),ao=Me.height>mu?Me.height:mu;ar&&(ao=ar);var Hr=jt==="ellipsis";return Hr&&(ao=Ue+2),Object(te.g)("g",null,Object(te.g)("foreignObject",{width:Ln,height:ao,x:Ft-Ln/2,y:Wt-ao/2},Object(te.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:ao,width:Ln,padding:mt}},Object(te.g)("div",{className:Hr?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Hr?Lo.join(""):"",style:sO({},ke)},Lo.map(function(Ur){return Object(te.g)("div",{className:"lf-node-text--auto-wrap-inner"},Ur)})))))}(e)}if(oe>1){var me=W.map(function(ke,Ee){var Ue=(Ee-(oe-1)/2)*(u+2);return Object(te.g)("tspan",{className:"lf-text-tspan",x:n,y:a+Ue},ke)});return Object(te.g)("text",X,me)}return Object(te.g)("text",X,o)}}function Vc(e){return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vc(e)}function Wc(){return Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(this,arguments)}function fO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ty(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ty(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kc(e,t){return Kc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Kc(e,t)}function dO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=qa(e);if(t){var a=qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hO(this,n)}}function hO(e,t){if(t&&(Vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Br(e)}function Br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qa(e)}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dy=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Kc(o,u)})(a,e);var t,n,r=dO(a);function a(o){var u;(function(d,O){if(!(d instanceof O))throw new TypeError("Cannot call a class as a function")})(this,a),ro(Br(u=r.call(this)),"dragHandler",void 0),ro(Br(u),"sumDeltaX",0),ro(Br(u),"sumDeltaY",0),ro(Br(u),"stepDrag",void 0),ro(Br(u),"onDragging",function(d){var O=d.deltaX,_=d.deltaY,j=u.props,k=j.model,I=fO(j.graphModel.transformModel.fixDeltaXY(O,_),2),X=I[0],W=I[1];k.moveText(X,W)}),ro(Br(u),"dblClickHandler",function(){u.props.editable&&u.props.model.setElementState(_t.TEXT_EDIT)}),ro(Br(u),"mouseDownHandle",function(d){var O=u.props,_=O.draggable,j=O.model,k=O.graphModel.editConfigModel.nodeTextDraggable;(_||k)&&(u.stepDrag.model=j,u.stepDrag.handleMouseDown(d))}),o.model;var p=o.draggable;return u.stepDrag=new yr({onDragging:u.onDragging,step:1,isStopPropagation:p}),u}return t=a,(n=[{key:"getShape",value:function(){var o=this.props,u=o.model,p=o.graphModel,d=u.text,O=p.editConfigModel,_=d.value,j=d.x,k=d.y,I=d.editable,X=d.draggable,W={x:j,y:k,className:"",value:_};I?W.className="lf-element-text":X||O.nodeTextDraggable?W.className="lf-text-draggable":W.className="lf-text-disabled";var oe=u.getTextStyle();return Object(te.g)(My,Wc({},W,oe,{model:u}))}},{key:"render",value:function(){if(this.props.model.text)return Object(te.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&pO(t.prototype,n),a}(te.a),yO=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Zc(e){return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function Ja(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ny(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ny(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ny(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return qc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},qc(e,t)}function gO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=$a(e);if(t){var a=$a(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return vO(this,n)}}function vO(e,t){if(t&&(Zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rn(e)}function rn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e){return $a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$a(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Or=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&qc(u,p)})(o,e);var t,n,r,a=gO(o);function o(u){var p;(function(k,I){if(!(k instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o),fn(rn(p=a.call(this)),"t",void 0),fn(rn(p),"moveOffset",void 0),fn(rn(p),"stepDrag",void 0),fn(rn(p),"contextMenuTime",void 0),fn(rn(p),"startTime",void 0),fn(rn(p),"clickTimer",void 0),fn(rn(p),"onDragStart",function(k){var I=k.event,X=I.clientX,W=I.clientY,oe=p.props,re=oe.model,de=oe.graphModel.getPointByClient({x:X,y:W}).canvasOverlayPosition,me=de.x,ke=de.y;p.moveOffset={x:re.x-me,y:re.y-ke}}),fn(rn(p),"onDragging",function(k){var I=k.event,X=p.props,W=X.model,oe=X.graphModel,re=oe.editConfigModel,de=re.stopMoveGraph,me=re.autoExpand,ke=oe.transformModel,Ee=oe.selectNodes,Ue=oe.width,Me=oe.height,Be=oe.gridSize;W.isDragging=!0;var Re=I.clientX,lt=I.clientY,Et=oe.getPointByClient({x:Re,y:lt}).canvasOverlayPosition,mt=Et.x,jt=Et.y,Ft=Ja(ke.CanvasPointToHtmlPoint([mt,jt]),2),Wt=Ft[0],pn=Ft[1];if(mt+=p.moveOffset.x,jt+=p.moveOffset.y,mt=Dr(mt,Be),jt=Dr(jt,Be),Ue&&Me){if(!me||de||!(Wt<0||pn<0||Wt>Ue||pn>Me)){var ar=Ja(ke.CanvasPointToHtmlPoint([mt-W.width/2,jt-W.height/2]),2),Ln=ar[0],Lo=ar[1],bu=Ja(ke.CanvasPointToHtmlPoint([mt+W.width/2,jt+W.height/2]),2),mu=bu[0],ao=bu[1],Hr=Math.max(Be,20),Ur=[];Ln<0?Ur=[Hr,0]:mu>oe.width?Ur=[-Hr,0]:Lo<0?Ur=[0,Hr]:ao>oe.height&&(Ur=[0,-Hr]),p.t&&Wa(p.t);var Ou=Ee.map(function(_u){return _u.id});Ou.indexOf(W.id)===-1&&(Ou=[W.id]),Ur.length>0&&!de&&me?p.t=Sy(function(){var _u=Ja(Ur,2),yg=_u[0],gg=_u[1];ke.translate(yg,gg);var a1=-yg/ke.SCALE_X,u1=-gg/ke.SCALE_X;oe.moveNodes(Ou,a1,u1)}):oe.moveNodes(Ou,mt-W.x,jt-W.y)}}else oe.moveNode2Coordinate(W.id,mt,jt)}),fn(rn(p),"onDragEnd",function(){p.t&&Wa(p.t),p.props.model.isDragging=!1}),fn(rn(p),"handleClick",function(k){if(p.startTime&&!(new Date().getTime()-p.startTime>200)){var I=p.props,X=I.model,W=I.graphModel,oe={data:X.getData(),e:k,position:W.getPointByClient({x:k.clientX,y:k.clientY}),isSelected:!1,isMultiple:!1},re=k.button===2,de=k.detail===2;if(!re){var me=W.editConfigModel,ke=Sp(k,me);oe.isMultiple=ke,X.isSelected&&!de&&ke?(oe.isSelected=!1,X.setSelected(!1)):(W.selectNodeById(X.id,ke),oe.isSelected=!0,p.toFront()),de?(me.nodeTextEdit&&X.text.editable&&(X.setSelected(!1),W.setElementStateById(X.id,_t.TEXT_EDIT)),W.eventCenter.emit(tt.NODE_DBCLICK,oe)):(W.eventCenter.emit(tt.ELEMENT_CLICK,oe),W.eventCenter.emit(tt.NODE_CLICK,oe))}}}),fn(rn(p),"handleContextMenu",function(k){k.preventDefault();var I=p.props,X=I.model,W=I.graphModel,oe=X.getData(),re=W.getPointByClient({x:k.clientX,y:k.clientY});W.setElementStateById(X.id,_t.SHOW_MENU,re.domOverlayPosition),X.isSelected||W.selectNodeById(X.id),W.eventCenter.emit(tt.NODE_CONTEXTMENU,{data:oe,e:k,position:re}),p.toFront()}),fn(rn(p),"handleMouseDown",function(k){var I=p.props,X=I.model,W=I.graphModel;p.startTime=new Date().getTime(),W.editConfigModel.adjustNodePosition&&X.draggable&&p.stepDrag&&p.stepDrag.handleMouseDown(k)}),fn(rn(p),"setHoverON",function(k){var I=p.props,X=I.model,W=I.graphModel;if(!X.isHovered){var oe=X.getData();X.setHovered(!0),W.eventCenter.emit(tt.NODE_MOUSEENTER,{data:oe,e:k})}}),fn(rn(p),"setHoverOFF",function(k){var I=p.props,X=I.model,W=I.graphModel,oe=X.getData();X.isHovered&&(X.setHovered(!1),W.eventCenter.emit(tt.NODE_MOUSELEAVE,{data:oe,e:k}))}),fn(rn(p),"onMouseOut",function(k){yO&&p.setHoverOFF(k)});var d=u.graphModel,O=d.gridSize,_=d.eventCenter,j=u.model;return p.stepDrag=new yr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:O,eventType:"NODE",isStopPropagation:!1,eventCenter:_,model:j}),p}return t=o,r=[{key:"getModel",value:function(u){return u}}],(n=[{key:"getAnchorShape",value:function(u){return null}},{key:"getAnchors",value:function(){var u=this,p=this.props,d=p.model,O=p.graphModel,_=d.isSelected,j=d.isHitable,k=d.isDragging,I=d.isShowAnchor;return j&&(_||I)&&!k?fa(d.anchors,function(X,W){var oe=d.getAnchorLineStyle(X),re=d.getAnchorStyle(X);return Object(te.g)(uO,{anchorData:X,node:u,style:re,edgeStyle:oe,anchorIndex:W,nodeModel:d,graphModel:O,setHoverOFF:u.setHoverOFF})}):[]}},{key:"getText",value:function(){var u=this.props,p=u.model,d=u.graphModel;if(p.state===_t.TEXT_EDIT)return"";if(p.text){var O=d.editConfigModel,_=!1;return(p.text.draggable||O.nodeTextDraggable)&&(_=!0),Object(te.g)(Dy,{editable:O.nodeTextEdit&&p.text.editable,model:p,graphModel:d,draggable:_})}}},{key:"getStateClassName",value:function(){var u=this.props.model,p=u.state,d=u.isDragging,O=u.isSelected,_="lf-node";switch(p){case _t.ALLOW_CONNECT:_+=" lf-node-allow";break;case _t.NOT_ALLOW_CONNECT:_+=" lf-node-not-allow";break;default:_+=" lf-node-default"}return d&&(_+=" lf-isDragging"),O&&(_+=" lf-node-selected"),_}},{key:"toFront",value:function(){var u=this.props,p=u.model,d=u.graphModel;d.overlapMode!==Sn.INCREASE&&p.autoToFront&&d.toFront(p.id)}},{key:"render",value:function(){var u,p=this.props,d=p.model,O=p.graphModel,_=O.editConfigModel,j=_.hideAnchors,k=_.adjustNodePosition,I=O.gridSize,X=O.transformModel.SCALE_X,W=d.isHitable,oe=d.draggable,re=Object(te.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),j?null:this.getAnchors());return W?(k&&oe&&this.stepDrag.setStep(I*X),u=Object(te.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},re)):u=Object(te.g)("g",{className:this.getStateClassName()},re),u}}])&&Cy(t.prototype,n),r&&Cy(t,r),o}(te.a);function Jc(e){return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function $c(){return $c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$c.apply(this,arguments)}function bO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qc(e,t){return Qc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Qc(e,t)}function OO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Qa(e);if(t){var a=Qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _O(this,n)}}function _O(e,t){if(t&&(Jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(e)}var el=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Qc(o,u)})(a,e);var t,n,r=OO(a);function a(){return bO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)(Ir,$c({},u,{x:o.x,y:o.y,width:o.width,height:o.height,radius:o.radius}))}}])&&mO(t.prototype,n),a}(Or);function tl(e){return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(e)}function nl(){return nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nl.apply(this,arguments)}function wO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rl(e,t){return rl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},rl(e,t)}function EO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=eu(e);if(t){var a=eu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return SO(this,n)}}function SO(e,t){if(t&&(tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function eu(e){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},eu(e)}var ol=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&rl(o,u)})(a,e);var t,n,r=EO(a);function a(){return wO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.r,O=o.getNodeStyle();return Object(te.g)(pi,nl({},O,{x:u,y:p,r:d}))}}])&&xO(t.prototype,n),a}(Or);function il(e){return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}function jO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ry(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ry(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ry(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iy(e){var t=e.points,n=e.className,r={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(a){var o=jO(a,2),u=o[0],p=o[1];il(p)!=="object"&&(r[u]=p)}),r.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",r.points=t.map(function(a){return a.join(",")}).join(" "),Object(te.g)("polygon",r)}function al(e){return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},al(e)}function ul(){return ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}function PO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sl(e,t){return sl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},sl(e,t)}function kO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=tu(e);if(t){var a=tu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return MO(this,n)}}function MO(e,t){if(t&&(al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(e)}var cl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&sl(o,u)})(a,e);var t,n,r=kO(a);function a(){return PO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.width,O=o.height,_=o.points,j=o.getNodeStyle(),k={transform:"matrix(1 0 0 1 ".concat(u-d/2," ").concat(p-O/2,")")};return Object(te.g)("g",k,Object(te.g)(Iy,ul({},j,{points:_,x:u,y:p})))}}])&&AO(t.prototype,n),a}(Or);function ll(e){return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function fl(){return fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fl.apply(this,arguments)}function TO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pl(e,t){return pl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},pl(e,t)}function NO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=nu(e);if(t){var a=nu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return CO(this,n)}}function CO(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(e)}var dl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&pl(o,u)})(a,e);var t,n,r=NO(a);function a(){return TO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)("g",null,Object(te.g)(Iy,fl({},u,{points:o.points,x:o.x,y:o.y})))}}])&&DO(t.prototype,n),a}(Or);function hl(e){return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function RO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ly(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ly(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ly(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IO(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,o=e.rx,u=o===void 0?4:o,p=e.ry,d=p===void 0?4:p,O=e.className,_={cx:n,cy:a,rx:u,ry:d,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(j){var k=RO(j,2),I=k[0],X=k[1];hl(X)!=="object"&&(_[I]=X)}),_.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(te.g)("ellipse",_)}function yl(e){return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function gl(){return gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}function LO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t){return vl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},vl(e,t)}function BO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ru(e);if(t){var a=ru(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return FO(this,n)}}function FO(e,t){if(t&&(yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ru(e)}var bl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&vl(o,u)})(a,e);var t,n,r=BO(a);function a(){return LO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var o=this.props.model,u=o.getNodeStyle();return Object(te.g)(IO,gl({},u,{x:o.x,y:o.y,rx:o.rx,ry:o.ry}))}}])&&zO(t.prototype,n),a}(Or);function ml(e){return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zy(Object(n),!0).forEach(function(r){HO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ol(e,t){return Ol=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ol(e,t)}function XO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=ou(e);if(t){var a=ou(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return YO(this,n)}}function YO(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ou(e){return ou=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ou(e)}var _l=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Ol(o,u)})(a,e);var t,n,r=XO(a);function a(){return UO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getBackground",value:function(){var o=this.props.model,u=o.getTextStyle(),p=o.width,d=o.height,O=o.x,_=o.y,j=By(By({},u.background),{},{x:O,y:_-1,width:p,height:d});return Object(te.g)(Ir,j)}},{key:"getShape",value:function(){return Object(te.g)("g",null,this.getBackground())}}])&&GO(t.prototype,n),a}(Or);function wl(e){return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function xl(){return xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xl.apply(this,arguments)}function VO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function El(e,t){return El=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},El(e,t)}function KO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=iu(e);if(t){var a=iu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ZO(this,n)}}function ZO(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bi(e)}function bi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iu(e)}function au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&El(o,u)})(a,e);var t,n,r=KO(a);function a(){var o;VO(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return au(bi(o=r.call.apply(r,[this].concat(p))),"ref",void 0),au(bi(o),"currentProperties",void 0),au(bi(o),"preProperties",void 0),au(bi(o),"setRef",function(O){o.ref=O}),o}return t=a,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(o){o.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var o=this.props.model,u=o.x,p=o.y,d=o.height,O=o.width,_=o.getNodeStyle();return this.currentProperties=JSON.stringify(o.properties),Object(te.g)("foreignObject",xl({},_,{x:u-O/2,y:p-d/2,width:O,height:d,ref:this.setRef}))}}])&&WO(t.prototype,n),a}(Or);function jl(e){return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function Pl(){return Pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(this,arguments)}function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fy(Object(n),!0).forEach(function(r){Ml(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Al(e,t){return Al=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Al(e,t)}function JO(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=uu(e);if(t){var a=uu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $O(this,n)}}function $O(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kl(e)}function kl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uu(e){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},uu(e)}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or,QO=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Al(o,u)})(a,e);var t,n,r=JO(a);function a(o){var u;return function(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}(this,a),Ml(kl(u=r.call(this,o)),"setHoverON",function(){u.setState({isHovered:!0})}),Ml(kl(u),"setHoverOFF",function(){u.setState({isHovered:!1})}),u.state={isHovered:!1},u}return t=a,(n=[{key:"getBackground",value:function(){var o=this.props.model,u=o.getTextStyle(),p=o.text,d=o.width,O=u.background||{};if(this.state.isHovered&&u.hover&&u.hover.background&&(O=oo(oo({},O),u.hover.background)),p&&p.value&&O.fill!=="transparent"){var _,j=u.fontSize,k=u.overflowMode,I=u.lineHeight,X=u.wrapPadding,W=u.textWidth,oe=p.value,re=p.x,de=p.y,me=String(oe).split(/[\r\n]/g),ke=me.length;if(k==="autoWrap"&&W){var Ee=Qp({rows:me,style:{fontSize:"".concat(j,"px"),width:"".concat(W,"px"),lineHeight:I,padding:X},rowsLength:ke,className:"lf-get-text-height"});_=oo(oo({},O),{},{x:re-1,y:de-1,width:W,height:Ee})}else{me&&me.forEach(function(lt){wd(lt)});var Ue=ms({rows:me,fontSize:j,rowsLength:ke}),Me=Ue.width,Be=Ue.height;if(k==="ellipsis"&&(Me=W||d,Be=j+2),typeof O.wrapPadding=="string"){var Re=O.wrapPadding.split(",").filter(function(lt){return lt.trim()}).map(function(lt){return parseFloat(lt.trim())});Re.length>0&&Re.length<=4&&(Re.length===1?Re=[Re[0],Re[0],Re[0],Re[0]]:Re.length===2?Re=[Re[0],Re[1],Re[0],Re[1]]:Re.length===3&&(Re=[Re[0],Re[1],Re[2],Re[1]]),Me+=Re[1]+Re[3],Be+=Re[0]+Re[2],re+=(Re[1]-Re[3])/2,de+=(Re[2]-Re[0])/2)}_=oo(oo({},O),{},{x:re-1,y:de-1,width:Me,height:Be})}return Object(te.g)(Ir,_)}}},{key:"getShape",value:function(){var o=this.props.model,u=o.text,p=u.value,d=u.x,O=u.y;if(p){var _=oo({x:d,y:O,className:"lf-element-text",value:p},o.getTextStyle());return Object(te.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(te.g)(My,Pl({},_,{model:o})))}}}])&&qO(t.prototype,n),a}(Dy);function Tl(e){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function Hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hy(Object(n),!0).forEach(function(r){An(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Uy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Uy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dl(e,t){return Dl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Dl(e,t)}function n_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=su(e);if(t){var a=su(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return r_(this,n)}}function r_(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function Pn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},su(e)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(or||(or={}));var Gy=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Dl(o,u)})(a,e);var t,n,r=n_(a);function a(o){var u;(function(_,j){if(!(_ instanceof j))throw new TypeError("Cannot call a class as a function")})(this,a),An(Pn(u=r.call(this)),"stepDragData",void 0),An(Pn(u),"stepDrag",void 0),An(Pn(u),"oldEdge",void 0),An(Pn(u),"preTargetNode",void 0),An(Pn(u),"targetRuleResults",void 0),An(Pn(u),"sourceRuleResults",void 0),An(Pn(u),"handleMouseDown",function(_){u.stepDrag&&u.stepDrag.handleMouseDown(_)}),An(Pn(u),"onDragStart",function(){var _=u.props,j=_.x,k=_.y,I=_.edgeModel,X=I.startPoint,W=I.endPoint,oe=I.pointsList;u.oldEdge={startPoint:X,endPoint:W,pointsList:oe},u.setState({endX:j,endY:k,dragging:!0})}),An(Pn(u),"onDragging",function(_){var j=_.deltaX,k=_.deltaY,I=u.state,X=I.endX,W=I.endY,oe=u.props,re=oe.graphModel,de=oe.type,me=re.transformModel,ke=re.editConfigModel,Ee=e_(me.moveCanvasPointByHtml([X,W],j,k),2),Ue=Ee[0],Me=Ee[1];u.setState({endX:Ue,endY:Me,dragging:!0});var Be=u.props.edgeModel,Re=ya({x:X,y:W},re);if(Re&&Re.node&&u.isAllowAdjust(Re).pass){var lt,Et=Be.startPoint,mt=Be.endPoint,jt=Be.sourceNode,Ft=Be.targetNode;de===or.SOURCE?lt={startPoint:{x:Re.anchor.x,y:Re.anchor.y},endPoint:{x:mt.x,y:mt.y},sourceNode:Re.node,targetNode:Ft}:de===or.TARGET&&(lt={startPoint:{x:Et.x,y:Et.y},endPoint:{x:Re.anchor.x,y:Re.anchor.y},sourceNode:jt,targetNode:Re.node}),Be.updateAfterAdjustStartAndEnd(lt)}else de===or.SOURCE?Be.updateStartPoint({x:Ue,y:Me}):de===or.TARGET&&Be.updateEndPoint({x:Ue,y:Me});Be.text.value&&ke.adjustEdge&&Be.setText(Object.assign({},Be.text,Be.textPosition))}),An(Pn(u),"onDragEnd",function(_){var j=_.event;try{var k;u.setState({dragging:!1});var I=u.props,X=I.graphModel,W=I.edgeModel,oe=I.type,re=u.state,de=re.endX,me=re.endY,ke=re.dragging,Ee=ya({x:de,y:me},X);if(!ke)return;var Ue,Me=!1;if(Ee&&Ee.node){var Be=u.isAllowAdjust(Ee),Re=Be.pass,lt=Be.msg,Et=Be.newTargetNode;if(Re){var mt,jt=W.getData();Ue=_r(_r({},jt),{},{sourceAnchorId:"",targetAnchorId:"",text:(jt==null||(mt=jt.text)===null||mt===void 0?void 0:mt.value)||""}),oe===or.SOURCE?(Ue=_r(_r({},X.edgeGenerator(X.getNodeModelById(Ee.node.id).getData(),X.getNodeModelById(W.targetNodeId).getData(),Ue)),{},{sourceNodeId:Ee.node.id,sourceAnchorId:Ee.anchor.id,startPoint:{x:Ee.anchor.x,y:Ee.anchor.y},targetNodeId:W.targetNodeId,endPoint:_r({},W.endPoint)}),W.sourceNodeId===Ee.node.id&&W.sourceAnchorId===Ee.anchor.id&&(Me=!0)):oe===or.TARGET&&(Ue=_r(_r({},X.edgeGenerator(X.getNodeModelById(W.sourceNodeId).getData(),X.getNodeModelById(Ee.node.id).getData(),Ue)),{},{sourceNodeId:W.sourceNodeId,startPoint:_r({},W.startPoint),targetNodeId:Ee.node.id,targetAnchorId:Ee.anchor.id,endPoint:{x:Ee.anchor.x,y:Ee.anchor.y}}),W.targetNodeId===Ee.node.id&&W.targetAnchorId===Ee.anchor.id&&(Me=!0))}else{Me=!0;var Ft=Et.getData();X.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Ft,msg:lt})}}else Me=!0;if(Me)u.recoveryEdge();else{var Wt=W.getData();X.deleteEdgeById(W.id);var pn=X.addEdge(_r({},Ue));X.eventCenter.emit(tt.EDGE_EXCHANGE_NODE,{data:{newEdge:pn.getData(),oldEdge:Wt}})}(k=u.preTargetNode)===null||k===void 0||k.setElementState(_t.DEFAULT)}finally{u.props.graphModel.eventCenter.emit(tt.ADJUST_POINT_DRAGEND,{e:j,data:u.stepDragData})}}),An(Pn(u),"recoveryEdge",function(){var _=u.props.edgeModel,j=u.oldEdge,k=j.startPoint,I=j.endPoint,X=j.pointsList;_.updateStartPoint(k),_.updateEndPoint(I),_.modelType!==ht.LINE_EDGE&&(_.pointsList=X,_.initPoints())}),An(Pn(u),"getAdjustPointStyle",function(){var _=u.props,j=_.graphModel.theme;return _.edgeModel,j.edgeAdjust}),u.state={dragging:!1,endX:0,endY:0},u.targetRuleResults=new Map,u.sourceRuleResults=new Map;var p=o.type,d=o.edgeModel,O=o.graphModel.eventCenter;return u.stepDragData={type:p,edgeData:d.getData()},u.stepDrag=new yr({onDragStart:u.onDragStart,onDragging:u.onDragging,onDragEnd:u.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:u.stepDragData}),u}return t=a,(n=[{key:"isAllowAdjust",value:function(o){var u=this.props,p=u.edgeModel,d=p.id,O=p.sourceNode,_=p.targetNode,j=p.sourceAnchorId,k=p.targetAnchorId,I=u.type,X=null,W=null,oe=null,re=null;if(I===or.SOURCE?(X=o.node,W=_,oe=o.anchor,re=_.getAnchorInfo(k)):(X=O,W=o.node,re=o.anchor,oe=O.getAnchorInfo(j)),this.preTargetNode&&this.preTargetNode!==o.node&&this.preTargetNode.setElementState(_t.DEFAULT),this.preTargetNode=o.node,re.id===oe.id)return{pass:!1,msg:"",newTargetNode:W};var de="".concat(X.id,"_").concat(W.id,"_").concat(oe.id,"_").concat(re.id);if(!this.targetRuleResults.has(de)){var me=X.isAllowConnectedAsSource(W,oe,re,d),ke=W.isAllowConnectedAsTarget(X,oe,re,d);this.sourceRuleResults.set(de,ii(me)),this.targetRuleResults.set(de,ii(ke))}var Ee=this.sourceRuleResults.get(de),Ue=Ee.isAllPass,Me=Ee.msg,Be=this.targetRuleResults.get(de),Re=Be.isAllPass,lt=Be.msg,Et=Ue&&Re?_t.ALLOW_CONNECT:_t.NOT_ALLOW_CONNECT;return I===or.SOURCE?X.setElementState(Et):W.setElementState(Et),{pass:Ue&&Re,msg:lt||Me,newTargetNode:W}}},{key:"render",value:function(){var o=this.props,u=o.x,p=o.y,d=o.getAdjustPointShape,O=o.edgeModel,_=this.state.dragging;return Object(te.g)("g",{pointerEvents:_?"none":"",onMouseDown:this.handleMouseDown},_?"":d(u,p,O))}}])&&t_(t.prototype,n),a}(te.a);function Nl(e){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mi.apply(this,arguments)}function o_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Xy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cl(e,t){return Cl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Cl(e,t)}function u_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=cu(e);if(t){var a=cu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s_(this,n)}}function s_(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Un(e)}function Un(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cu(e){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cu(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oi=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Cl(o,u)})(a,e);var t,n,r=u_(a);function a(){var o;i_(this,a);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return ir(Un(o=r.call.apply(r,[this].concat(p))),"startTime",void 0),ir(Un(o),"contextMenuTime",void 0),ir(Un(o),"clickTimer",void 0),ir(Un(o),"textRef",Object(te.f)()),ir(Un(o),"handleHover",function(O,_){var j=o.props,k=j.model,I=j.graphModel.eventCenter;k.setHovered(O);var X=O?tt.EDGE_MOUSEENTER:tt.EDGE_MOUSELEAVE,W=k.getData();I.emit(X,{data:W,e:_})}),ir(Un(o),"setHoverON",function(O){o.props.model.isHovered||(o.textRef&&o.textRef.current&&o.textRef.current.setHoverON(),o.handleHover(!0,O))}),ir(Un(o),"setHoverOFF",function(O){o.props.model.isHovered&&(o.textRef&&o.textRef.current&&o.textRef.current.setHoverOFF(),o.handleHover(!1,O))}),ir(Un(o),"handleContextMenu",function(O){O.preventDefault(),o.contextMenuTime=new Date().getTime(),o.clickTimer&&clearTimeout(o.clickTimer);var _=o.props,j=_.model,k=_.graphModel,I=k.getPointByClient({x:O.clientX,y:O.clientY});k.setElementStateById(j.id,_t.SHOW_MENU,I.domOverlayPosition),o.toFront(),j.isSelected||k.selectEdgeById(j.id);var X=j==null?void 0:j.getData();k.eventCenter.emit(tt.EDGE_CONTEXTMENU,{data:X,e:O,position:I})}),ir(Un(o),"handleMouseDown",function(O){O.stopPropagation(),o.startTime=new Date().getTime()}),ir(Un(o),"handleMouseUp",function(O){if(o.startTime&&!(new Date().getTime()-o.startTime>200||O.button===2)){var _=O.detail===2,j=o.props,k=j.model,I=j.graphModel,X=k==null?void 0:k.getData(),W=I.getPointByClient({x:O.clientX,y:O.clientY});if(_){var oe=I.editConfigModel,re=I.textEditElement;if(re&&re.id===k.id&&I.setElementStateById(k.id,_t.DEFAULT),oe.edgeTextEdit&&k.text.editable&&I.setElementStateById(k.id,_t.TEXT_EDIT),k.modelType===ht.POLYLINE_EDGE){var de=k,me=I.getPointByClient({x:O.x,y:O.y}).canvasOverlayPosition,ke=me.x,Ee=me.y,Ue=Sd({x:ke,y:Ee},de.points);de.dbClickPosition=Ue}I.eventCenter.emit(tt.EDGE_DBCLICK,{data:X,e:O,position:W})}else I.eventCenter.emit(tt.ELEMENT_CLICK,{data:X,e:O,position:W}),I.eventCenter.emit(tt.EDGE_CLICK,{data:X,e:O,position:W});var Me=I.editConfigModel;I.selectEdgeById(k.id,Sp(O,Me)),o.toFront()}}),o}return t=a,(n=[{key:"getShape",value:function(){return Object(te.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var o=this.props,u=o.model,p=o.graphModel;if(u.state===_t.TEXT_EDIT)return null;var d=!1,O=p.editConfigModel;return(u.text.draggable||O.edgeTextDraggable)&&(d=!0),Object(te.g)(QO,{ref:this.textRef,editable:O.edgeTextEdit&&u.text.editable,model:u,graphModel:p,draggable:d})}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=o.startPoint,p=o.endPoint,d=o.isSelected;return{start:u,end:p,hover:this.state.hover,isSelected:d}}},{key:"getLastTwoPoints",value:function(){var o=this.props.model;return[o.startPoint,o.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var o=this.props.model,u=o.id,p=o.getArrowStyle(),d=p.refY,O=d===void 0?0:d,_=p.refX,j=_===void 0?2:_,k=o_(this.getLastTwoPoints(),2),I=k[0],X=k[1],W="auto";return I!==null&&X!==null&&(W=em({x:X.x-I.x,y:X.y-I.y,z:0})*(180/Math.PI)),Object(te.g)("g",null,Object(te.g)("defs",null,Object(te.g)("marker",{id:"marker-start-".concat(u),refX:-j,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(te.g)("marker",{id:"marker-end-".concat(u),refX:j,refY:O,overflow:"visible",orient:W,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var o=this.props.model.getArrowStyle();return o.stroke,o.strokeWidth,o.offset,o.verticalLength,Object(te.g)("path",null)}},{key:"getEndArrow",value:function(){var o=this.props.model.getArrowStyle(),u=o.stroke,p=o.strokeWidth,d=o.offset,O=o.verticalLength;return Object(te.g)("path",{stroke:u,fill:u,strokeWidth:p,transform:"rotate(180)",d:"M 0 0 L ".concat(d," -").concat(O," L ").concat(d," ").concat(O," Z")})}},{key:"getAdjustPointShape",value:function(o,u,p){var d=p.getAdjustPointStyle();return Object(te.g)(pi,mi({className:"lf-edge-adjust-point"},d,{x:o,y:u}))}},{key:"getAdjustPoints",value:function(){var o=this.props,u=o.model,p=o.graphModel,d=u.getAdjustStart(),O=u.getAdjustEnd();return Object(te.g)("g",null,Object(te.g)(Gy,mi({type:"SOURCE"},d,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})),Object(te.g)(Gy,mi({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(te.g)("g",null)}},{key:"getAppend",value:function(){return Object(te.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var o=this.props,u=o.graphModel,p=o.model;u.overlapMode!==Sn.INCREASE&&u.toFront(p.id)}},{key:"render",value:function(){var o=this.props,u=o.model,p=u.isSelected,d=u.isHitable,O=u.isShowAdjustPoint;return o.graphModel.animation,Object(te.g)("g",null,Object(te.g)("g",{className:["lf-edge",!d&&"pointer-none",p&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&p?this.getAdjustPoints():"")}}])&&a_(t.prototype,n),a}(te.a);function Rl(e){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function c_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Yy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _i=function(e){var t={d:""};return Object.entries(e).forEach(function(n){var r=c_(n,2),a=r[0],o=r[1],u=Rl(o);a!=="style"&&u==="object"||(t[a]=o)}),Object(te.g)("path",t)};function Il(e){return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function Ll(){return Ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ll.apply(this,arguments)}function l_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zl(e,t){return zl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},zl(e,t)}function p_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=lu(e);if(t){var a=lu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d_(this,n)}}function d_(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function lu(e){return lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lu(e)}var Bl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&zl(o,u)})(a,e);var t,n,r=p_(a);function a(){return l_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.startPoint,p=o.endPoint,d=o.isAnimation,O=o.arrowConfig,_=o.getEdgeStyle(),j=o.getEdgeAnimationStyle(),k=j.strokeDasharray,I=j.stroke,X=j.strokeDashoffset,W=j.animationName,oe=j.animationDuration,re=j.animationIterationCount,de=j.animationTimingFunction,me=j.animationDirection;return Object(te.g)(Eo,Ll({},_,{x1:u.x,y1:u.y,x2:p.x,y2:p.y},O,d?{strokeDasharray:k,stroke:I,style:{strokeDashoffset:X,animationName:W,animationDuration:oe,animationIterationCount:re,animationTimingFunction:de,animationDirection:me}}:{}))}},{key:"getAppendWidth",value:function(){var o=this.props.model,u=function(k){var I,X=k.start,W=k.end;if(X.x===W.x&&X.y===W.y)I="";else{var oe={start:X,end:W,offset:10,verticalLength:5},re=si(ga(ga({},oe),{},{type:"start"})),de=si(ga(ga({},oe),{},{type:"end"}));I="M".concat(re.leftX," ").concat(re.leftY,` 
    L`).concat(re.rightX," ").concat(re.rightY,` 
    L`).concat(de.rightX," ").concat(de.rightY,`
    L`).concat(de.leftX," ").concat(de.leftY," z")}return{d:I,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:o.startPoint,end:o.endPoint}),p=u.d,d=u.strokeWidth,O=u.fill,_=u.strokeDasharray,j=u.stroke;return Object(te.g)(_i,{d:p,fill:O,strokeWidth:d,stroke:j,strokeDasharray:_})}}])&&f_(t.prototype,n),a}(Oi);function Fl(e){return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function h_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Vy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y_=function(e){var t={points:"",fill:"none"};return Object.entries(e).forEach(function(n){var r=h_(n,2),a=r[0],o=r[1];(a==="style"||Fl(o)!=="object")&&(t[a]=o)}),Object(te.g)("polyline",t)};function Hl(e){return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function Wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wy(Object(n),!0).forEach(function(r){xr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ul(){return Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ul.apply(this,arguments)}function g_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ky(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ky(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gl(e,t){return Gl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Gl(e,t)}function b_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=pu(e);if(t){var a=pu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m_(this,n)}}function m_(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wr(e)}function wr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(e){return pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pu(e)}function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Gl(o,u)})(a,e);var t,n,r=b_(a);function a(){var o;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),xr(wr(o=r.call(this)),"drag",void 0),xr(wr(o),"isDragging",void 0),xr(wr(o),"isShowAdjustPointTemp",void 0),xr(wr(o),"appendInfo",void 0),xr(wr(o),"onDragStart",function(){var u=o.props.model;u.dragAppendStart(),o.isShowAdjustPointTemp=u.isShowAdjustPoint,u.isShowAdjustPoint=!1}),xr(wr(o),"onDragging",function(u){var p=u.deltaX,d=u.deltaY,O=o.props,_=O.model,j=O.graphModel;o.isDragging=!0;var k=j.transformModel,I=j.editConfigModel,X=g_(k.fixDeltaXY(p,d),2),W=X[0],oe=X[1],re=_,de=I.adjustEdgeMiddle;o.appendInfo=de?re.dragAppendSimple(o.appendInfo,{x:W,y:oe}):re.dragAppend(o.appendInfo,{x:W,y:oe})}),xr(wr(o),"onDragEnd",function(){var u=o.props,p=u.model,d=u.graphModel.eventCenter,O=p;O.dragAppendEnd(),o.isDragging=!1,O.isShowAdjustPoint=o.isShowAdjustPointTemp,o.appendInfo=void 0,d.emit(tt.EDGE_ADJUST,{data:O.getData()})}),xr(wr(o),"beforeDragStart",function(u,p){p.dragAble&&o.drag.handleMouseDown(u),o.appendInfo=p}),o.drag=new yr({onDragStart:o.onDragStart,onDragging:o.onDragging,onDragEnd:o.onDragEnd,isStopPropagation:!1}),o}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.points,p=o.isAnimation,d=o.arrowConfig,O=o.getEdgeStyle(),_=o.getEdgeAnimationStyle(),j=_.strokeDasharray,k=_.stroke,I=_.strokeDashoffset,X=_.animationName,W=_.animationDuration,oe=_.animationIterationCount,re=_.animationTimingFunction,de=_.animationDirection;return Object(te.g)(y_,Ul({points:u},O,d,p?{strokeDasharray:j,stroke:k,style:{strokeDashoffset:I,animationName:X,animationDuration:W,animationIterationCount:oe,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=o.points,p=o.isSelected,d={start:null,end:null,hover:this.state.hover,isSelected:p},O=no(u);return O.length>=2&&(d.start=O[O.length-2],d.end=O[O.length-1]),d}},{key:"getLastTwoPoints",value:function(){var o=this.props.model.points,u=no(o);return u.length>=2?[u[u.length-2],u[u.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(o){var u,p=o.start,d=o.end;if(p.x===d.x&&p.y===d.y)u="";else{var O={start:p,end:d,offset:10,verticalLength:5},_=si(fu(fu({},O),{},{type:"start"})),j=si(fu(fu({},O),{},{type:"end"}));u="M".concat(_.leftX," ").concat(_.leftY,` 
      L`).concat(_.rightX," ").concat(_.rightY,` 
      L`).concat(j.rightX," ").concat(j.rightY,`
      L`).concat(j.leftX," ").concat(j.leftY," z")}return{d:u,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(o){var u=this.getAppendAttributes(o),p=u.d,d=u.strokeWidth,O=u.fill,_=u.strokeDasharray,j=u.stroke;return Object(te.g)(_i,{d:p,fill:O,strokeWidth:d,stroke:j,strokeDasharray:_})}},{key:"getAppendWidth",value:function(){for(var o=this,u=this.props,p=u.model,d=u.graphModel,O=p.pointsList,_=p.draggable,j=[],k=O.length,I=function(W){var oe="lf-polyline-append",re={start:{x:O[W].x,y:O[W].y},end:{x:O[W+1].x,y:O[W+1].y},startIndex:W,endIndex:W+1,direction:"",dragAble:!0},de=Object(te.g)("g",{className:oe},o.getAppendShape(re)),me=d.editConfigModel,ke=me.adjustEdge,Ee=me.adjustEdgeMiddle;if(ke&&_){var Ue=re.startIndex,Me=re.endIndex,Be=Ee&&(Ue===0||Me===k-1);re.dragAble=!Be,re.start.x===re.end.x?(re.dragAble&&(oe+="-ew-resize"),re.direction=Mt.VERTICAL):re.start.y===re.end.y&&(re.dragAble&&(oe+="-ns-resize"),re.direction=Mt.HORIZONTAL),de=Object(te.g)("g",{className:o.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Re){return o.beforeDragStart(Re,re)}},Object(te.g)("g",{className:oe},o.getAppendShape(re)))}j.push(de)},X=0;X<k-1;X++)I(X);return Object(te.g)("g",null,j)}}])&&v_(t.prototype,n),a}(Oi);function Yl(e){return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}function O_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Zy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Zy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vl(){return Vl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vl.apply(this,arguments)}function __(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t){return Wl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Wl(e,t)}function x_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=du(e);if(t){var a=du(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E_(this,n)}}function E_(e,t){if(t&&(Yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function du(e){return du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},du(e)}var Kl=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&Wl(o,u)})(a,e);var t,n,r=x_(a);function a(){return __(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var o=this.props.model,u=o.getEdgeStyle(),p=o.path,d=o.isAnimation,O=o.arrowConfig,_=o.getEdgeAnimationStyle(),j=_.strokeDasharray,k=_.stroke,I=_.strokeDashoffset,X=_.animationName,W=_.animationDuration,oe=_.animationIterationCount,re=_.animationTimingFunction,de=_.animationDirection;return Object(te.g)(_i,Vl({d:p},u,O,d?{strokeDasharray:j,stroke:k,style:{strokeDashoffset:I,animationName:X,animationDuration:W,animationIterationCount:oe,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getAppendWidth",value:function(){var o=this.props.model.path;return Object(te.g)(_i,{d:o,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var o=this.props.model,u=this.state.hover,p=o,d=p.path,O=p.isSelected,_=O_(Ed(d),2);return{start:_[0],end:_[1],hover:u,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var o=this.props.model.path;return Ed(o)}}])&&w_(t.prototype,n),a}(Oi);function Zl(e){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function qy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function S_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ql(e,t){return ql=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ql(e,t)}function A_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=hu(e);if(t){var a=hu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k_(this,n)}}function k_(e,t){if(t&&(Zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hu(e)}var M_=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&ql(o,u)})(a,e);var t,n,r=A_(a);function a(){return j_(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getArrowAttributes",value:function(){var o=this.props,u=o.arrowInfo,p=o.style,d=u.start,O=u.end,_={start:d,end:O,offset:p.offset,verticalLength:p.verticalLength,type:"end"},j=si(_),k=j.leftX,I=j.leftY,X=j.rightX,W=j.rightY;return function(oe){for(var re=1;re<arguments.length;re++){var de=arguments[re]!=null?arguments[re]:{};re%2?qy(Object(de),!0).forEach(function(me){S_(oe,me,de[me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(de)):qy(Object(de)).forEach(function(me){Object.defineProperty(oe,me,Object.getOwnPropertyDescriptor(de,me))})}return oe}({d:"M".concat(k," ").concat(I," L").concat(O.x," ").concat(O.y," L").concat(X," ").concat(W," z")},p)}},{key:"getShape",value:function(){var o=this.getArrowAttributes(),u=o.d,p=o.strokeWidth,d=o.stroke,O=o.fill;return Object(te.g)(_i,{d:u,fill:O,strokeWidth:p,stroke:d})}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&P_(t.prototype,n),a}(te.a),Jy=function(e,t){return pe(e,t)},T_=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Jl=function(){return Xe.a.Date.now()},D_=/\s/,N_=function(e){for(var t=e.length;t--&&D_.test(e.charAt(t)););return t},C_=/^\s+/,R_=function(e){return e&&e.slice(0,N_(e)+1).replace(C_,"")},I_=/^[-+]0x[0-9a-f]+$/i,L_=/^0b[01]+$/i,z_=/^0o[0-7]+$/i,B_=parseInt,$y=function(e){if(typeof e=="number")return e;if(ct(e))return NaN;if(Tt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=R_(e);var n=L_.test(e);return n||z_.test(e)?B_(e.slice(2),n?2:8):I_.test(e)?NaN:+e},F_=Math.max,H_=Math.min,U_=function(e,t,n){var r,a,o,u,p,d,O=0,_=!1,j=!1,k=!0;if(typeof e!="function")throw new TypeError("Expected a function");function I(me){var ke=r,Ee=a;return r=a=void 0,O=me,u=e.apply(Ee,ke)}function X(me){return O=me,p=setTimeout(oe,t),_?I(me):u}function W(me){var ke=me-d;return d===void 0||ke>=t||ke<0||j&&me-O>=o}function oe(){var me=Jl();if(W(me))return re(me);p=setTimeout(oe,function(ke){var Ee=t-(ke-d);return j?H_(Ee,o-(ke-O)):Ee}(me))}function re(me){return p=void 0,k&&r?I(me):(r=a=void 0,u)}function de(){var me=Jl(),ke=W(me);if(r=arguments,a=this,d=me,ke){if(p===void 0)return X(d);if(j)return clearTimeout(p),p=setTimeout(oe,t),I(d)}return p===void 0&&(p=setTimeout(oe,t)),u}return t=$y(t)||0,Tt(n)&&(_=!!n.leading,o=(j="maxWait"in n)?F_($y(n.maxWait)||0,t):o,k="trailing"in n?!!n.trailing:k),de.cancel=function(){p!==void 0&&clearTimeout(p),O=0,r=d=a=p=void 0},de.flush=function(){return p===void 0?u:re(Jl())},de},G_=i(167);function X_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy,eg,tg,Y_=function(){function e(r){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e),Fr(this,"undos",[]),Fr(this,"redos",[]),Fr(this,"callbacks",[]),Fr(this,"stopWatch",null),Fr(this,"curData",null),Fr(this,"maxSize",50),Fr(this,"waitTime",100),Fr(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,(n=[{key:"add",value:function(r){Jy(T_(this.undos),r)||(this.undos.push(r),Jy(this.curData,r)||(this.redos=[]),this.eventCenter.emit(tt.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var r=this.undos.pop();this.redos.push(r);var a=this.undos.pop();return this.curData=Dt(a),a}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var r=this.redos.pop();return this.curData=Dt(r),r}}},{key:"watch",value:function(r){var a=this;this.stopWatch&&this.stopWatch(),this.undos.push(r.modelToGraphData()),this.stopWatch=Object(G_.a)(r,U_(function(){var o=r.modelToHistoryData();o&&a.add(o)},this.waitTime))}}])&&X_(t.prototype,n),e}();function $l(e){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function V_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ng(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ng(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ng(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rg(Object(n),!0).forEach(function(r){io(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ql(e,t){return Ql=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ql(e,t)}function W_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=yu(e);if(t){var a=yu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K_(this,n)}}function K_(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Io(e)}function Io(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yu(e){return yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yu(e)}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ig,ag,ug,ef=Gn((tg=eg=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&Ql(u,p)})(o,e);var t,n,r,a=W_(o);function o(){var u;return function(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}(this,o),io(Io(u=a.call(this)),"ref",Object(te.f)()),io(Io(u),"__prevText",{type:"",text:"",id:""}),io(Io(u),"keyupHandler",function(p){var d=u.props.graphModel.textEditElement;p.key==="Enter"&&p.altKey&&d.setElementState(0)}),io(Io(u),"inputHandler",function(p){var d=p.target.innerText,O=u.props.graphModel.textEditElement;u.__prevText={type:O.type,text:d.replace(/(\r\n)+$|(\n)+$/,""),id:O.id}}),io(Io(u),"keydownHandler",function(p){p.stopPropagation()}),u.state={style:{left:0,top:0}},u}return t=o,r=[{key:"getDerivedStateFromProps",value:function(u){var p,d=u.graphModel,O=d.transformModel,_=d.theme,j=d.textEditElement;if(j){var k;if((k=j.text)===null||k===void 0||!k.value)if(j.BaseType===Ut.EDGE){var I=(j=j).text,X=j.textPosition,W=X.x,oe=X.y;I.x=W,I.y=oe,j.setText(I)}else j=j;var re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(j.BaseType===Ut.EDGE){var de=_.edgeText,me=de.overflowMode,ke=de.lineHeight,Ee=de.wrapPadding,Ue=de.textWidth;Ue&&me==="autoWrap"&&(p=Ro(Ro({},re),{},{width:Ue,minWidth:Ue,lineHeight:ke,padding:Ee}))}else if(j.BaseType===Ut.NODE){var Me=_.nodeText,Be=Me.overflowMode,Re=Me.lineHeight,lt=Me.wrapPadding,Et=Me.textWidth,mt=j,jt=mt.width,Ft=mt.modelType;(Ft!==ht.TEXT_NODE&&Be==="autoWrap"||Ft===ht.TEXT_NODE&&Et)&&(p=Ro(Ro({},re),{},{width:Et||jt,minWidth:Et||jt,lineHeight:Re,padding:lt}))}var Wt=j.text,pn=Wt.x,ar=Wt.y,Ln=V_(O.CanvasPointToHtmlPoint([pn,ar]),2);return{style:Ro({left:Ln[0],top:Ln[1]},p)}}}}],(n=[{key:"componentDidUpdate",value:function(){var u=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var p=this.__prevText,d=p.text,O=p.id;u.updateText(O,d),u.eventCenter.emit(tt.TEXT_UPDATE,Ro({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(u){if(window.getSelection!==void 0&&document.createRange!==void 0){var p=document.createRange();p.selectNodeContents(u),p.collapse(!1);var d=window.getSelection();d.removeAllRanges(),d.addRange(p)}}},{key:"render",value:function(){var u,p=this.props.graphModel.textEditElement,d=this.state.style;return p?Object(te.g)("div",{contentEditable:!0,className:"lf-text-input",style:d,ref:this.ref,key:p.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(u=p.text)===null||u===void 0?void 0:u.value):null}}])&&og(t.prototype,n),r&&og(t,r),o}(te.a),io(eg,"toolName","textEdit"),Qy=tg))||Qy,Z_=function(e){return e.modelType===ht.LINE_EDGE?function(t){var n=t.startPoint,r=t.endPoint,a=(n.x+r.x)/2,o=(n.y+r.y)/2,u=Math.abs(n.x-r.x)+10,p=Math.abs(n.y-r.y)+10;return{x:a-u/2,y:o-p/2,x1:a+u/2,y1:o+p/2}}(e):e.modelType===ht.POLYLINE_EDGE?function(t){var n=t.points,r=no(n),a=ci(r,8),o=a.x,u=a.y,p=a.width,d=a.height;return{x:o-p/2,y:u-d/2,x1:o+p/2,y1:u+d/2}}(e):e.modelType===ht.BEZIER_EDGE?function(t){var n=t.path,r=xa(n),a=ci(r,8),o=a.x,u=a.y,p=a.width,d=a.height;return{x:o-p/2,y:u-d/2,x1:o+p/2,y1:u+d/2}}(e):void 0};function tf(e){return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function sg(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,u,p=[],d=!0,O=!1;try{for(a=a.call(n);!(d=(o=a.next()).done)&&(p.push(o.value),!r||p.length!==r);d=!0);}catch(_){O=!0,u=_}finally{try{d||a.return==null||a.return()}finally{if(O)throw u}}return p}}(e,t)||cg(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q_(e){return function(t){if(Array.isArray(t))return nf(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||cg(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cg(e,t){if(e){if(typeof e=="string")return nf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nf(e,t):void 0}}function nf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rf(e,t){return rf=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},rf(e,t)}function $_(e){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=gu(e);if(t){var a=gu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q_(this,n)}}function Q_(e,t){if(t&&(tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}function wi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gu(e){return gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gu(e)}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var of=Gn((ug=ag=function(e){(function(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&rf(o,u)})(a,e);var t,n,r=$_(a);function a(o){var u;(function(_,j){if(!(_ instanceof j))throw new TypeError("Cannot call a class as a function")})(this,a),xi(wi(u=r.call(this)),"stepDrag",void 0),xi(wi(u),"handleMouseDown",function(_){u.stepDrag.handleMouseDown(_)}),xi(wi(u),"onDragging",function(_){var j=_.deltaX,k=_.deltaY,I=u.props.graphModel,X=I.getSelectElements(!0);I.moveNodes(X.nodes.map(function(W){return W.id}),j,k)}),xi(wi(u),"handleContextMenu",function(_){_.preventDefault();var j=u.props,k=j.graphModel,I=j.graphModel,X=I.eventCenter,W=I.selectElements,oe=k.getPointByClient({x:_.clientX,y:_.clientY}),re={nodes:[],edges:[]};q_(W.values()).forEach(function(de){de.BaseType===Ut.NODE&&re.nodes.push(de.getData()),de.BaseType===Ut.EDGE&&re.edges.push(de.getData())}),X.emit(tt.SELECTION_CONTEXTMENU,{data:re,e:_,position:oe})});var p=o.graphModel,d=p.gridSize,O=p.eventCenter;return u.stepDrag=new yr({onDragging:u.onDragging,step:d,eventType:"SELECTION",eventCenter:O}),u}return t=a,(n=[{key:"render",value:function(){var o=this.props.graphModel,u=o.selectElements,p=o.transformModel;if(!(u.size<=1)){var d=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER;u.forEach(function(W){var oe={x:0,y:0,x1:0,y1:0};W.BaseType===Ut.NODE&&(oe=function(re){var de=re.x,me=re.y,ke=re.width,Ee=re.height;return{x:de-ke/2,y:me-Ee/2,x1:de+ke/2,y1:me+Ee/2}}(W)),W.BaseType===Ut.EDGE&&(oe=Z_(W)),d=Math.min(d,oe.x),O=Math.min(O,oe.y),_=Math.max(_,oe.x1),j=Math.max(j,oe.y1)});var k=sg(p.CanvasPointToHtmlPoint([d,O]),2);d=k[0],O=k[1];var I=sg(p.CanvasPointToHtmlPoint([_,j]),2);_=I[0],j=I[1];var X={left:"".concat(d-10,"px"),top:"".concat(O-10,"px"),width:"".concat(_-d+20,"px"),height:"".concat(j-O+20,"px")};return Object(te.g)("div",{className:"lf-multiple-select",style:X,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&J_(t.prototype,n),a}(te.a),xi(ag,"toolName","multipleSelect"),ig=ug))||ig;function e1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t1=function(){function e(r){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),vu(this,"tools",void 0),vu(this,"components",void 0),vu(this,"toolMap",new Map),vu(this,"instance",void 0),this.instance=r,this.isDisabledTool(ef.toolName)||this.registerTool(ef.toolName,ef),this.isDisabledTool(of.toolName)||this.registerTool(of.toolName,of);var a=r.graphModel;a.eventCenter.on("".concat(tt.GRAPH_TRANSFORM,",").concat(tt.NODE_CLICK,",").concat(tt.BLANK_CLICK," "),function(){var o=a.textEditElement,u=a.editConfigModel,p=u.edgeTextEdit,d=u.nodeTextEdit;(p||d)&&o&&a.textEditElement.setElementState(_t.DEFAULT)})}var t,n;return t=e,(n=[{key:"isDisabledTool",value:function(r){return this.instance.options.disabledTools.indexOf(r)!==-1}},{key:"registerTool",value:function(r,a){this.toolMap.set(r,a)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&e1(t.prototype,n),e}(),n1=i(168),r1=i.n(n1);function o1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function af(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lg=function(){function e(r){(function(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),af(this,"mousetrap",void 0),af(this,"options",void 0),af(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var a=r.lf;this.target=a.container,this.mousetrap=new r1.a(this.target),r.keyboard.enabled&&this.enable(!0)}var t,n;return t=e,(n=[{key:"initShortcuts",value:function(){var r=this,a=this.options.keyboard.shortcuts;if(a)if(Jt(a))a.forEach(function(d){var O=d.keys,_=d.callback,j=d.action;return r.on(O,_,j)});else{var o=a.keys,u=a.callback,p=a.action;this.on(o,u,p)}}},{key:"on",value:function(r,a,o){this.mousetrap.bind(this.getKeys(r),a,o)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(r,a){this.mousetrap.unbind(this.getKeys(r),a)}},{key:"enable",value:function(r){(this.disabled||r)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(r){var a=this;return(Array.isArray(r)?r:[r]).map(function(o){return a.formatKey(o)})}},{key:"formatKey",value:function(r){return r.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&o1(t.prototype,n),e}(),i1=lg,Er=null;function fg(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function pg(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}function uf(e){return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dg(Object(n),!0).forEach(function(r){Bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sf=function(){function e(a){var o,u,p=this;(function(d,O){if(!(d instanceof O))throw new TypeError("Cannot call a class as a function")})(this,e),Bt(this,"container",void 0),Bt(this,"width",void 0),Bt(this,"height",void 0),Bt(this,"graphModel",void 0),Bt(this,"history",void 0),Bt(this,"viewMap",new Map),Bt(this,"tool",void 0),Bt(this,"keyboard",void 0),Bt(this,"dnd",void 0),Bt(this,"options",void 0),Bt(this,"snaplineModel",void 0),Bt(this,"components",[]),Bt(this,"plugins",void 0),Bt(this,"extension",{}),Bt(this,"adapterIn",void 0),Bt(this,"adapterOut",void 0),Bt(this,"getView",function(d){return p.viewMap.get(d)}),a=hh(a),this.options=a,this.container=this.initContainer(a.container),this.plugins=a.plugins,this.graphModel=new pm(Ei({},a)),this.tool=new t1(this),this.history=new Y_(this.graphModel.eventCenter),this.dnd=new s0({lf:this}),this.keyboard=new i1({lf:this,keyboard:a.keyboard}),a.snapline!==!1&&(this.snaplineModel=new Ey(this.graphModel),o=this.graphModel.eventCenter,u=this.snaplineModel,o.on("node:mousemove",function(d){var O=d.data;u.setNodeSnapLine(O)}),o.on("node:mouseup",function(){u.clearSnapline()})),function(d,O){var _=d.keyboard,j=_.options.keyboard;_.on(["cmd + c","ctrl + c"],function(){if(!j.enabled||O.textEditElement)return!0;var k=d.options.guards,I=O.getSelectElements(!1);return k&&k.beforeClone&&!k.beforeClone(I)||I.nodes.length===0&&I.edges.length===0?(Er=null,!0):((Er=I).nodes.forEach(function(X){return fg(X,40)}),Er.edges.forEach(function(X){return pg(X,40)}),!1)}),_.on(["cmd + v","ctrl + v"],function(){if(!j.enabled||O.textEditElement)return!0;if(Er&&(Er.nodes||Er.edges)){d.clearSelectElements();var k=d.addElements(Er);if(!k)return!0;k.nodes.forEach(function(I){return d.selectElementById(I.id,!0)}),k.edges.forEach(function(I){return d.selectElementById(I.id,!0)}),Er.nodes.forEach(function(I){return fg(I,40)}),Er.edges.forEach(function(I){return pg(I,40)})}return!1}),_.on(["cmd + z","ctrl + z"],function(){return!j.enabled||!!O.textEditElement||(d.undo(),!1)}),_.on(["cmd + y","ctrl + y"],function(){return!j.enabled||!!O.textEditElement||(d.redo(),!1)}),_.on(["backspace"],function(){if(!j.enabled||O.textEditElement)return!0;var k=O.getSelectElements(!0);return d.clearSelectElements(),k.edges.forEach(function(I){return d.deleteEdge(I.id)}),k.nodes.forEach(function(I){return d.deleteNode(I.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(a.disabledPlugins)}var t,n,r;return t=e,n=[{key:"register",value:function(a,o){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof a=="string"){var p={BaseEdge:Oi,BaseEdgeModel:_s,BaseNode:Or,BaseNodeModel:mr,RectNode:el,RectNodeModel:Cc,CircleNode:ol,CircleNodeModel:yc,PolygonNode:cl,PolygonNodeModel:Mc,TextNode:_l,TextNodeModel:zc,LineEdge:Bl,LineEdgeModel:js,DiamondNode:dl,DiamondNodeModel:Oc,PolylineEdge:Xl,PolylineEdgeModel:Ms,BezierEdge:Kl,BezierEdgeModel:cc,EllipseNode:bl,EllipseNodeModel:Ec,HtmlNode:Sl,HtmlNodeModel:Hc,h:te.g,type:a};this.viewMap.forEach(function(k){var I=k.extendKey;I&&(p[I]=k)}),this.graphModel.modelMap.forEach(function(k){var I=k.extendKey;I&&(p[I]=k)});var d=o(p),O=d.view,_=d.model,j=O;u&&!j.isObervered&&(j.isObervered=!0,j=He(j)),this.setView(a,j),this.graphModel.setModel(a,_)}else this.registerElement(a)}},{key:"registerElement",value:function(a){var o=a.view;a.isObserverView===!1||o.isObervered||(o.isObervered=!0,o=He(o)),this.setView(a.type,o),this.graphModel.setModel(a.type,a.model)}},{key:"batchRegister",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];o.forEach(function(u){a.registerElement(u)})}},{key:"defaultRegister",value:function(){this.registerElement({view:el,model:Cc,type:"rect"}),this.registerElement({type:"circle",view:ol,model:yc}),this.registerElement({type:"polygon",view:cl,model:Mc}),this.registerElement({type:"line",view:Bl,model:js}),this.registerElement({type:"polyline",view:Xl,model:Ms}),this.registerElement({type:"bezier",view:Kl,model:cc}),this.registerElement({type:"text",view:_l,model:zc}),this.registerElement({type:"ellipse",view:bl,model:Ec}),this.registerElement({type:"diamond",view:dl,model:Oc}),this.registerElement({type:"html",view:Sl,model:Hc})}},{key:"selectElementById",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(a,o),!o&&u&&this.graphModel.toFront(a)}},{key:"focusOn",value:function(a){var o=this.graphModel.transformModel,u=a.coordinate,p=a.id;if(!u){var d=this.getNodeModelById(p);d&&(u=d.getData());var O=this.getEdgeModelById(p);O&&(u=O.textPosition)}var _=u,j=_.x,k=_.y;o.focusOn(j,k,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(a){this.graphModel.setTheme(a)}},{key:"resize",value:function(a,o){this.graphModel.resize(a,o),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(a){this.graphModel.setDefaultEdgeType(a)}},{key:"updateText",value:function(a,o){this.graphModel.updateText(a,o)}},{key:"deleteElement",value:function(a){var o,u,p,d=this.getModelById(a);return!!d&&(u=(p=(Bt(o={},Ut.NODE,this.deleteNode),Bt(o,Ut.EDGE,this.deleteEdge),o)[d.BaseType])===null||p===void 0?void 0:p.call(this,a))!==null&&u!==void 0&&u}},{key:"getModelById",value:function(a){return this.graphModel.getElement(a)}},{key:"getDataById",value:function(a){var o;return(o=this.graphModel.getElement(a))===null||o===void 0?void 0:o.getData()}},{key:"changeNodeType",value:function(a,o){this.graphModel.changeNodeType(a,o)}},{key:"changeEdgeType",value:function(a,o){this.graphModel.changeEdgeType(a,o)}},{key:"getNodeEdges",value:function(a){return this.graphModel.getNodeEdges(a)}},{key:"addNode",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,u=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(a,o,u)}},{key:"deleteNode",value:function(a){var o=this.graphModel.getNodeModelById(a);if(!o)return!1;var u=o.getData(),p=this.options.guards,d=!p||!p.beforeDelete||p.beforeDelete(u);return d&&this.graphModel.deleteNode(a),d}},{key:"cloneNode",value:function(a){var o=this.graphModel.getNodeModelById(a).getData(),u=this.options.guards;if(!u||!u.beforeClone||u.beforeClone(o))return this.graphModel.cloneNode(a)}},{key:"changeNodeId",value:function(a,o){return this.graphModel.changeNodeId(a,o)}},{key:"getNodeModelById",value:function(a){return this.graphModel.getNodeModelById(a)}},{key:"getNodeDataById",value:function(a){var o;return(o=this.graphModel.getNodeModelById(a))===null||o===void 0?void 0:o.getData()}},{key:"addEdge",value:function(a){return this.graphModel.addEdge(a)}},{key:"deleteEdge",value:function(a){var o=this.options.guards,u=this.graphModel.edgesMap[a];if(!u)return!1;var p=u.model.getData(),d=!o||!o.beforeDelete||o.beforeDelete(p);return d&&this.graphModel.deleteEdgeById(a),d}},{key:"deleteEdgeByNodeId",value:function(a){var o=a.sourceNodeId,u=a.targetNodeId;o&&u?this.graphModel.deleteEdgeBySourceAndTarget(o,u):o?this.graphModel.deleteEdgeBySource(o):u&&this.graphModel.deleteEdgeByTarget(u)}},{key:"changeEdgeId",value:function(a,o){return this.graphModel.changeEdgeId(a,o)}},{key:"getEdgeModelById",value:function(a){var o;return(o=this.graphModel.edgesMap[a])===null||o===void 0?void 0:o.model}},{key:"getEdgeModels",value:function(a){var o=this.graphModel.edges,u=a.sourceNodeId,p=a.targetNodeId;if(u&&p){var d=[];return o.forEach(function(j){j.sourceNodeId===u&&j.targetNodeId===p&&d.push(j)}),d}if(u){var O=[];return o.forEach(function(j){j.sourceNodeId===u&&O.push(j)}),O}if(p){var _=[];return o.forEach(function(j){j.targetNodeId===p&&_.push(j)}),_}return[]}},{key:"getEdgeDataById",value:function(a){var o;return(o=this.getEdgeModelById(a))===null||o===void 0?void 0:o.getData()}},{key:"getNodeIncomingEdge",value:function(a){return this.graphModel.getNodeIncomingEdge(a)}},{key:"getNodeOutgoingEdge",value:function(a){return this.graphModel.getNodeOutgoingEdge(a)}},{key:"getNodeIncomingNode",value:function(a){return this.graphModel.getNodeIncomingNode(a)}},{key:"getNodeOutgoingNode",value:function(a){return this.graphModel.getNodeOutgoingNode(a)}},{key:"editText",value:function(a){this.graphModel.editText(a)}},{key:"setProperties",value:function(a,o){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.setProperties(tn(o))}},{key:"deleteProperty",value:function(a,o){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.deleteProperty(o)}},{key:"getProperties",value:function(a){var o;return(o=this.graphModel.getElement(a))===null||o===void 0?void 0:o.getProperties()}},{key:"toFront",value:function(a){this.graphModel.toFront(a)}},{key:"setElementZIndex",value:function(a,o){return this.graphModel.setElementZIndex(a,o)}},{key:"addElements",value:function(a){for(var o=this,u=a.nodes,p=a.edges,d={},O={nodes:[],edges:[]},_=0;_<u.length;_++){var j=u[_],k=j.id,I=this.addNode(j);if(!I)return;k&&(d[k]=I.id),O.nodes.push(I)}return p.forEach(function(X){var W=X.sourceNodeId,oe=X.targetNodeId;d[W]&&(W=d[W]),d[oe]&&(oe=d[oe]);var re=o.graphModel.addEdge(Ei(Ei({},X),{},{sourceNodeId:W,targetNodeId:oe}));O.edges.push(re)}),O}},{key:"getAreaElement",value:function(a,o){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],d=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(a,o,u,p,d).map(function(O){return O.getData()})}},{key:"getSelectElements",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(a)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var a=this.graphModel.modelToGraphData();if(this.adapterOut){for(var o=arguments.length,u=new Array(o),p=0;p<o;p++)u[p]=arguments[p];return this.adapterOut.apply(this,[a].concat(u))}return a}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(a){this.graphModel.editConfigModel.updateEditConfig(a)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(a,o){return this.graphModel.getPointByClient({x:a,y:o})}},{key:"undo",value:function(){if(this.history.undoAble()){var a=tn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"redo",value:function(){if(this.history.redoAble()){var a=tn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"zoom",value:function(a,o){return this.graphModel.transformModel.zoom(a,o)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(a){this.graphModel.transformModel.setZoomMiniSize(a)}},{key:"setZoomMaxSize",value:function(a){this.graphModel.transformModel.setZoomMaxSize(a)}},{key:"getTransform",value:function(){var a=this.graphModel.transformModel;return{SCALE_X:a.SCALE_X,SCALE_Y:a.SCALE_Y,TRANSLATE_X:a.TRANSLATE_X,TRANSLATE_Y:a.TRANSLATE_Y}}},{key:"translate",value:function(a,o){this.graphModel.transformModel.translate(a,o)}},{key:"resetTranslate",value:function(){var a=this.graphModel.transformModel,o=a.TRANSLATE_X,u=a.TRANSLATE_Y;this.translate(-o,-u)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(a,o){o===void 0&&(o=a),this.graphModel.fitView(a,o)}},{key:"openEdgeAnimation",value:function(a){this.graphModel.openEdgeAnimation(a)}},{key:"closeEdgeAnimation",value:function(a){this.graphModel.closeEdgeAnimation(a)}},{key:"on",value:function(a,o){this.graphModel.eventCenter.on(a,o)}},{key:"off",value:function(a,o){this.graphModel.eventCenter.off(a,o)}},{key:"once",value:function(a,o){this.graphModel.eventCenter.once(a,o)}},{key:"emit",value:function(a,o){this.graphModel.eventCenter.emit(a,o)}},{key:"initContainer",value:function(a){var o=document.createElement("div");return o.style.position="relative",o.style.width="100%",o.style.height="100%",a.innerHTML="",a.appendChild(o),o}},{key:"installPlugins",value:function(){var a,o=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=(a=this.plugins)!==null&&a!==void 0?a:e.extensions;p.forEach(function(d){var O=d.pluginName||d.name;u.indexOf(O)===-1&&o.installPlugin(d)})}},{key:"installPlugin",value:function(a){if(uf(a)==="object"){var o=a.install,u=a.render;return o&&o.call(a,this,e),u&&this.components.push(u.bind(a)),void(this.extension[a.pluginName]=a)}var p=a,d=new p({lf:this,LogicFlow:e,options:this.options.pluginsOptions});d.render&&this.components.push(d.render.bind(d)),this.extension[p.pluginName]=d}},{key:"updateAttributes",value:function(a,o){this.graphModel.updateAttributes(a,o)}},{key:"createFakerNode",value:function(a){var o=this.graphModel.modelMap.get(a.type);if(o){var u=new o(Ei(Ei({},a),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(u),u}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(a){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(a)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(a,o){this.viewMap.set(a,o)}},{key:"renderRawData",value:function(a){this.graphModel.graphDataToModel(tn(a)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(te.j)(Object(te.g)(a0,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tt.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(a=this.adapterIn(a)),this.renderRawData(a)}}],r=[{key:"use",value:function(a){var o=a.pluginName;o||(o=a.name);var u=this.extensions.get(o);u&&u.destroy&&u.destroy(),this.extensions.set(o,a)}}],n&&hg(t.prototype,n),r&&hg(t,r),e}();function Gn(e){return He(e)}Bt(sf,"extensions",new Map),f.default=sf}])})})(pf,pf.exports);var Je=pf.exports;const zo=M1(Je);function H1(g,h){return h={exports:{}},g(h,h.exports),h.exports}var U1=H1(function(g){var h=g.exports=function(s,f){if(f||(f=16),s===void 0&&(s=128),s<=0)return"0";for(var i=Math.log(Math.pow(2,s))/Math.log(f),l=2;i===1/0;l*=2)i=Math.log(Math.pow(2,s/l))/Math.log(f)*l;for(var c=i-Math.floor(i),v="",l=0;l<Math.floor(i);l++){var m=Math.floor(Math.random()*f).toString(f);v=m+v}if(c){var w=Math.pow(f,c),m=Math.floor(Math.random()*w).toString(f);v=m+v}var S=parseInt(v,f);return S!==1/0&&S>=Math.pow(2,s)?h(s,f):v};h.rack=function(s,f,i){var l=function(v){var m=0;do{if(m++>10)if(i)s+=i;else throw new Error("too many ID collisions, use more bits");var w=h(s,f)}while(Object.hasOwnProperty.call(c,w));return c[w]=v,w},c=l.hats={};return l.get=function(v){return l.hats[v]},l.set=function(v,m){return l.hats[v]=m,l},l.bits=s||128,l.base=f||16,l}});function ur(g){if(!(this instanceof ur))return new ur(g);g=g||[128,36,1],this._seed=g.length?U1.rack(g[0],g[1],g[2]):g}ur.prototype.next=function(g){return this._seed(g||!0)};ur.prototype.nextPrefixed=function(g,h){var s;do s=g+this.next(!0);while(this.assigned(s));return this.claim(s,h),s};ur.prototype.claim=function(g,h){this._seed.set(g,h||!0)};ur.prototype.assigned=function(g){return this._seed.get(g)||!1};ur.prototype.unclaim=function(g){delete this._seed.hats[g]};ur.prototype.clear=function(){var g=this._seed.hats,h;for(h in g)this.unclaim(h)};var G1=new ur([32,32,1]);function Go(){return G1.next()}var qg=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),X1=function(g){qg(h,g);function h(s,f){var i=this;return s.id||(s.id="Event_"+Go()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=g.call(this,s,f)||this,i}return h.prototype.setAttributes=function(){this.r=18},h.prototype.getConnectedTargetRules=function(){var s=g.prototype.getConnectedTargetRules.call(this),f={message:"起始节点不能作为边的终点",validate:function(){return!1}};return s.push(f),s},h.extendKey="StartEventModel",h}(Je.CircleNodeModel),Y1=function(g){qg(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.extendKey="StartEventNode",h}(Je.CircleNode),V1={type:"bpmn:startEvent",view:Y1,model:X1},Jg=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Mu=globalThis&&globalThis.__assign||function(){return Mu=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Mu.apply(this,arguments)},W1=function(g){Jg(h,g);function h(s,f){var i=this;return s.id||(s.id="Event_"+Go()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=g.call(this,s,f)||this,i}return h.prototype.setAttributes=function(){this.r=18},h.prototype.getConnectedSourceRules=function(){var s=g.prototype.getConnectedSourceRules.call(this),f={message:"结束节点不能作为边的起点",validate:function(){return!1}};return s.push(f),s},h.extendKey="EndEventModel",h}(Je.CircleNodeModel),K1=function(g){Jg(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},h.prototype.getShape=function(){var s=this.props.model,f=s.getNodeStyle(),i=s.x,l=s.y,c=s.r,v=g.prototype.getShape.call(this);return Je.h("g",{},v,Je.h("circle",Mu(Mu({},f),{cx:i,cy:l,r:c-5})))},h.extendKey="EndEventView",h}(Je.CircleNode),Z1={type:"bpmn:endEvent",view:K1,model:W1},$g=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),ki=globalThis&&globalThis.__assign||function(){return ki=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},ki.apply(this,arguments)},q1=function(g){$g(h,g);function h(s,f){var i=this;return s.id||(s.id="Gateway_"+Go()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),i=g.call(this,s,f)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return h.extendKey="ExclusiveGatewayModel",h}(Je.PolygonNodeModel),J1=function(g){$g(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.points,m=s.getNodeStyle();return Je.h("g",{transform:"matrix(1 0 0 1 "+(f-l/2)+" "+(i-c/2)+")"},Je.h("polygon",ki(ki({},m),{x:f,y:i,points:v})),Je.h("path",ki({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},m)))},h.extendKey="ExclusiveGatewayNode",h}(Je.PolygonNode),$1={type:"bpmn:exclusiveGateway",view:J1,model:q1},Qg=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Tu=globalThis&&globalThis.__assign||function(){return Tu=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Tu.apply(this,arguments)},Q1=function(g){Qg(h,g);function h(s,f){var i=this;return s.id||(s.id="Activity_"+Go()),i=g.call(this,s,f)||this,i}return h.extendKey="UserTaskModel",h}(Je.RectNodeModel),ew=function(g){Qg(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.getNodeStyle();return Je.h("svg",{x:f-l/2+5,y:i-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Je.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.radius,m=s.getNodeStyle();return Je.h("g",{},[Je.h("rect",Tu(Tu({},m),{x:f-l/2,y:i-c/2,rx:v,ry:v,width:l,height:c})),this.getLabelShape()])},h.extendKey="UserTaskNode",h}(Je.RectNode),tw={type:"bpmn:userTask",view:ew,model:Q1},ev=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),df=globalThis&&globalThis.__assign||function(){return df=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},df.apply(this,arguments)},nw=function(g){ev(h,g);function h(s,f){var i=this;return s.id||(s.id="Activity_"+Go()),i=g.call(this,s,f)||this,i}return h.extendKey="ServiceTaskModel",h}(Je.RectNodeModel),rw=function(g){ev(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.getNodeStyle();return Je.h("svg",{x:f-l/2+5,y:i-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Je.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},h.prototype.getShape=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.radius,m=s.getNodeStyle();return Je.h("g",{},[Je.h("rect",df({x:f-l/2,y:i-c/2,rx:v,ry:v,width:l,height:c},m)),this.getLabelShape()])},h.extendKey="ServiceTaskNode",h}(Je.RectNode),ow={type:"bpmn:serviceTask",view:rw,model:nw},tv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),iw=function(g){tv(h,g);function h(s,f){var i=this;return s.id||(s.id="Flow_"+Go()),i=g.call(this,s,f)||this,i}return h.extendKey="SequenceFlowModel",h}(Je.PolylineEdgeModel),aw=function(g){tv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.extendKey="SequenceFlowEdge",h}(Je.PolylineEdge),uw={type:"bpmn:sequenceFlow",view:aw,model:iw},wg={width:40,height:40},xg={width:40,height:40},Eg={width:40,height:40},Sg={width:100,height:80},jg={width:100,height:80},sw={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},cw=function(){function g(h){var s=h.lf;s.setTheme(sw),s.register(V1),s.register(Z1),s.register($1),s.register(tw),s.register(ow),s.options.customBpmnEdge||(s.register(uw),s.setDefaultEdgeType("bpmn:sequenceFlow"))}return g.pluginName="bpmnElement",g}(),lw=function(){function g(h){var s=this,f=h.lf;this.lf=f,this.customCssRules="",this.useGlobalRules=!0,f.getSnapshot=function(i,l){s.getSnapshot(i,l)},f.getSnapshotBlob=function(i){return s.getSnapshotBlob(i)},f.getSnapshotBase64=function(i){return s.getSnapshotBase64(i)}}return g.prototype.getSvgRootElement=function(h){var s=h.container.querySelector(".lf-canvas-overlay");return s},g.prototype.triggerDownload=function(h){var s=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),f=document.createElement("a");f.setAttribute("download",this.fileName),f.setAttribute("href",h),f.setAttribute("target","_blank"),f.dispatchEvent(s)},g.prototype.removeAnchor=function(h){for(var s=h.childNodes,f=h.childNodes&&h.childNodes.length,i=0;i<f;i++){var l=s[i],c=l.classList&&Array.from(l.classList)||[];c.indexOf("lf-anchor")>-1&&(h.removeChild(h.childNodes[i]),f--,i--)}},g.prototype.getSnapshot=function(h,s){var f=this;this.fileName=h||"logic-flow."+Date.now()+".png";var i=this.getSvgRootElement(this.lf);this.getCanvasData(i,s).then(function(l){var c=l.toDataURL("image/png").replace("image/png","image/octet-stream");f.triggerDownload(c)})},g.prototype.getSnapshotBase64=function(h){var s=this,f=this.getSvgRootElement(this.lf);return new Promise(function(i){s.getCanvasData(f,h).then(function(l){var c=l.toDataURL("image/png");i({data:c,width:l.width,height:l.height})})})},g.prototype.getSnapshotBlob=function(h){var s=this,f=this.getSvgRootElement(this.lf);return new Promise(function(i){s.getCanvasData(f,h).then(function(l){l.toBlob(function(c){i({data:c,width:l.width,height:l.height})},"image/png")})})},g.prototype.getClassRules=function(){var h="";if(this.useGlobalRules)for(var s=document.styleSheets,f=0;f<s.length;f++)for(var i=s[f],l=0;l<i.cssRules.length;l++)h+=i.cssRules[l].cssText;return this.customCssRules&&(h+=this.customCssRules),h},g.prototype.getCanvasData=function(h,s){var f=this,i=h.cloneNode(!0),l=i.lastChild,c=l.childNodes&&l.childNodes.length;if(c)for(var v=0;v<c;v++){var m=l.childNodes[v],w=m.classList&&Array.from(m.classList);if(w&&w.indexOf("lf-base")<0)l.removeChild(l.childNodes[v]),c--,v--;else{var S=l.childNodes[v];S&&S.childNodes.forEach(function(le){var ce=le;f.removeAnchor(ce.firstChild)})}}var E=window.devicePixelRatio||1,A=document.createElement("canvas"),P=this.lf.graphModel.rootEl.querySelector(".lf-base"),T=P.getBoundingClientRect(),N=document.querySelector(".lf-canvas-overlay").getBoundingClientRect(),B=T.x-N.x,L=T.y-N.y,H=this.lf.graphModel,$=H.transformModel,ie=$.SCALE_X,K=$.SCALE_Y,V=$.TRANSLATE_X,Z=$.TRANSLATE_Y;i.lastChild.style.transform="matrix(1, 0, 0, 1, "+((-B+V)*(1/ie)+10)+", "+((-L+Z)*(1/K)+10)+")";var z=Math.ceil(T.width/ie),D=Math.ceil(T.height/K);A.style.width=z+"px",A.style.height=D+"px",A.width=z*E+80,A.height=D*E+80;var C=A.getContext("2d");C.clearRect(0,0,A.width,A.height),C.scale(E,E),s?(C.fillStyle=s,C.fillRect(0,0,z*E+80,D*E+80)):C.clearRect(0,0,z,D);var R=new Image,F=document.createElement("style");F.innerHTML=this.getClassRules();var Q=document.createElement("foreignObject");return Q.appendChild(F),i.appendChild(Q),new Promise(function(le){R.onload=function(){var xe=navigator.userAgent.indexOf("Firefox")>-1;try{xe?createImageBitmap(R,{resizeWidth:A.width,resizeHeight:A.height}).then(function(ge){C.drawImage(ge,0,0),le(A)}):(C.drawImage(R,0,0),le(A))}catch(ge){C.drawImage(R,0,0),le(A)}};var ce="data:image/svg+xml;charset=utf-8,"+new XMLSerializer().serializeToString(i),ye=ce.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");R.src=ye})},g.pluginName="snapshot",g}(),fw=new ur([32,32,1]);function Pg(){return fw.next()}function nv(g){return Object.prototype.toString.call(g)}function pw(g){return"  ".repeat(g)}function Du(g){var h=g;return nv(g)==="[object Object]"?(h={},Object.keys(g).forEach(function(s){var f=s;s.charAt(0)==="-"&&(f=s.substring(1)),h[f]=Du(g[s])})):Array.isArray(g)&&(h=[],g.forEach(function(s,f){h[f]=Du(s)})),h}function dw(g){var h=g;try{typeof h!="string"&&(h=JSON.parse(g))}catch(s){h=JSON.stringify(Du(g)).replace(/"/g,"'")}return h}var Bo=`	
`;function Su(g,h,s){var f=pw(s),i="";if(h==="#text")return Bo+f+g;if(h==="#cdata-section")return Bo+f+"<![CDATA["+g+"]]>";if(h==="#comment")return Bo+f+"<!--"+g+"-->";if((""+h).charAt(0)==="-")return" "+h.substring(1)+'="'+dw(g)+'"';if(Array.isArray(g))g.forEach(function(m){i+=Su(m,h,s+1)});else if(nv(g)==="[object Object]"){var l=Object.keys(g),c="",v="";i+=(s===0?"":Bo+f)+"<"+h,l.forEach(function(m){m.charAt(0)==="-"?c+=Su(g[m],m,s+1):v+=Su(g[m],m,s+1)}),i+=c+(v!==""?">"+v+(Bo+f)+"</"+h+">":" />")}else i+=Bo+f+("<"+h+">"+g.toString()+"</"+h+">");return i}function hw(g){var h="";for(var s in g)h+=Su(g[s],s,0);return h}var hn=function(){};hn.ObjTree=function(){return this};hn.ObjTree.VERSION="0.23";hn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;hn.ObjTree.prototype.attr_prefix="-";hn.ObjTree.prototype.parseXML=function(g){var h;if(window.DOMParser){var s=new DOMParser,f=s.parseFromString(g,"application/xml");if(!f)return;h=f.documentElement}else window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(g),h=s.documentElement);if(h)return this.parseDOM(h)};hn.ObjTree.prototype.parseHTTP=function(g,h,s){var f={};for(var i in h)f[i]=h[i];if(f.method||(typeof f.postBody=="undefined"&&typeof f.postbody=="undefined"&&typeof f.parameters=="undefined"?f.method="get":f.method="post"),s){f.asynchronous=!0;var l=this,c=s,v=f.onComplete;f.onComplete=function(S){var E;S&&S.responseXML&&S.responseXML.documentElement&&(E=l.parseDOM(S.responseXML.documentElement)),c(E,S),v&&v(S)}}else f.asynchronous=!1;var m;if(typeof HTTP!="undefined"&&HTTP.Request){f.uri=g;var w=new HTTP.Request(f);w&&(m=w.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var w=new Ajax.Request(g,f);w&&(m=w.transport)}if(s)return m;if(m&&m.responseXML&&m.responseXML.documentElement)return this.parseDOM(m.responseXML.documentElement)};hn.ObjTree.prototype.parseDOM=function(g){if(g){if(this.__force_array={},this.force_array)for(var h=0;h<this.force_array.length;h++)this.__force_array[this.force_array[h]]=1;var s=this.parseElement(g);if(this.__force_array[g.nodeName]&&(s=[s]),g.nodeType!=11){var f={};f[g.nodeName]=s,s=f}return s}};hn.ObjTree.prototype.parseElement=function(g){if(g.nodeType!=7){if(g.nodeType==3||g.nodeType==4||g.nodeType==8){var h=g.nodeValue.match(/[^\x00-\x20]/);return h==null?void 0:g.nodeValue}var s=null,f={};if(g.attributes&&g.attributes.length){s={};for(var i=0;i<g.attributes.length;i++){var l=g.attributes[i].nodeName;if(typeof l=="string"){var c=g.attributes[i].nodeValue;try{c=JSON.parse(g.attributes[i].nodeValue.replace(/'/g,'"'))}catch(w){c=g.attributes[i].nodeValue}c&&(l=this.attr_prefix+l,typeof f[l]=="undefined"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}if(g.childNodes&&g.childNodes.length){var v=!0;s&&(v=!1);for(var i=0;i<g.childNodes.length&&v;i++){var m=g.childNodes[i].nodeType;m==3||m==4||m==8||(v=!1)}if(v){s||(s="");for(var i=0;i<g.childNodes.length;i++)s+=g.childNodes[i].nodeValue}else{s||(s={});for(var i=0;i<g.childNodes.length;i++){var l=g.childNodes[i].nodeName;if(typeof l=="string"){var c=this.parseElement(g.childNodes[i]);c&&(typeof f[l]=="undefined"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}}else s===null&&(s={});return s}};hn.ObjTree.prototype.addNode=function(g,h,s,f){this.__force_array[h]?(s==1&&(g[h]=[]),g[h][g[h].length]=f):s==1?g[h]=f:s==2?g[h]=[g[h],f]:g[h][g[h].length]=f};hn.ObjTree.prototype.writeXML=function(g){var h=this.hash_to_xml(null,g);return this.xmlDecl+h};hn.ObjTree.prototype.hash_to_xml=function(g,h){var s=[],f=[];for(var i in h)if(h.hasOwnProperty(i)){var l=h[i];i.charAt(0)!=this.attr_prefix?typeof l=="undefined"||l==null?s[s.length]="<"+i+" />":typeof l=="object"&&l.constructor==Array?s[s.length]=this.array_to_xml(i,l):typeof l=="object"?s[s.length]=this.hash_to_xml(i,l):s[s.length]=this.scalar_to_xml(i,l):f[f.length]=" "+i.substring(1)+'="'+this.xml_escape(l)+'"'}var c=f.join(""),v=s.join("");return typeof g=="undefined"||g==null||(s.length>0?v.match(/\n/)?v="<"+g+c+`>
`+v+"</"+g+`>
`:v="<"+g+c+">"+v+"</"+g+`>
`:v="<"+g+c+` />
`),v};hn.ObjTree.prototype.array_to_xml=function(g,h){for(var s=[],f=0;f<h.length;f++){var i=h[f];typeof i=="undefined"||i==null?s[s.length]="<"+g+" />":typeof i=="object"&&i.constructor==Array?s[s.length]=this.array_to_xml(g,i):typeof i=="object"?s[s.length]=this.hash_to_xml(g,i):s[s.length]=this.scalar_to_xml(g,i)}return s.join("")};hn.ObjTree.prototype.scalar_to_xml=function(g,h){return g=="#text"?this.xml_escape(h):"<"+g+">"+this.xml_escape(h)+"</"+g+`>
`};hn.ObjTree.prototype.xml_escape=function(g){return g.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var yw=function(g){return new hn.ObjTree().parseXML(g)},gw=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),hf=globalThis&&globalThis.__assign||function(){return hf=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},hf.apply(this,arguments)},zu=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},sr;(function(g){g.START="bpmn:startEvent",g.END="bpmn:endEvent",g.GATEWAY="bpmn:exclusiveGateway",g.USER="bpmn:userTask",g.SYSTEM="bpmn:serviceTask",g.FLOW="bpmn:sequenceFlow"})(sr||(sr={}));var rv=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Ag=["properties","startPoint","endPoint","pointsList"];function kg(g){var h=g?Ag.concat(g):Ag;return function(s){function f(i){var l={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(c){return f(c)}):(Object.entries(i).forEach(function(c){var v=zu(c,2),m=v[0],w=v[1];typeof w!="object"?m.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(m)?l[m]=w:l["-"+m]=w:h.includes(m)?l["-"+m]=f(w):l[m]=f(w)}),l)}return f(s)}}function Nu(g){var h={};return Object.entries(g).forEach(function(s){var f=zu(s,2),i=f[0],l=f[1];i.indexOf("-")===0?h[i.substring(1)]=Du(l):typeof l=="string"?h[i]=l:Object.prototype.toString.call(l)==="[object Object]"?h[i]=Nu(l):Array.isArray(l)?h[i]=l.map(function(c){return Nu(c)}):h[i]=l}),h}function vw(g,h,s){var f=new Map;h.nodes.forEach(function(l){var c,v={"-id":l.id};if(!((c=l.text)===null||c===void 0)&&c.value&&(v["-name"]=l.text.value),l.properties){var m=kg(s)(l.properties);Object.assign(v,m)}f.set(l.id,v),g[l.type]?Array.isArray(g[l.type])?g[l.type].push(v):g[l.type]=[g[l.type],v]:g[l.type]=v});var i=h.edges.map(function(l){var c,v,m=f.get(l.targetNodeId);m["bpmn:incoming"]?Array.isArray(m["bpmn:incoming"])?m["bpmn:incoming"].push(l.id):m["bpmn:incoming"]=[m["bpmn:incoming"],l.id]:m["bpmn:incoming"]=l.id;var w={"-id":l.id,"-sourceRef":l.sourceNodeId,"-targetRef":l.targetNodeId};if(!((c=l.text)===null||c===void 0)&&c.value&&(w["-name"]=(v=l.text)===null||v===void 0?void 0:v.value),l.properties){var S=kg(s)(l.properties);Object.assign(w,S)}return w});h.edges.forEach(function(l){var c=f.get(l.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(l.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],l.id]:c["bpmn:outgoing"]=l.id}),g[sr.FLOW]=i}function bw(g,h){g["bpmndi:BPMNEdge"]=h.edges.map(function(s){var f,i=s.id,l=s.pointsList.map(function(v){var m=v.x,w=v.y;return{"-x":m,"-y":w}}),c={"-id":i+"_di","-bpmnElement":i,"di:waypoint":l};return!((f=s.text)===null||f===void 0)&&f.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),c}),g["bpmndi:BPMNShape"]=h.nodes.map(function(s){var f,i=s.id,l=100,c=80,v=s.x,m=s.y,w=Vr.shapeConfigMap.get(s.type);w&&(l=w.width,c=w.height),v-=l/2,m-=c/2;var S={"-id":i+"_di","-bpmnElement":i,"dc:Bounds":{"-x":v,"-y":m,"-width":l,"-height":c}};return!((f=s.text)===null||f===void 0)&&f.value&&(S["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),S})}function mw(g){var h=[],s=[],f=g["bpmn:definitions"];if(f){var i=f["bpmn:process"];Object.keys(i).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=i[l];if(l===sr.FLOW){var v=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];s=_w(c,v)}else{var m=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];h=h.concat(Ow(c,m,l))}}})}return{nodes:h,edges:s}}function Ow(g,h,s){var f=[];if(Array.isArray(g))g.forEach(function(c){var v;Array.isArray(h)?v=h.find(function(w){return w["-bpmnElement"]===c["-id"]}):v=h;var m=Mg(v,s,c);f.push(m)});else{var i=void 0;Array.isArray(h)?i=h.find(function(c){return c["-bpmnElement"]===g["-id"]}):i=h;var l=Mg(i,s,g);f.push(l)}return f}function Mg(g,h,s){var f=Number(g["dc:Bounds"]["-x"]),i=Number(g["dc:Bounds"]["-y"]),l=s["-name"],c=Vr.shapeConfigMap.get(h);c&&(f+=c.width/2,i+=c.height/2);var v;Object.entries(s).forEach(function(E){var A=zu(E,2),P=A[0],T=A[1];rv.indexOf(P)===-1&&(v||(v={}),v[P]=T)}),v&&(v=Nu(v));var m;if(l&&(m={x:f,y:i,value:l},g["bpmndi:BPMNLabel"]&&g["bpmndi:BPMNLabel"]["dc:Bounds"])){var w=g["bpmndi:BPMNLabel"]["dc:Bounds"];m.x=Number(w["-x"])+Number(w["-width"])/2,m.y=Number(w["-y"])+Number(w["-height"])/2}var S={id:g["-bpmnElement"],type:h,x:f,y:i,properties:v};return m&&(S.text=m),S}function _w(g,h){var s=[];if(Array.isArray(g))g.forEach(function(i){var l;Array.isArray(h)?l=h.find(function(c){return c["-bpmnElement"]===i["-id"]}):l=h,s.push(Tg(l,i))});else{var f=void 0;Array.isArray(h)?f=h.find(function(i){return i["-bpmnElement"]===g["-id"]}):f=h,s.push(Tg(f,g))}return s}function Tg(g,h){var s,f=h["-name"];if(f){var i=g["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;f.split(`
`).forEach(function(m){l<m.length&&(l=m.length)}),s={value:f,x:Number(i["-x"])+l*10/2,y:Number(i["-y"])+7}}var c;Object.entries(h).forEach(function(m){var w=zu(m,2),S=w[0],E=w[1];rv.indexOf(S)===-1&&(c||(c={}),c[S]=E)}),c&&(c=Nu(c));var v={id:h["-id"],type:sr.FLOW,pointsList:g["di:waypoint"].map(function(m){return{x:Number(m["-x"]),y:Number(m["-y"])}}),sourceNodeId:h["-sourceRef"],targetNodeId:h["-targetRef"],properties:c};return s&&(v.text=s),v}var Vr=function(){function g(h){var s=this,f=h.lf;this.adapterOut=function(i,l){var c=hf({},s.processAttributes);vw(c,i,l);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};bw(v,i);var m=s.definitionAttributes;m["bpmn:process"]=c,m["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var w={"bpmn:definitions":m};return w},this.adapterIn=function(i){if(i)return mw(i)},f.adapterIn=function(i){return s.adapterIn(i)},f.adapterOut=function(i,l){return s.adapterOut(i,l)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Pg()},this.definitionAttributes={"-id":"Definitions_"+Pg(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return g.prototype.setCustomShape=function(h,s){g.shapeConfigMap.set(h,s)},g.pluginName="bpmn-adapter",g.shapeConfigMap=new Map,g}();Vr.shapeConfigMap.set(sr.START,{width:wg.width,height:wg.height});Vr.shapeConfigMap.set(sr.END,{width:xg.width,height:xg.height});Vr.shapeConfigMap.set(sr.GATEWAY,{width:Eg.width,height:Eg.height});Vr.shapeConfigMap.set(sr.SYSTEM,{width:Sg.width,height:Sg.height});Vr.shapeConfigMap.set(sr.USER,{width:jg.width,height:jg.height});(function(g){gw(h,g);function h(s){var f=g.call(this,s)||this;f.adapterXmlIn=function(l){var c=yw(l);return f.adapterIn(c)},f.adapterXmlOut=function(l,c){var v=f.adapterOut(l,c);return hw(v)};var i=s.lf;return i.adapterIn=f.adapterXmlIn,i.adapterOut=f.adapterXmlOut,f}return h.pluginName="bpmnXmlAdapter",h})(Vr);var Dg=globalThis&&globalThis.__assign||function(){return Dg=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Dg.apply(this,arguments)};globalThis&&globalThis.__read;var Ng;(function(g){g.HORIZONTAL="horizontal",g.VERTICAL="vertical"})(Ng||(Ng={}));var ww=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var xw=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var Ew=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},Sw=globalThis&&globalThis.__spread||function(){for(var g=[],h=0;h<arguments.length;h++)g=g.concat(Ew(arguments[h]));return g},Si="lf:defaultNodeMenu",ji="lf:defaultEdgeMenu",Pi="lf:defaultGraphMenu",Cg="lf:defaultSelectionMenu",jw=function(){function g(h){var s=this,f=h.lf;this.__menuDOM=document.createElement("ul"),this.lf=f,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(i){s.setMenuConfig(i)},this.lf.addMenuConfig=function(i){s.addMenuConfig(i)},this.lf.setMenuByType=function(i){s.setMenuByType(i)}}return g.prototype.init=function(){var h=this,s=[{text:"删除",callback:function(l){h.lf.deleteNode(l.id)}},{text:"编辑文本",callback:function(l){h.lf.graphModel.editText(l.id)}},{text:"复制",callback:function(l){h.lf.cloneNode(l.id)}}];this.menuTypeMap.set(Si,s);var f=[{text:"删除",callback:function(l){h.lf.deleteEdge(l.id)}},{text:"编辑文本",callback:function(l){h.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(ji,f),this.menuTypeMap.set(Pi,[]);var i=[{text:"删除",callback:function(l){h.lf.clearSelectElements(),l.edges.forEach(function(c){return h.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return h.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(Cg,i)},g.prototype.render=function(h,s){var f=this;this.__container=s,this.__currentData=null,this.__menuDOM.className="lf-menu",s.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var l=i.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1&&(l.onclickCallback(f.__currentData),f.__menuDOM.style.display="none",f.__currentData=null)},!0),this.lf.on("node:contextmenu",function(i){var l=i.data,c=i.position,v=c.domOverlayPosition,m=v.x,w=v.y,S=l.id,E=f.lf.graphModel.getNodeModelById(S),A=[],P=f.menuTypeMap.get(E.type);E&&E.menu&&Array.isArray(E.menu)?A=E.menu:P?A=P:A=f.menuTypeMap.get(Si),f.__currentData=l,f.showMenu(m,w,A)}),this.lf.on("edge:contextmenu",function(i){var l=i.data,c=i.position,v=c.domOverlayPosition,m=v.x,w=v.y,S=l.id,E=f.lf.graphModel.getEdgeModelById(S),A=[],P=f.menuTypeMap.get(E.type);E&&E.menu&&Array.isArray(E.menu)?A=E.menu:P?A=P:A=f.menuTypeMap.get(ji),f.__currentData=l,f.showMenu(m,w,A)}),this.lf.on("blank:contextmenu",function(i){var l=i.position,c=f.menuTypeMap.get(Pi),v=l.domOverlayPosition,m=v.x,w=v.y;f.showMenu(m,w,c)}),this.lf.on("selection:contextmenu",function(i){var l=i.data,c=i.position,v=f.menuTypeMap.get(Cg),m=c.domOverlayPosition,w=m.x,S=m.y;f.__currentData=l,f.showMenu(w,S,v)}),this.lf.on("node:mousedown",function(){f.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){f.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){f.__menuDOM.style.display="none"})},g.prototype.destroy=function(){var h;(h=this===null||this===void 0?void 0:this.__container)===null||h===void 0||h.removeChild(this.__menuDOM),this.__menuDOM=null},g.prototype.showMenu=function(h,s,f){if(!(!f||!f.length)){var i=this.__menuDOM;i.innerHTML="",i.append.apply(i,Sw(this.__getMenuDom(f))),i.children.length&&(i.style.display="block",i.style.top=s+"px",i.style.left=h+"px")}},g.prototype.setMenuByType=function(h){!h.type||!h.menu||this.menuTypeMap.set(h.type,h.menu)},g.prototype.__getMenuDom=function(h){var s=[];return h&&h.length>0&&h.forEach(function(f){var i=document.createElement("li");if(f.className?i.className="lf-menu-item "+f.className:i.className="lf-menu-item",f.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",i.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",f.text&&(c.innerText=f.text),i.appendChild(c),i.onclickCallback=f.callback,s.push(i)}),s},g.prototype.setMenuConfig=function(h){h&&(h.nodeMenu!==void 0&&this.menuTypeMap.set(Si,h.nodeMenu?h.nodeMenu:[]),h.edgeMenu!==void 0&&this.menuTypeMap.set(ji,h.edgeMenu?h.edgeMenu:[]),h.graphMenu!==void 0&&this.menuTypeMap.set(Pi,h.graphMenu?h.graphMenu:[]))},g.prototype.addMenuConfig=function(h){if(h){if(Array.isArray(h.nodeMenu)){var s=this.menuTypeMap.get(Si);this.menuTypeMap.set(Si,s.concat(h.nodeMenu))}if(Array.isArray(h.edgeMenu)){var s=this.menuTypeMap.get(ji);this.menuTypeMap.set(ji,s.concat(h.edgeMenu))}if(Array.isArray(h.graphMenu)){var s=this.menuTypeMap.get(Pi);this.menuTypeMap.set(Pi,s.concat(h.graphMenu))}}},g.prototype.changeMenuItem=function(h,s){if(h==="add")this.addMenuConfig(s);else if(h==="reset")this.setMenuConfig(s);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},g.pluginName="menu",g}();globalThis&&globalThis.__read;var Pw=function(){function g(h){var s=this,f=h.lf;this.lf=f,this.lf.setPatternItems=function(i){s.setPatternItems(i)}}return g.prototype.render=function(h,s){var f=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=s;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){f.panelEl.appendChild(f.createDndItem(i))}),s.appendChild(this.panelEl),this.domContainer=s},g.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},g.prototype.setPatternItems=function(h){this.shapeList=h,this.domContainer&&this.render(this.lf,this.domContainer)},g.prototype.createDndItem=function(h){var s=this,f=document.createElement("div");f.className=h.className?"lf-dnd-item "+h.className:"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",h.icon&&(i.style.backgroundImage="url("+h.icon+")"),f.appendChild(i),h.label){var l=document.createElement("div");l.innerText=h.label,l.className="lf-dnd-text",f.appendChild(l)}return f.onmousedown=function(){h.type&&s.lf.dnd.startDrag({type:h.type,properties:h.properties,text:h.text}),h.callback&&h.callback(s.lf,s.domContainer)},f.ondblclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:h})},f.onclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:h})},f.oncontextmenu=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:h})},f},g.pluginName="dndPanel",g}(),Aw=function(){function g(h){var s=this,f=h.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=s.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,v=c.x,m=c.y;s.endPoint={x:v,y:m};var w=s.startPoint,S=w.x,E=w.y,A=s.wrapper.style,P=S,T=E,N=v-S,B=m-E;v<S&&(P=v,N=S-v),m<E&&(T=m,B=E-m),A.left=P+"px",A.top=T+"px",A.width=N+"px",A.height=B+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",s.__draw),document.removeEventListener("mouseup",s.__drawOff),s.wrapper.oncontextmenu=null,s.__domContainer.removeChild(s.wrapper);var l=s.startPoint,c=l.x,v=l.y,m=s.endPoint,w=m.x,S=m.y;if(!(Math.abs(w-c)<10&&Math.abs(S-v)<10)){var E=[Math.min(c,w),Math.min(v,S)],A=[Math.max(c,w),Math.max(v,S)],P=s.lf.graphModel.getAreaElement(E,A,s.isWholeEdge,s.isWholeNode,!0),T=s.lf.graphModel.group;P.forEach(function(N){(!T||!T.getNodeGroup(N.id))&&s.lf.selectElementById(N.id,!0)}),s.lf.emit("selection:selected",P)}},this.lf=f;var i=f.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=i,f.openSelectionSelect=function(){s.openSelectionSelect()},f.closeSelectionSelect=function(){s.closeSelectionSelect()}}return g.prototype.render=function(h,s){var f=this;this.__domContainer=s,h.on("blank:mousedown",function(i){var l=i.e,c=h.getEditConfig();if(!(!c.stopMoveGraph||f.__disabled)){var v=l.button===2;if(!v){var m=h.getPointByClient(l.clientX,l.clientY).domOverlayPosition,w=m.x,S=m.y;f.startPoint={x:w,y:S},f.endPoint={x:w,y:S};var E=document.createElement("div");E.className="lf-selection-select",E.oncontextmenu=function(P){P.preventDefault()},E.style.top=f.startPoint.y+"px",E.style.left=f.startPoint.x+"px",s.appendChild(E),f.wrapper=E,document.addEventListener("mousemove",f.__draw),document.addEventListener("mouseup",f.__drawOff)}}})},g.prototype.setSelectionSense=function(h,s){h===void 0&&(h=!0),s===void 0&&(s=!0),this.isWholeEdge=h,this.isWholeNode=s},g.prototype.openSelectionSelect=function(){var h=this.lf.getEditConfig().stopMoveGraph;h||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},g.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},g.prototype.open=function(){this.__disabled=!1},g.prototype.close=function(){this.__disabled=!0},g.pluginName="selectionSelect",g}();globalThis&&globalThis.__values;function kw(g){if(g.length<=1)return!1;for(var h=0,s=g.length-1;h!==s&&h+1!==s&&s-1!==h;)h++,s--;return h===s?[--h,s]:[h,s]}var ov=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Fo=globalThis&&globalThis.__assign||function(){return Fo=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Fo.apply(this,arguments)},Sr=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};(function(g){ov(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.pointFilter=function(s){for(var f=s,i=1;i<f.length-1;){var l=Sr(f[i-1],2),c=l[0],v=l[1],m=Sr(f[i],2),w=m[0],S=m[1],E=Sr(f[i+1],2),A=E[0],P=E[1];c===w&&w===A||v===S&&S===P?f.splice(i,1):i++}return f},h.prototype.getEdge=function(){var s=this.props.model,f=s.points,i=s.isAnimation,l=s.arrowConfig,c=s.radius,v=c===void 0?5:c,m=s.getEdgeStyle(),w=s.getEdgeAnimationStyle(),S=this.pointFilter(f.split(" ").map(function(Pe){return Pe.split(",").map(function(Ce){return Number(Ce)})})),E=kw(S);if(E){var A=Sr(E,2),P=A[0],T=A[1],N=S[P],B=S[T],L=N.some(function(Pe,Ce){return Pe===B[Ce]});if(!L){var H=(B[1]-N[1])/2,$=[B[0],B[1]-H],ie=[N[0],N[1]+H];S.splice(P+1,0,ie,$)}}for(var K=Sr(S[0],2),V=K[0],Z=K[1],z="M"+V+" "+Z,D=1;D<S.length-1;D++){var C=Sr(S[D-1],2),R=C[0],F=C[1],Q=Sr(S[D],2),le=Q[0],ce=Q[1],ye=Sr(S[D+1],2),xe=ye[0],ge=ye[1];if(le===R&&ce!==F){var ue=ce>F?ce-v:ce+v;z=z+" L "+le+" "+ue}if(ce===F&&le!==R){var he=le>R?le-v:le+v;z=z+" L "+he+" "+ce}if(z=z+" Q "+le+" "+ce,le===xe&&ce!==ge){var ue=ce>ge?ce-v:ce+v;z=z+" "+le+" "+ue}if(ce===ge&&le!==xe){var he=le>xe?le-v:le+v;z=z+" "+he+" "+ce}}var be=Sr(S[S.length-1],2),Se=be[0],Ie=be[1];z=z+" L "+Se+" "+Ie;var Ke=Fo(Fo(Fo({d:z,style:i?w:{}},m),l),{fill:"none"});return Je.h("path",Fo({d:z},Ke))},h})(Je.PolylineEdge);(function(g){ov(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h})(Je.PolylineEdgeModel);var _f,Yt,iv,uo,Rg,av,yf,ju={},uv=[],Mw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,wf=Array.isArray;function Xr(g,h){for(var s in h)g[s]=h[s];return g}function sv(g){var h=g.parentNode;h&&h.removeChild(g)}function Mi(g,h,s){var f,i,l,c={};for(l in h)l=="key"?f=h[l]:l=="ref"?i=h[l]:c[l]=h[l];if(arguments.length>2&&(c.children=arguments.length>3?_f.call(arguments,2):s),typeof g=="function"&&g.defaultProps!=null)for(l in g.defaultProps)c[l]===void 0&&(c[l]=g.defaultProps[l]);return Pu(g,c,f,i,null)}function Pu(g,h,s,f,i){var l={type:g,props:h,key:s,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++iv:i};return i==null&&Yt.vnode!=null&&Yt.vnode(l),l}function xf(g){return g.children}function Uo(g,h){this.props=g,this.context=h}function Ni(g,h){if(h==null)return g.__?Ni(g.__,g.__.__k.indexOf(g)+1):null;for(var s;h<g.__k.length;h++)if((s=g.__k[h])!=null&&s.__e!=null)return s.__e;return typeof g.type=="function"?Ni(g):null}function cv(g){var h,s;if((g=g.__)!=null&&g.__c!=null){for(g.__e=g.__c.base=null,h=0;h<g.__k.length;h++)if((s=g.__k[h])!=null&&s.__e!=null){g.__e=g.__c.base=s.__e;break}return cv(g)}}function Ig(g){(!g.__d&&(g.__d=!0)&&uo.push(g)&&!Cu.__r++||Rg!==Yt.debounceRendering)&&((Rg=Yt.debounceRendering)||av)(Cu)}function Cu(){var g,h,s,f,i,l,c,v,m;for(uo.sort(yf);g=uo.shift();)g.__d&&(h=uo.length,f=void 0,i=void 0,l=void 0,v=(c=(s=g).__v).__e,(m=s.__P)&&(f=[],i=[],(l=Xr({},c)).__v=c.__v+1,dv(m,c,l,s.__n,m.ownerSVGElement!==void 0,c.__h!=null?[v]:null,f,v==null?Ni(c):v,c.__h,i),Nw(f,c,i),c.__e!=v&&cv(c)),uo.length>h&&uo.sort(yf));Cu.__r=0}function lv(g,h,s,f,i,l,c,v,m,w,S){var E,A,P,T,N,B,L,H,$,ie=0,K=f&&f.__k||uv,V=K.length,Z=V,z=h.length;for(s.__k=[],E=0;E<z;E++)(T=s.__k[E]=(T=h[E])==null||typeof T=="boolean"||typeof T=="function"?null:typeof T=="string"||typeof T=="number"||typeof T=="bigint"?Pu(null,T,null,null,T):wf(T)?Pu(xf,{children:T},null,null,null):T.__b>0?Pu(T.type,T.props,T.key,T.ref?T.ref:null,T.__v):T)!=null?(T.__=s,T.__b=s.__b+1,(H=Tw(T,K,L=E+ie,Z))===-1?P=ju:(P=K[H]||ju,K[H]=void 0,Z--),dv(g,T,P,i,l,c,v,m,w,S),N=T.__e,(A=T.ref)&&P.ref!=A&&(P.ref&&Ef(P.ref,null,T),S.push(A,T.__c||N,T)),N!=null&&(B==null&&(B=N),($=P===ju||P.__v===null)?H==-1&&ie--:H!==L&&(H===L+1?ie++:H>L?Z>z-L?ie+=H-L:ie--:ie=H<L&&H==L-1?H-L:0),L=E+ie,typeof T.type!="function"||H===L&&P.__k!==T.__k?typeof T.type=="function"||H===L&&!$?T.__d!==void 0?(m=T.__d,T.__d=void 0):m=N.nextSibling:m=pv(g,N,m):m=fv(T,m,g),typeof s.type=="function"&&(s.__d=m))):(P=K[E])&&P.key==null&&P.__e&&(P.__e==m&&(m=Ni(P)),gf(P,P,!1),K[E]=null);for(s.__e=B,E=V;E--;)K[E]!=null&&(typeof s.type=="function"&&K[E].__e!=null&&K[E].__e==s.__d&&(s.__d=K[E].__e.nextSibling),gf(K[E],K[E]))}function fv(g,h,s){for(var f,i=g.__k,l=0;i&&l<i.length;l++)(f=i[l])&&(f.__=g,h=typeof f.type=="function"?fv(f,h,s):pv(s,f.__e,h));return h}function pv(g,h,s){return s==null||s.parentNode!==g?g.insertBefore(h,null):h==s&&h.parentNode!=null||g.insertBefore(h,s),h.nextSibling}function Tw(g,h,s,f){var i=g.key,l=g.type,c=s-1,v=s+1,m=h[s];if(m===null||m&&i==m.key&&l===m.type)return s;if(f>(m!=null?1:0))for(;c>=0||v<h.length;){if(c>=0){if((m=h[c])&&i==m.key&&l===m.type)return c;c--}if(v<h.length){if((m=h[v])&&i==m.key&&l===m.type)return v;v++}}return-1}function Dw(g,h,s,f,i){var l;for(l in s)l==="children"||l==="key"||l in h||Ru(g,l,null,s[l],f);for(l in h)i&&typeof h[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||s[l]===h[l]||Ru(g,l,h[l],s[l],f)}function Lg(g,h,s){h[0]==="-"?g.setProperty(h,s==null?"":s):g[h]=s==null?"":typeof s!="number"||Mw.test(h)?s:s+"px"}function Ru(g,h,s,f,i){var l;e:if(h==="style")if(typeof s=="string")g.style.cssText=s;else{if(typeof f=="string"&&(g.style.cssText=f=""),f)for(h in f)s&&h in s||Lg(g.style,h,"");if(s)for(h in s)f&&s[h]===f[h]||Lg(g.style,h,s[h])}else if(h[0]==="o"&&h[1]==="n")l=h!==(h=h.replace(/(PointerCapture)$|Capture$/,"$1")),h=h.toLowerCase()in g?h.toLowerCase().slice(2):h.slice(2),g.l||(g.l={}),g.l[h+l]=s,s?f||g.addEventListener(h,l?Bg:zg,l):g.removeEventListener(h,l?Bg:zg,l);else if(h!=="dangerouslySetInnerHTML"){if(i)h=h.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(h!=="width"&&h!=="height"&&h!=="href"&&h!=="list"&&h!=="form"&&h!=="tabIndex"&&h!=="download"&&h!=="rowSpan"&&h!=="colSpan"&&h in g)try{g[h]=s==null?"":s;break e}catch(c){}typeof s=="function"||(s==null||s===!1&&h[4]!=="-"?g.removeAttribute(h):g.setAttribute(h,s))}}function zg(g){return this.l[g.type+!1](Yt.event?Yt.event(g):g)}function Bg(g){return this.l[g.type+!0](Yt.event?Yt.event(g):g)}function dv(g,h,s,f,i,l,c,v,m,w){var S,E,A,P,T,N,B,L,H,$,ie,K,V,Z,z,D=h.type;if(h.constructor!==void 0)return null;s.__h!=null&&(m=s.__h,v=h.__e=s.__e,h.__h=null,l=[v]),(S=Yt.__b)&&S(h);e:if(typeof D=="function")try{if(L=h.props,H=(S=D.contextType)&&f[S.__c],$=S?H?H.props.value:S.__:f,s.__c?B=(E=h.__c=s.__c).__=E.__E:("prototype"in D&&D.prototype.render?h.__c=E=new D(L,$):(h.__c=E=new Uo(L,$),E.constructor=D,E.render=Rw),H&&H.sub(E),E.props=L,E.state||(E.state={}),E.context=$,E.__n=f,A=E.__d=!0,E.__h=[],E._sb=[]),E.__s==null&&(E.__s=E.state),D.getDerivedStateFromProps!=null&&(E.__s==E.state&&(E.__s=Xr({},E.__s)),Xr(E.__s,D.getDerivedStateFromProps(L,E.__s))),P=E.props,T=E.state,E.__v=h,A)D.getDerivedStateFromProps==null&&E.componentWillMount!=null&&E.componentWillMount(),E.componentDidMount!=null&&E.__h.push(E.componentDidMount);else{if(D.getDerivedStateFromProps==null&&L!==P&&E.componentWillReceiveProps!=null&&E.componentWillReceiveProps(L,$),!E.__e&&(E.shouldComponentUpdate!=null&&E.shouldComponentUpdate(L,E.__s,$)===!1||h.__v===s.__v)){for(h.__v!==s.__v&&(E.props=L,E.state=E.__s,E.__d=!1),h.__e=s.__e,h.__k=s.__k,h.__k.forEach(function(C){C&&(C.__=h)}),ie=0;ie<E._sb.length;ie++)E.__h.push(E._sb[ie]);E._sb=[],E.__h.length&&c.push(E);break e}E.componentWillUpdate!=null&&E.componentWillUpdate(L,E.__s,$),E.componentDidUpdate!=null&&E.__h.push(function(){E.componentDidUpdate(P,T,N)})}if(E.context=$,E.props=L,E.__P=g,E.__e=!1,K=Yt.__r,V=0,"prototype"in D&&D.prototype.render){for(E.state=E.__s,E.__d=!1,K&&K(h),S=E.render(E.props,E.state,E.context),Z=0;Z<E._sb.length;Z++)E.__h.push(E._sb[Z]);E._sb=[]}else do E.__d=!1,K&&K(h),S=E.render(E.props,E.state,E.context),E.state=E.__s;while(E.__d&&++V<25);E.state=E.__s,E.getChildContext!=null&&(f=Xr(Xr({},f),E.getChildContext())),A||E.getSnapshotBeforeUpdate==null||(N=E.getSnapshotBeforeUpdate(P,T)),lv(g,wf(z=S!=null&&S.type===xf&&S.key==null?S.props.children:S)?z:[z],h,s,f,i,l,c,v,m,w),E.base=h.__e,h.__h=null,E.__h.length&&c.push(E),B&&(E.__E=E.__=null)}catch(C){h.__v=null,(m||l!=null)&&(h.__e=v,h.__h=!!m,l[l.indexOf(v)]=null),Yt.__e(C,h,s)}else l==null&&h.__v===s.__v?(h.__k=s.__k,h.__e=s.__e):h.__e=Cw(s.__e,h,s,f,i,l,c,m,w);(S=Yt.diffed)&&S(h)}function Nw(g,h,s){for(var f=0;f<s.length;f++)Ef(s[f],s[++f],s[++f]);Yt.__c&&Yt.__c(h,g),g.some(function(i){try{g=i.__h,i.__h=[],g.some(function(l){l.call(i)})}catch(l){Yt.__e(l,i.__v)}})}function Cw(g,h,s,f,i,l,c,v,m){var w,S,E,A=s.props,P=h.props,T=h.type,N=0;if(T==="svg"&&(i=!0),l!=null){for(;N<l.length;N++)if((w=l[N])&&"setAttribute"in w==!!T&&(T?w.localName===T:w.nodeType===3)){g=w,l[N]=null;break}}if(g==null){if(T===null)return document.createTextNode(P);g=i?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,P.is&&P),l=null,v=!1}if(T===null)A===P||v&&g.data===P||(g.data=P);else{if(l=l&&_f.call(g.childNodes),S=(A=s.props||ju).dangerouslySetInnerHTML,E=P.dangerouslySetInnerHTML,!v){if(l!=null)for(A={},N=0;N<g.attributes.length;N++)A[g.attributes[N].name]=g.attributes[N].value;(E||S)&&(E&&(S&&E.__html==S.__html||E.__html===g.innerHTML)||(g.innerHTML=E&&E.__html||""))}if(Dw(g,P,A,i,v),E)h.__k=[];else if(lv(g,wf(N=h.props.children)?N:[N],h,s,f,i&&T!=="foreignObject",l,c,l?l[0]:s.__k&&Ni(s,0),v,m),l!=null)for(N=l.length;N--;)l[N]!=null&&sv(l[N]);v||("value"in P&&(N=P.value)!==void 0&&(N!==g.value||T==="progress"&&!N||T==="option"&&N!==A.value)&&Ru(g,"value",N,A.value,!1),"checked"in P&&(N=P.checked)!==void 0&&N!==g.checked&&Ru(g,"checked",N,A.checked,!1))}return g}function Ef(g,h,s){try{typeof g=="function"?g(h):g.current=h}catch(f){Yt.__e(f,s)}}function gf(g,h,s){var f,i;if(Yt.unmount&&Yt.unmount(g),(f=g.ref)&&(f.current&&f.current!==g.__e||Ef(f,null,h)),(f=g.__c)!=null){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(l){Yt.__e(l,h)}f.base=f.__P=null,g.__c=void 0}if(f=g.__k)for(i=0;i<f.length;i++)f[i]&&gf(f[i],h,s||typeof g.type!="function");s||g.__e==null||sv(g.__e),g.__=g.__e=g.__d=void 0}function Rw(g,h,s){return this.constructor(g,s)}_f=uv.slice,Yt={__e:function(g,h,s,f){for(var i,l,c;h=h.__;)if((i=h.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(g)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(g,f||{}),c=i.__d),c)return i.__E=i}catch(v){g=v}throw g}},iv=0,Uo.prototype.setState=function(g,h){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xr({},this.state),typeof g=="function"&&(g=g(Xr({},s),this.props)),g&&Xr(s,g),g!=null&&this.__v&&(h&&this._sb.push(h),Ig(this))},Uo.prototype.forceUpdate=function(g){this.__v&&(this.__e=!0,g&&this.__h.push(g),Ig(this))},Uo.prototype.render=xf,uo=[],av=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yf=function(g,h){return g.__v.__b-h.__v.__b},Cu.__r=0;var Ti=globalThis&&globalThis.__assign||function(){return Ti=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Ti.apply(this,arguments)};function Sf(g){var h=g.x,s=g.y,f=g.width,i=g.height,l=g.radius,c=g.className,v=h-f/2,m=s-i/2,w=Ti(Ti({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},g),{x:v,y:m});return Je.h("rect",Ti({},w))}Sf.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Ho;(function(g){g.NODE="node",g.CIRCLE_NODE="circle-node",g.POLYGON_NODE="polygon-node",g.RECT_NODE="rect-node",g.HTML_NODE="html-node",g.TEXT_NODE="text-node",g.ELLIPSE_NODE="ellipse-node",g.DIAMOND_NODE="diamond-node",g.EDGE="edge",g.LINE_EDGE="line-edge",g.POLYLINE_EDGE="polyline-edge",g.BEZIER_EDGE="bezier-edge",g.GRAPH="graph"})(Ho||(Ho={}));function Au(g){var h=g.x,s=g.y,f=g.width,i=g.height;return{minX:h-f/2,minY:s-i/2,maxX:h+f/2,maxY:s+i/2}}function Fg(g){var h=Au(g),s=g.radius,f=h.minX,i=h.minY,l=h.maxX,c=h.maxY;return[{x:f+s,y:i+s},{x:l-s,y:i+s},{x:l-s,y:c-s},{x:f+s,y:c-s}]}function Hg(g){var h=g.point,s=g.beforeNode,f=g.afterNode,i=h.x,l=h.y,c={x:i,y:l},v=s.radius,m=Au(s),w=Au(f);if(i===m.minX){c.x=w.minX;var S=(l-s.y)/(s.height/2-v);S?c.y=f.y+(f.height/2-v)*S:c.y=f.y}else if(i===m.maxX){c.x=w.maxX;var S=(l-s.y)/(s.height/2-v);S?c.y=f.y+(f.height/2-v)*S:c.y=f.y}else if(l===m.minY){c.y=w.minY;var S=(i-s.x)/(s.width/2-v);S?c.x=f.x+(f.width/2-v)*S:c.x=f.x}else if(l===m.maxY){c.y=w.maxY;var S=(i-s.x)/(s.width/2-v);S?c.x=f.x+(f.width/2-v)*S:c.x=f.x}else{var E=Fg(s),A=Fg(f),P=Au(s),T=P.minX,N=P.minY,B=P.maxX,L=P.maxY,H=-1;if(i-T<v&&l-N<v?H=0:B-i<v&&l-N<v?H=1:B-i<v&&L-l<v?H=2:i-T<v&&N-l<v&&(H=3),H>-1){var $=Math.atan2(l-E[H].y,i-E[H].x);c.x=A[H].x+v*Math.cos($),c.y=A[H].y+v*Math.sin($)}}return c}function Ug(g){var h=g.point,s=g.beforeNode,f=g.afterNode,i=f.rx,l=f.ry,c=h,v=(h.y-s.y)/(h.x-s.x),m=i,w=l,S,E;return v>=1/0?(S=0,E=w):v<=-1/0?(S=0,E=-w):h.x-s.x>0?(S=m*w/Math.sqrt(w*w+m*m*v*v),E=m*w*v/Math.sqrt(w*w+m*m*v*v)):(S=-(m*w)/Math.sqrt(w*w+m*m*v*v),E=-(m*w*v)/Math.sqrt(w*w+m*m*v*v)),c={x:S+f.x,y:E+f.y},c}function Gg(g){var h=g.point,s=g.beforeNode,f=g.afterNode,i=h,l,c,v=h.x-s.x,m=h.y-s.y,w=s.rx,S=s.ry,E=Math.sqrt((w-Math.abs(v))*(w-Math.abs(v))+m*m)/Math.sqrt(w*w+S*S),A=f.rx,P=f.ry,T=Math.sqrt((A*A+P*P)*E*E*(A*A/(A*A+P*P))),N=T*(P/A);return v>=0?l=A-T:l=T-A,m>0?c=N:c=-N,i={x:l+f.x,y:c+f.y},i}var Iw=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),so=globalThis&&globalThis.__assign||function(){return so=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},so.apply(this,arguments)},Lw=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},zw=Je.LogicFlowUtil.StepDrag,Bw=function(g){Iw(h,g);function h(s){var f=g.call(this)||this;return f.updatePosition=function(i){var l=i.deltaX,c=i.deltaY,v=f.nodeModel,m=v.x,w=v.y;f.nodeModel.x=m+l/2,f.nodeModel.y=w+c/2,f.nodeModel.moveText(l/2,c/2)},f.getResize=function(i){var l=i.index,c=i.deltaX,v=i.deltaY,m=i.width,w=i.height,S=i.PCTResizeInfo,E=i.pct,A=E===void 0?1:E,P={width:m,height:w,deltaX:c,deltaY:v};if(S){var T=4,N=0,B=0;switch(l){case 0:B=(c*-1-v)/T;break;case 1:B=(c-v)/T;break;case 2:B=(c+v)/T;break;case 3:B=(c*-1+v)/T;break}B!==0&&(N=Math.round(B/S.ResizeBasis.basisHeight*1e5)/1e3),S.ResizePCT.widthPCT=Math.max(Math.min(S.ResizePCT.widthPCT+N,S.ScaleLimit.maxScaleLimit),S.ScaleLimit.minScaleLimit),S.ResizePCT.hightPCT=Math.max(Math.min(S.ResizePCT.hightPCT+N,S.ScaleLimit.maxScaleLimit),S.ScaleLimit.minScaleLimit);var L=Math.round(S.ResizePCT.widthPCT*S.ResizeBasis.basisWidth/100),H=Math.round(S.ResizePCT.hightPCT*S.ResizeBasis.basisHeight/100);switch(l){case 0:c=m-L,v=w-H;break;case 1:c=L-m,v=w-H;break;case 2:c=L-m,v=H-w;break;case 3:c=m-L,v=H-w;break}return P.width=L,P.height=H,P.deltaX=c/A,P.deltaY=v/A,P}switch(l){case 0:P.width=m-c*A,P.height=w-v*A;break;case 1:P.width=m+c*A,P.height=w-v*A;break;case 2:P.width=m+c*A,P.height=w+v*A;break;case 3:P.width=m-c*A,P.height=w+v*A;break}return P},f.updateRect=function(i){var l=i.deltaX,c=i.deltaY,v=f.nodeModel,m=v.id,w=v.x,S=v.y,E=v.width,A=v.height,P=v.radius,T=v.PCTResizeInfo,N=f.index,B=f.getResize({index:N,deltaX:l,deltaY:c,width:E,height:A,PCTResizeInfo:T,pct:1}),L=f.nodeModel,H=L.minWidth,$=L.minHeight,ie=L.maxWidth,K=L.maxHeight;if(B.width<H||B.width>ie||B.height<$||B.height>K){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:B.deltaX,deltaY:B.deltaY}),f.nodeModel.width=B.width,f.nodeModel.height=B.height,f.nodeModel.setProperties({nodeSize:{width:B.width,height:B.height}});var V=f.getNodeEdges(m),Z={x:w,y:S,width:E,height:A,radius:P},z={x:f.nodeModel.x,y:f.nodeModel.y,width:f.nodeModel.width,height:f.nodeModel.height,radius:P},D={point:"",beforeNode:Z,afterNode:z},C;V.sourceEdges.forEach(function(R){D.point=R.startPoint,C=Hg(D),R.updateStartPoint(C)}),V.targetEdges.forEach(function(R){D.point=R.endPoint,C=Hg(D),R.updateEndPoint(C)}),f.eventEmit({beforeNode:Z,afterNode:z})},f.updateEllipse=function(i){var l=i.deltaX,c=i.deltaY,v=f.nodeModel,m=v.id,w=v.rx,S=v.ry,E=v.x,A=v.y,P=v.PCTResizeInfo,T=f.index,N=w,B=S,L=f.getResize({index:T,deltaX:l,deltaY:c,width:N,height:B,PCTResizeInfo:P,pct:1/2}),H=f.nodeModel,$=H.minWidth,ie=H.minHeight,K=H.maxWidth,V=H.maxHeight;if(L.width<$/2||L.width>K/2||L.height<ie/2||L.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:L.deltaX,deltaY:L.deltaY}),f.nodeModel.rx=L.width,f.nodeModel.ry=L.height,f.nodeModel.setProperties({nodeSize:{rx:L.width,ry:L.height}});var Z=f.getNodeEdges(m),z={x:E,y:A},D={rx:L.width,ry:L.height,x:f.nodeModel.x,y:f.nodeModel.y},C={point:{},beforeNode:z,afterNode:D},R;Z.sourceEdges.forEach(function(F){C.point=F.startPoint,R=Ug(C),F.updateStartPoint(R)}),Z.targetEdges.forEach(function(F){C.point=F.endPoint,R=Ug(C),F.updateEndPoint(R)}),f.eventEmit({beforeNode:so(so({},z),{rx:w,ry:S}),afterNode:D})},f.updateDiamond=function(i){var l=i.deltaX,c=i.deltaY,v=f.nodeModel,m=v.id,w=v.rx,S=v.ry,E=v.x,A=v.y,P=v.PCTResizeInfo,T=f.index,N=w,B=S,L=f.getResize({index:T,deltaX:l,deltaY:c,width:N,height:B,PCTResizeInfo:P,pct:1/2}),H=f.nodeModel,$=H.minWidth,ie=H.minHeight,K=H.maxWidth,V=H.maxHeight;if(L.width<$/2||L.width>K/2||L.height<ie/2||L.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:L.deltaX,deltaY:L.deltaY}),f.nodeModel.rx=L.width,f.nodeModel.ry=L.height,f.nodeModel.setProperties({nodeSize:{rx:L.width,ry:L.height}});var Z={x:E,y:A,rx:w,ry:S},z={rx:L.width,ry:L.height,x:f.nodeModel.x,y:f.nodeModel.y},D={point:{},beforeNode:Z,afterNode:z},C,R=f.getNodeEdges(m);R.sourceEdges.forEach(function(F){D.point=F.startPoint,C=Gg(D),F.updateStartPoint(C)}),R.targetEdges.forEach(function(F){D.point=F.endPoint,C=Gg(D),F.updateEndPoint(C)}),f.eventEmit({beforeNode:Z,afterNode:z})},f.eventEmit=function(i){var l=i.beforeNode,c=i.afterNode,v=f.nodeModel,m=v.id,w=v.modelType,S=v.type,E=so({id:m,modelType:w,type:S},l),A=so({id:m,modelType:w,type:S},c);f.graphModel.eventCenter.emit("node:resize",{oldNodeSize:E,newNodeSize:A})},f.onDragging=function(i){var l,c=i.deltaX,v=i.deltaY,m=f.graphModel.transformModel,w=f.nodeModel.modelType;l=Lw(m.fixDeltaXY(c,v),2),c=l[0],v=l[1],w===Ho.RECT_NODE||w===Ho.HTML_NODE?f.updateRect({deltaX:c,deltaY:v}):w===Ho.ELLIPSE_NODE?f.updateEllipse({deltaX:c,deltaY:v}):w===Ho.DIAMOND_NODE&&f.updateDiamond({deltaX:c,deltaY:v})},f.onDragEnd=function(){var i=f.graphModel.gridSize,l=i===void 0?1:i,c=l*Math.round(f.nodeModel.x/l),v=l*Math.round(f.nodeModel.y/l);f.nodeModel.moveTo(c,v)},f.index=s.index,f.nodeModel=s.model,f.graphModel=s.graphModel,f.state={},f.dragHandler=new zw({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:1}),f}return h.prototype.getNodeEdges=function(s){for(var f=this.graphModel,i=f.edges,l=[],c=[],v=0;v<i.length;v++){var m=i[v];m.sourceNodeId===s?l.push(m):i[v].targetNodeId===s&&c.push(m)}return{sourceEdges:l,targetEdges:c}},h.prototype.render=function(){var s=this.props,f=s.x,i=s.y,l=s.index,c=s.model,v=c.getControlPointStyle();return Mi("g",{className:"lf-resize-control-"+l},Mi(Sf,so({className:"lf-node-control"},{x:f,y:i},v,{onMouseDown:this.dragHandler.handleMouseDown})))},h}(Uo),Fw=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Iu=globalThis&&globalThis.__assign||function(){return Iu=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Iu.apply(this,arguments)},Bu=function(g){Fw(h,g);function h(){var s=g.call(this)||this;return s.state={},s}return h.prototype.getResizeControl=function(){var s=this.props,f=s.model,i=s.graphModel,l=f.x,c=f.y,v=f.width,m=f.height,w={minX:l-v/2,minY:c-m/2,maxX:l+v/2,maxY:c+m/2},S=w.minX,E=w.minY,A=w.maxX,P=w.maxY,T=[{x:S,y:E},{x:A,y:E},{x:A,y:P},{x:S,y:P}];return T.map(function(N,B){return Mi(Bw,Iu({index:B},N,{model:f,graphModel:i}))})},h.prototype.getGroupSolid=function(){var s=this.props.model,f=s.x,i=s.y,l=s.width,c=s.height,v=s.getResizeOutlineStyle();return Mi(Sf,Iu({fill:"none"},v,{x:f,y:i,width:l,height:c}))},h.prototype.render=function(){return Mi("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},h}(Uo),hv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Hw=function(g){hv(h,g);function h(s,f){var i=g.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.width=l.width,i.height=l.height),i}return h.prototype.initNodeData=function(s){g.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=g.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.resize=function(s,f){},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h}(Je.RectNodeModel),Uw=function(g){hv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Bu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return g.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h}(Je.RectNode),yv={type:"rect",view:Uw,model:Hw},gv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(g){gv(h,g);function h(s,f){var i=g.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.rx=l.rx,i.ry=l.ry),i}return h.prototype.initNodeData=function(s){g.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=g.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.EllipseNodeModel);(function(g){gv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Bu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return g.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f.isSelected&&!i?this.getControlGroup():"")},h})(Je.EllipseNode);var vf=globalThis&&globalThis.__assign||function(){return vf=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},vf.apply(this,arguments)};function Gw(g){var h=g.fillOpacity,s=h===void 0?1:h,f=g.strokeWidth,i=f===void 0?1:f,l=g.strokeOpacity,c=l===void 0?1:l,v=g.fill,m=v===void 0?"transparent":v,w=g.stroke,S=w===void 0?"#000":w,E=g.points,A=g.className,P=A===void 0?"lf-basic-shape":A,T={fill:m,fillOpacity:s,strokeWidth:i,stroke:S,strokeOpacity:c,points:"",className:P};return T.points=E.map(function(N){return N.join(",")}).join(" "),Je.h("polygon",vf({},T))}var vv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),bf=globalThis&&globalThis.__assign||function(){return bf=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},bf.apply(this,arguments)};(function(g){vv(h,g);function h(s,f){var i=g.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.rx=l.rx,i.ry=l.ry),i}return h.prototype.initNodeData=function(s){g.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},h.prototype.getOutlineStyle=function(){var s=g.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.DiamondNodeModel);(function(g){vv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Bu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){var s=this.props.model,f=s.points,i=s.getNodeStyle();return Je.h("g",null,Je.h(Gw,bf({},i,{points:f})))},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h})(Je.DiamondNode);var bv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(g){bv(h,g);function h(s,f){var i=g.call(this,s,f)||this,l=i.properties.nodeSize;return l&&(i.width=l.width,i.height=l.height),i}return h.prototype.initNodeData=function(s){g.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},h.prototype.getOutlineStyle=function(){var s=g.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},h.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},h.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},h.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:i,ScaleLimit:l}}else delete this.PCTResizeInfo},h})(Je.HtmlNodeModel);(function(g){bv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props,f=s.model,i=s.graphModel;return Je.h(Bu,{model:f,graphModel:i})},h.prototype.getResizeShape=function(){return g.prototype.getShape.call(this)},h.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,i=s.graphModel.editConfigModel.isSilentMode;return Je.h("g",null,this.getResizeShape(),f&&!i?this.getControlGroup():"")},h})(Je.HtmlNode);var mv=globalThis&&globalThis.__extends||function(){var g=function(h,s){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var l in i)i.hasOwnProperty(l)&&(f[l]=i[l])},g(h,s)};return function(h,s){g(h,s);function f(){this.constructor=h}h.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Lu=globalThis&&globalThis.__assign||function(){return Lu=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Lu.apply(this,arguments)},Xw=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},Yw=globalThis&&globalThis.__spread||function(){for(var g=[],h=0;h<arguments.length;h++)g=g.concat(Xw(arguments[h]));return g},Xg=500,Yg=300,Vw=-1e4;(function(g){mv(h,g);function h(){var s=g!==null&&g.apply(this,arguments)||this;return s.isGroup=!0,s.unfoldedWidth=Xg,s.unfoldedHight=Yg,s.childrenLastFoldStatus={},s}return h.prototype.initNodeData=function(s){var f=this;g.prototype.initNodeData.call(this,s);var i=[];Array.isArray(s.children)&&(i=s.children),this.children=new Set(i),this.width=Xg,this.height=Yg,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=Vw,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){f.isFolded&&f.foldGroup(f.isFolded)})},h.prototype.getResizeOutlineStyle=function(){var s=g.prototype.getResizeOutlineStyle.call(this);return s.stroke="none",s},h.prototype.foldGroup=function(s){var f=this;if(s!==this.isFolded){this.setProperty("isFolded",s),this.isFolded=s,s?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=f.graphModel.getElement(l),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(s),c.isGroup&&!s){var m=f.childrenLastFoldStatus[l];m!==void 0&&m!==c.isFolded&&c.foldGroup(m)}f.childrenLastFoldStatus[l]=v,c.visible=!s,i=i.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(s,i)}},h.prototype.getAnchorStyle=function(s){var f=g.prototype.getAnchorStyle.call(this,s);return f.stroke="transparent",f.fill="transparent",f.hover.fill="transparent",f.hover.stroke="transparent",f},h.prototype.foldEdge=function(s,f){var i=this;f.forEach(function(l,c){var v=l.id,m=l.sourceNodeId,w=l.targetNodeId,S=l.startPoint,E=l.endPoint,A=l.type,P=l.text,T=l.getProperties(),N={id:v+"__"+c,sourceNodeId:m,targetNodeId:w,startPoint:S,endPoint:E,type:A,properties:T,text:P==null?void 0:P.value};l.virtual&&i.graphModel.deleteEdgeById(l.id);var B=i.graphModel.group.getNodeGroup(w);B||(B=i.graphModel.getNodeModelById(w));var L=i.graphModel.group.getNodeGroup(m);L||(L=i.graphModel.getNodeModelById(m)),s&&l.visible!==!1&&(i.children.has(m)||i.id===m?(N.startPoint=void 0,N.sourceNodeId=i.id):(N.endPoint=void 0,N.targetNodeId=i.id),(B.id!==i.id||L.id!==i.id)&&i.createVirtualEdge(N),l.visible=!1),!s&&l.visible===!1&&(B&&B.isGroup&&B.isFolded?(N.targetNodeId=B.id,N.endPoint=void 0,i.createVirtualEdge(N)):L&&L.isGroup&&L.isFolded?(N.sourceNodeId=L.id,N.startPoint=void 0,i.createVirtualEdge(N)):l.visible=!0)})},h.prototype.createVirtualEdge=function(s){s.pointsList=void 0;var f=this.graphModel.addEdge(s);f.virtual=!0,f.text.editable=!1,f.isFoldedEdge=!0},h.prototype.isInRange=function(s){var f=s.x1,i=s.y1,l=s.x2,c=s.y2;return f>=this.x-this.width/2&&l<=this.x+this.width/2&&i>=this.y-this.height/2&&c<=this.y+this.height/2},h.prototype.isAllowMoveTo=function(s){var f=s.x1,i=s.y1,l=s.x2,c=s.y2;return{x:f>=this.x-this.width/2&&l<=this.x+this.width/2,y:i>=this.y-this.height/2&&c<=this.y+this.height/2}},h.prototype.setAllowAppendChild=function(s){this.setProperty("groupAddable",s)},h.prototype.addChild=function(s){this.children.add(s)},h.prototype.removeChild=function(s){this.children.delete(s)},h.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},h.prototype.getData=function(){var s=this,f=g.prototype.getData.call(this);f.children=[],this.children.forEach(function(l){var c=s.graphModel.getNodeModelById(l);c&&!c.virtual&&f.children.push(l)});var i=f.properties;return delete i.groupAddable,delete i.isFolded,f},h.prototype.getHistoryData=function(){var s=g.prototype.getData.call(this);s.children=Yw(this.children),s.isGroup=!0;var f=s.properties;return delete f.groupAddable,f.isFolded&&(s.x=s.x+this.unfoldedWidth/2-this.foldedWidth/2,s.y=s.y+this.unfoldedHight/2-this.foldedHeight/2),s},h.prototype.isAllowAppendIn=function(s){return!0},h.prototype.toBack=function(){this.zIndex--},h})(yv.model);(function(g){mv(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return h.prototype.getControlGroup=function(){var s=this.props.model,f=s.resizable,i=s.properties;return f&&!i.isFolded?g.prototype.getControlGroup.call(this):null},h.prototype.getAddableShape=function(){var s=this.props.model,f=s.width,i=s.height,l=s.x,c=s.y,v=s.radius,m=s.properties;if(!m.groupAddable)return null;var w=this.props.model.getNodeStyle().strokeWidth,S=this.props.model.getAddableOutlineStyle(),E=f+w+8,A=i+w+8;return Je.h("rect",Lu(Lu({},S),{width:E,height:A,x:l-E/2,y:c-A/2,rx:v,ry:v}))},h.prototype.getFoldIcon=function(){var s=this.props.model,f=s.x-s.width/2+5,i=s.y-s.height/2+5;if(!s.foldable)return null;var l=Je.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:s.properties.isFolded?"M "+(f+3)+","+(i+6)+" "+(f+11)+","+(i+6)+" M"+(f+7)+","+(i+2)+" "+(f+7)+","+(i+10):"M "+(f+3)+","+(i+6)+" "+(f+11)+","+(i+6)+" "});return Je.h("g",{},[Je.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:s.x-s.width/2+5,y:s.y-s.height/2+5,onClick:function(){s.foldGroup(!s.properties.isFolded)}}),l])},h.prototype.getResizeShape=function(){return Je.h("g",{},[this.getAddableShape(),g.prototype.getResizeShape.call(this),this.getFoldIcon()])},h})(yv.view);var Ww=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var Vg=globalThis&&globalThis.__assign||function(){return Vg=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Vg.apply(this,arguments)},Wg=globalThis&&globalThis.__assign||function(){return Wg=Object.assign||function(g){for(var h,s=1,f=arguments.length;s<f;s++){h=arguments[s];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(g[i]=h[i])}return g},Wg.apply(this,arguments)},Kw=globalThis&&globalThis.__read||function(g,h){var s=typeof Symbol=="function"&&g[Symbol.iterator];if(!s)return g;var f=s.call(g),i,l=[],c;try{for(;(h===void 0||h-- >0)&&!(i=f.next()).done;)l.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;const Zw={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,SERVICE_TASK:5,EXCLUSIVE_GATEWAY:6};function qw(g){const{incoming:h,outgoing:s,properties:f,key:i}=g,{text:l,startPoint:c,endPoint:v,pointsList:m,logicFlowType:w}=f,S={id:i,type:w,sourceNodeId:h[0],targetNodeId:s[0],text:l,startPoint:c,endPoint:v,pointsList:m,properties:{}},E=["startPoint","endPoint","pointsList","text","logicFlowType"];return Object.keys(g.properties).forEach(A=>{E.indexOf(A)===-1&&(S.properties[A]=g.properties[A])}),S}function Jw(g){const{properties:h,key:s}=g,{x:f,y:i,text:l,logicFlowType:c}=h,v={id:s,type:c,x:f,y:i,text:l,properties:{}},m=["x","y","text","logicFlowType"];return Object.keys(g.properties).forEach(w=>{m.indexOf(w)===-1&&(v.properties[w]=g.properties[w])}),v}function $w(g){const h={nodes:[],edges:[]},s=g.flowElementList;return s&&s.length>0&&s.forEach(f=>{if(f.type===Zw.SEQUENCE_FLOW){const i=qw(f);h.edges.push(i)}else{const i=Jw(f);h.nodes.push(i)}}),h}function Qw(g){return[{text:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:()=>{g.updateEditConfig({stopMoveGraph:!0})}},{type:"circle",text:"开始",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"rect",text:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"important-node"},{type:"rect",text:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"import_icon"},{type:"diamond",text:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},{type:"circle",text:"结束",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"}]}const ex=Kg({name:"FlowChart",components:{BasicModal:T1,FlowChartToolbar:F1,JsonPreview:N1},props:{flowOptions:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},toolbar:{type:Boolean,default:!0},patternItems:{type:Array}},setup(g){const h=xu(null),s=xu({}),f=xu(null),{prefixCls:i}=h1("flow-chart"),l=y1(),[c,{openModal:v}]=D1();R1({logicFlow:f});const m=S1(()=>{const{flowOptions:A}=g;return cf({grid:!0,background:{color:l.getDarkMode==="light"?"#f7f9ff":"#151515"},keyboard:{enabled:!0}},A)});_g(()=>g.data,()=>{S()}),_g(()=>dn(m),A=>{var P;(P=dn(f))==null||P.updateEditConfig(A)});function w(){return wu(this,null,function*(){yield lf();const A=dn(h);if(!A)return;zo.use(Pw),zo.use(lw),zo.use(cw),zo.use(jw),zo.use(Aw),f.value=new zo(mg(cf({},dn(m)),{container:A}));const P=dn(f);P==null||P.setDefaultEdgeType("line"),S(),P==null||P.setPatternItems(g.patternItems||Qw(P))})}function S(){return wu(this,null,function*(){yield lf();const A=dn(f);if(!A)return;const P=$w(g.data);A.render(P)})}function E(){const A=dn(f);A&&(s.value=dn(A).getGraphData(),v())}return j1(w),{register:c,prefixCls:i,lfElRef:h,handlePreview:E,graphData:s}}}),tx={ref:"lfElRef",class:"h-full"};function nx(g,h,s,f,i,l){const c=Yr("FlowChartToolbar"),v=Yr("JsonPreview"),m=Yr("BasicModal");return Gr(),Ai("div",{class:Eu(["h-full",g.prefixCls])},[g.toolbar?(Gr(),Of(c,{key:0,prefixCls:g.prefixCls,onViewData:g.handlePreview},null,8,["prefixCls","onViewData"])):ff("",!0),P1("div",tx,null,512),Di(m,{onRegister:g.register,title:"流程数据",width:"50%"},{default:ku(()=>[Di(v,{data:g.graphData},null,8,["data"])]),_:1},8,["onRegister"])],2)}const rx=mf(ex,[["render",nx]]),ox=g1(rx),ix=[{incoming:[],outgoing:["Flow_33inf2k"],dockers:[],type:2,properties:{a:"efrwe",b:"wewe",name:"开始",x:280,y:200,text:{x:280,y:200,value:"开始"},logicFlowType:"bpmn:startEvent"},key:"Event_1d42u4p"},{incoming:["Flow_379e0o9"],outgoing:[],dockers:[],type:3,properties:{a:"efrwe",b:"wewe",name:"结束",x:920,y:200,text:{x:920,y:200,value:"结束"},logicFlowType:"bpmn:endEvent"},key:"Event_08p8i6q"},{incoming:["Flow_0pfouf0"],outgoing:["Flow_3918lhh"],dockers:[],type:6,properties:{a:"efrwe",b:"wewe",name:"网关",x:580,y:200,text:{x:580,y:200,value:"网关"},logicFlowType:"bpmn:exclusiveGateway"},key:"Gateway_1fngqgj"},{incoming:["Flow_33inf2k"],outgoing:["Flow_0pfouf0"],dockers:[],type:4,properties:{a:"efrwe",b:"wewe",name:"用户",x:420,y:200,text:{x:420,y:200,value:"用户"},logicFlowType:"bpmn:userTask"},key:"Activity_2mgtaia"},{incoming:["Flow_3918lhh"],outgoing:["Flow_379e0o9"],dockers:[],type:5,properties:{a:"efrwe",b:"wewe",name:"服务",x:760,y:200,text:{x:760,y:200,value:"服务"},logicFlowType:"bpmn:serviceTask"},key:"Activity_1sp8qc8"},{incoming:["Event_1d42u4p"],outgoing:["Activity_2mgtaia"],type:1,dockers:[],properties:{name:"边",text:{x:331,y:200,value:"边"},startPoint:{x:298,y:200},endPoint:{x:370,y:200},pointsList:[{x:298,y:200},{x:370,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_33inf2k"},{incoming:["Activity_2mgtaia"],outgoing:["Gateway_1fngqgj"],type:1,dockers:[],properties:{name:"边2",text:{x:507,y:200,value:"边2"},startPoint:{x:470,y:200},endPoint:{x:555,y:200},pointsList:[{x:470,y:200},{x:555,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_0pfouf0"},{incoming:["Gateway_1fngqgj"],outgoing:["Activity_1sp8qc8"],type:1,dockers:[],properties:{name:"边3",text:{x:664,y:200,value:"边3"},startPoint:{x:605,y:200},endPoint:{x:710,y:200},pointsList:[{x:605,y:200},{x:710,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_3918lhh"},{incoming:["Activity_1sp8qc8"],outgoing:["Event_08p8i6q"],type:1,dockers:[],properties:{name:"边4",text:{x:871,y:200,value:"边4"},startPoint:{x:810,y:200},endPoint:{x:902,y:200},pointsList:[{x:810,y:200},{x:902,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_379e0o9"}],ax={flowElementList:ix},ux={components:{FlowChart:ox,PageWrapper:C1},setup(){return{demoData:ax}}};function sx(g,h,s,f,i,l){const c=Yr("FlowChart"),v=Yr("PageWrapper");return Gr(),Of(v,{title:"流程图",content:"简单流程图示例,具体功能需要自己完善",contentFullHeight:"",fixedHeight:""},{default:ku(()=>[Di(c,{data:f.demoData},null,8,["data"])]),_:1})}const mx=mf(ux,[["render",sx]]);export{mx as default};
