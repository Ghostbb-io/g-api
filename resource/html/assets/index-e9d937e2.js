var h=(e,l,n)=>new Promise((u,r)=>{var c=o=>{try{a(n.next(o))}catch(i){r(i)}},s=o=>{try{a(n.throw(o))}catch(i){r(i)}},a=o=>o.done?u(o.value):Promise.resolve(o.value).then(c,s);a((n=n.apply(e,l)).next())});import{b as C}from"./index-cf0c6833.js";import{B as _}from"./BasicTable-9834a2fb.js";import{T as g}from"./componentMap-c5f962c4.js";import"./TableImg.vue_vue_type_style_index_0_lang-3cd25fdb.js";import{u as F}from"./useTable-b33575de.js";import{_ as T,c as B,s as y}from"./UserModel.vue_vue_type_script_setup_true_lang-374fb2ba.js";import{aS as A,_ as k}from"./index.js";import{g as E,d as S}from"./user-3510e0a3.js";import{d as M,r as U,a8 as d,_ as b,$ as w,l as p,aa as f,E as $,a9 as I,ac as V}from"./vue-5c68ae35.js";import"./antd-12f11a56.js";import"./useWindowSizeFn-997fa1d0.js";import"./BasicForm-33def721.js";import"./FormItem.vue_vue_type_script_lang-bb880c91.js";import"./helper-736f1539.js";import"./BasicForm.vue_vue_type_style_index_0_lang-4cc18aab.js";import"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import"./useFormItem-16924efd.js";import"./uuid-31b8b5a4.js";import"./onMountedOrActivated-97a1bb6a.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-cf464bf9.js";import"./index-7f09b489.js";import"./sortable.esm-4ae27e0b.js";import"./role-45b3624a.js";const D=M({name:"UserManagement",components:{BasicTable:_,TableAction:g,UserModal:T},setup(){const e=A(),[l,{openModal:n}]=C(),u=U({}),[r,{reload:c}]=F({title:"使用者列表",api:E,rowKey:"id",columns:B,formConfig:{labelWidth:120,schemas:y,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:120,title:"操作",dataIndex:"action"}});function s(){n(!0,{isUpdate:!1})}function a(t){n(!0,{record:t,isUpdate:!0})}function o(t){return h(this,null,function*(){yield S(t.id),m()})}function i(t){e(`/system/user/${t.id}/detail`)}function m(){c()}return{handleSuccess:m,handleDelete:o,handleEdit:a,handleCreate:s,handleView:i,registerModal:l,registerTable:r,searchInfo:u}}});function R(e,l,n,u,r,c){const s=d("a-button"),a=d("TableAction"),o=d("BasicTable"),i=d("UserModal");return b(),w("div",null,[p(o,{onRegister:e.registerTable,searchInfo:e.searchInfo},{toolbar:f(()=>[p(s,{type:"primary",onClick:e.handleCreate},{default:f(()=>[$("新增帳號")]),_:1},8,["onClick"])]),bodyCell:f(({column:m,record:t})=>[m.key==="action"?(b(),I(a,{key:0,actions:[{icon:"clarity:info-standard-line",tooltip:"查看使用者詳情",onClick:e.handleView.bind(null,t)},{icon:"clarity:note-edit-line",tooltip:"編輯使用者資訊",onClick:e.handleEdit.bind(null,t)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"刪除此使用者",popConfirm:{title:"是否確認刪除",placement:"left",confirm:e.handleDelete.bind(null,t)}}]},null,8,["actions"])):V("",!0)]),_:1},8,["onRegister","searchInfo"]),p(i,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const ue=k(D,[["render",R]]);export{ue as default};
