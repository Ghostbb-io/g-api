var _=Object.defineProperty;var f=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var w=(a,t,e)=>t in a?_(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,h=(a,t)=>{for(var e in t||(t={}))F.call(t,e)&&w(a,e,t[e]);if(f)for(var e of f(t))B.call(t,e)&&w(a,e,t[e]);return a};var p=(a,t,e)=>new Promise((n,d)=>{var m=r=>{try{i(e.next(r))}catch(l){d(l)}},c=r=>{try{i(e.throw(r))}catch(l){d(l)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(m,c);i((e=e.apply(a,t)).next())});import{B as P}from"./BasicForm-33def721.js";import"./componentMap-c5f962c4.js";import{u as k}from"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import{a as q,B as v}from"./index-cf0c6833.js";import{b as M}from"./role-45b3624a.js";import{m as R,d as S,f as g,u as o,c as y,_ as A,a9 as N,aa as U,l as C,ad as L}from"./vue-5c68ae35.js";import{K as T}from"./antd-12f11a56.js";import{a as O,e as V}from"./user-3510e0a3.js";const Y=[{title:"使用者名稱",dataIndex:"username",width:100},{title:"暱稱",dataIndex:"nickName",width:100},{title:"信箱",dataIndex:"email",width:150},{title:"手機號碼",dataIndex:"mobile",width:150},{title:"備註",dataIndex:"remark",width:500},{title:"創建時間",dataIndex:"createdAt",width:150},{title:"狀態",dataIndex:"status",width:80,customRender:({record:a})=>{const t=a.status,e=t?"green":"red",n=t?"啟用":"停用";return R(T,{color:e},()=>n)}}],Z=[{field:"username",label:"使用者名稱",component:"Input",colProps:{span:8}}],$=[{field:"username",label:"使用者名稱",component:"Input",helpMessage:["不能輸入帶有admin使用者名稱"],required:!0,componentProps:{disabled:!1}},{field:"password",label:"密碼",component:"InputPassword",required:!0,ifShow:!0},{label:"角色",field:"roles",component:"ApiSelect",componentProps:{api:M,labelField:"roleName",valueField:"role",mode:"multiple"},required:!0},{field:"nickName",label:"暱稱",component:"Input",required:!0},{field:"realName",label:"真實姓名",component:"Input"},{label:"信箱",field:"email",component:"Input",rules:[{required:!0,message:"請輸入信箱"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"請輸入正確的信箱",trigger:"change"}]},{label:"手機號碼",field:"mobile",component:"Input",required:!0},{label:"備註",field:"remark",component:"InputTextArea"}],ee=S({__name:"UserModel",emits:["success","register"],setup(a,{emit:t}){const e=g(!0),n=g(0),[d,{setFieldsValue:m,updateSchema:c,resetFields:i,validate:r}]=k({labelWidth:100,baseColProps:{span:24},schemas:$,showActionButtonGroup:!1,actionColOptions:{span:23}}),[l,{setModalProps:u,closeModal:b}]=q(s=>p(this,null,function*(){i(),u({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),o(e)&&(n.value=s.record.id,m(h({},s.record))),c([{field:"password",show:!o(e),required:!o(e)},{field:"username",componentProps:{disabled:o(e)}}])})),I=y(()=>o(e)?"編輯使用者":"新增使用者");function x(){return p(this,null,function*(){try{const s=yield r();u({confirmLoading:!0}),o(e)?yield V(n.value,s):yield O(s),b(),t("success")}finally{u({confirmLoading:!1})}})}return(s,G)=>(A(),N(o(v),L(s.$attrs,{onRegister:o(l),title:I.value,onOk:x}),{default:U(()=>[C(o(P),{onRegister:o(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ee as _,Y as c,Z as s};
