var h=(e,i,o)=>new Promise((s,c)=>{var u=t=>{try{n(o.next(t))}catch(a){c(a)}},l=t=>{try{n(o.throw(t))}catch(a){c(a)}},n=t=>t.done?s(t.value):Promise.resolve(t.value).then(u,l);n((o=o.apply(e,i)).next())});import{B as C}from"./BasicTable-9834a2fb.js";import{T}from"./componentMap-c5f962c4.js";import"./TableImg.vue_vue_type_style_index_0_lang-3cd25fdb.js";import{u as g}from"./useTable-b33575de.js";import{b as _,d as w}from"./menu-f81aa51d.js";import{u as S}from"./index-ae722a40.js";import{M as D,c as k,s as B}from"./MenuDrawer-15a86da9.js";import{d as y,x as M,a8 as m,_ as b,$ as A,l as p,aa as d,E as F,a9 as E,ac as x}from"./vue-5c68ae35.js";import{_ as R}from"./index.js";import"./BasicForm-33def721.js";import"./FormItem.vue_vue_type_script_lang-bb880c91.js";import"./helper-736f1539.js";import"./antd-12f11a56.js";import"./BasicForm.vue_vue_type_style_index_0_lang-4cc18aab.js";import"./index-cf0c6833.js";import"./useWindowSizeFn-997fa1d0.js";import"./useForm-61e3194d.js";import"./RadioButtonGroup-81fea792.js";import"./useFormItem-16924efd.js";import"./uuid-31b8b5a4.js";import"./onMountedOrActivated-97a1bb6a.js";import"./download-2647fd8d.js";import"./base64Conver-39fc0d26.js";import"./index-cf464bf9.js";import"./index-7f09b489.js";import"./sortable.esm-4ae27e0b.js";const $=y({name:"MenuManagement",components:{BasicTable:C,MenuDrawer:D,TableAction:T},setup(){const[e,{openDrawer:i}]=S(),[o,{reload:s,expandAll:c}]=g({title:"菜單列表",api:_,columns:k,formConfig:{labelWidth:120,schemas:B,autoSubmitOnEnter:!0},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:80,title:"操作",dataIndex:"action",fixed:void 0}});function u(){i(!0,{isUpdate:!1,id:0})}function l(r){i(!0,{record:r,isUpdate:!0,id:r.id})}function n(r){return h(this,null,function*(){yield w(r.id).finally(()=>s())})}function t(){s()}function a(){M(c)}return{registerTable:o,registerDrawer:e,handleCreate:u,handleEdit:l,handleDelete:n,handleSuccess:t,onFetchSuccess:a}}});function v(e,i,o,s,c,u){const l=m("a-button"),n=m("TableAction"),t=m("BasicTable"),a=m("MenuDrawer");return b(),A("div",null,[p(t,{onRegister:e.registerTable,onFetchSuccess:e.onFetchSuccess},{toolbar:d(()=>[p(l,{type:"primary",onClick:e.handleCreate},{default:d(()=>[F(" 新增菜单 ")]),_:1},8,["onClick"])]),bodyCell:d(({column:r,record:f})=>[r.key==="action"?(b(),E(n,{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,f)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否確認刪除",placement:"left",confirm:e.handleDelete.bind(null,f)}}]},null,8,["actions"])):x("",!0)]),_:1},8,["onRegister","onFetchSuccess"]),p(a,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}const ce=R($,[["render",v]]);export{ce as default};
