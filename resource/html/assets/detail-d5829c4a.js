var h=(T,f,u)=>new Promise((y,c)=>{var i=t=>{try{a(u.next(t))}catch(e){c(e)}},n=t=>{try{a(u.throw(t))}catch(e){c(e)}},a=t=>t.done?y(t.value):Promise.resolve(t.value).then(i,n);a((u=u.apply(T,f)).next())});import{d as G,ap as L,f as v,o as R,a8 as W,q as X,n as $,_ as l,a9 as k,aa as r,E as b,ac as d,l as m,u as p,a0 as g,$ as w,F as D,ab as K,a1 as P}from"./vue-5c68ae35.js";import{P as j}from"./index-9fe0b115.js";import{aS as z,aT as H,b as J}from"./index.js";import{u as O,s as V}from"./user-3510e0a3.js";import{X as I}from"./antd-12f11a56.js";import"./useContentViewHeight-c2d18fda.js";import"./useWindowSizeFn-997fa1d0.js";import"./onMountedOrActivated-97a1bb6a.js";const Q={class:"pt-4 m-4 desc-wrap"},re=G({name:"UserDetail",__name:"detail",setup(T){var N;const f=I,u=I.TabPane,y=L(),c=z(),{createMessage:i}=J(),n=v(!1),a=v((N=y.params)==null?void 0:N.id),t=v("detail"),e=v(),{setTitle:M}=H();function S(){return h(this,null,function*(){const s=yield O(Number(a.value));e.value=s})}M("詳情：使用者"+a.value);function A(){c("/system/user")}function E(){n.value=!0,V(Number(a.value),!1).then(()=>{const s=e.value;s.status=!1,e.value=s,i.success("禁用使用者"+a.value)}).finally(()=>n.value=!1)}function F(){n.value=!0,V(Number(a.value),!0).then(()=>{const s=e.value;s.status=!0,e.value=s,i.success("啟用使用者"+a.value)}).finally(()=>n.value=!1)}return R(()=>{S()}),(s,B)=>{var C,x;const _=W("a-button"),q=X("loading");return $((l(),k(p(j),{title:"使用者"+((C=e.value)==null?void 0:C.nickName)+"的資料",content:"介紹："+((x=e.value)==null?void 0:x.desc),contentBackground:"",onBack:A},{extra:r(()=>{var o,U;return[(o=e.value)!=null&&o.status?(l(),k(_,{key:0,type:"primary",danger:"",onClick:E},{default:r(()=>[b(" 禁用帳號 ")]),_:1})):d("",!0),(U=e.value)!=null&&U.status?d("",!0):(l(),k(_,{key:1,color:"success",type:"primary",onClick:F},{default:r(()=>[b(" 啟用帳號 ")]),_:1})),m(_,{type:"primary"},{default:r(()=>[b(" 重製密碼 ")]),_:1})]}),footer:r(()=>[m(p(f),{"default-active-key":"detail",activeKey:t.value,"onUpdate:activeKey":B[0]||(B[0]=o=>t.value=o)},{default:r(()=>[m(p(u),{key:"detail",tab:"使用者資料"}),m(p(u),{key:"logs",tab:"操作日誌"})]),_:1},8,["activeKey"])]),default:r(()=>[g("div",Q,[t.value=="detail"?(l(),w(D,{key:0},K(10,o=>g("div",{key:o},"這是使用者"+P(a.value)+"資料Tab",1)),64)):d("",!0),t.value=="logs"?(l(),w(D,{key:1},K(10,o=>g("div",{key:o},"這是使用者"+P(a.value)+"操作日誌",1)),64)):d("",!0)])]),_:1},8,["title","content"])),[[q,n.value]])}}});export{re as default};
